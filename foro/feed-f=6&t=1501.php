<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="es">
<link rel="self" type="application/atom+xml" href="http://losersjuegos.com.ar/foro/feed.php?f=6&amp;t=1501" />

<title>LosersJuegos</title>
<subtitle>Desarrollando videojuegos libres</subtitle>
<link href="http://losersjuegos.com.ar/foro/index.php" />
<updated>2012-06-29T17:16:55+00:00</updated>

<author><name><![CDATA[LosersJuegos]]></name></author>
<id>http://losersjuegos.com.ar/foro/feed.php?f=6&amp;t=1501</id>
<entry>
<author><name><![CDATA[mcmakia.696]]></name></author>
<updated>2012-06-29T17:16:55+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=1501&amp;p=6885#p6885</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=1501&amp;p=6885#p6885"/>
<title type="html"><![CDATA[Coalisiones sobre plataformas despues de salto SDL C++]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=1501&amp;p=6885#p6885"><![CDATA[
Hola colegas ,soy yo de nuevo,eh estado ausente por que me la paso progamando algoritmos y codigos para mis futuros proyectos y me tope con esto.yo hice un programa en donde un PJ salta y luego cae en el suelo.el suelo es solo un restriccion de movimiento en que si por ejemplo:<br /><br />if( PJ.y +ANCHO_PJ&gt;500 ){ PJ.y=500; }<br /><br />entonces los que quiero es que el PJ se detenga despues de saltar pero esta ves comprobando la colision.esto es como para juego de plataformas.el problema es, que no me sale como quiero,si alguien tiene un codigo mejor que el mio por favor que me lo de,lo estoy necesitando mucho.aqui les dejo mi codigo:<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code><br />#include &lt;stdio.h&gt;<br />#include &lt;SDL.h&gt;<br />#include &lt;SDL_ttf.h&gt;<br /><br />void TECLADO();<br />bool COLISION( SDL_Rect A, SDL_Rect B );<br />void PJ_PARADO ();<br />void PJ_IZQUIERDA ();<br />void PJ_DERECHA ();<br />void PJ_SALTANDO();<br />void PERSONAJE_MOVER ( int VEL_X );<br />void PJ_CAMBIAR_ESTADO(int NUEVO);<br />void DIBUJAR_NUMERO(TTF_Font *FUENTE,int NUM,int x,int y,SDL_Surface * PANTALLA);<br /><br />SDL_Surface *PANTALLA;<br />SDL_Surface *PJ;<br />SDL_Surface *FONDO;<br />SDL_Surface *PLATA;<br /><br />SDL_Event EVENTO;<br /><br />TTF_Font *FUENTE = NULL;<br /><br />SDL_Rect PJ_R; <br />SDL_Rect FONDO_R;<br />SDL_Rect PLATA_R;<br />SDL_Rect PLATA_R2;<br /><br />bool SALIR = false;<br />char TITULO&#91;&#93;=&quot;PRUEBA DE PLATAFORMAS 1&quot;;<br />int ESTADO=1;<br />int VEL_INICIAL=1;<br /><br />Uint8 * TECLAS = SDL_GetKeyState (NULL);<br /><br />/***************************/<br /><br />int main(int argc, char *argv&#91;&#93;) <br />{<br /><br /><br />   SDL_Init( SDL_INIT_VIDEO );<br />   SDL_WM_SetCaption( TITULO, NULL );<br />   PANTALLA = SDL_SetVideoMode(800,600,24,SDL_HWSURFACE);<br />   FONDO = SDL_LoadBMP(&quot;fondo.bmp&quot;);<br />   PJ = SDL_LoadBMP(&quot;pj.bmp&quot;);<br />   PLATA = SDL_LoadBMP(&quot;plataforma.bmp&quot;);<br />   TTF_Init();<br />   FUENTE = TTF_OpenFont( &quot;cour.ttf&quot;, 16 ); <br /><br />   <br />   <br />   PJ_R.x = 0;<br />   PJ_R.y = 500;<br />   PJ_R.w = PJ-&gt;w;<br />   PJ_R.h = PJ-&gt;h;<br /><br />   FONDO_R.x = 0;<br />   FONDO_R.y = 0;<br />   FONDO_R.w = FONDO-&gt;w;<br />   FONDO_R.h = FONDO-&gt;h;<br /><br />   PLATA_R.x = 60;<br />   PLATA_R.y = 550;<br />   PLATA_R.w = PLATA-&gt;w;<br />   PLATA_R.h = PLATA-&gt;h;<br /><br />   PLATA_R2.x = 300;<br />   PLATA_R2.y = 450;<br />   PLATA_R2.w = PLATA-&gt;w;<br />   PLATA_R2.h = PLATA-&gt;h;<br /><br />   while( SALIR == false )<br />    {<br />      while( SDL_PollEvent( &amp;EVENTO ) )<br />        {<br /><br />         <br /><br />         //EVENTOS DEL TECLADO<br />         <br />         if( EVENTO.type == SDL_QUIT ){ SALIR = true; }<br />         if(EVENTO.key.keysym.sym == SDLK_ESCAPE ){ SALIR = true;}<br /><br />      }//FIN WHILE #2<br /><br />      switch (ESTADO)<br />      {<br />      case 1:<br />         PJ_PARADO ();<br />         break;<br />         <br />      case 2:<br />         PJ_IZQUIERDA ();<br />         break;<br /><br />      case 3:<br />         PJ_DERECHA ();<br />         break;<br /><br />      case 4:<br />         PJ_SALTANDO ();<br />         break;<br /><br />      }//FIN SWITCH #1<br /><br />      SDL_BlitSurface(FONDO,NULL,PANTALLA,&amp;FONDO_R);<br />      DIBUJAR_NUMERO(FUENTE,PJ_R.x,10,10,PANTALLA);<br />      DIBUJAR_NUMERO(FUENTE,PJ_R.y,10,30,PANTALLA);<br />      DIBUJAR_NUMERO(FUENTE,VEL_INICIAL,10,50,PANTALLA);<br />      SDL_BlitSurface(PJ,NULL,PANTALLA,&amp;PJ_R);<br />      SDL_BlitSurface(PLATA,NULL,PANTALLA,&amp;PLATA_R);<br />      SDL_BlitSurface(PLATA,NULL,PANTALLA,&amp;PLATA_R2);<br />      SDL_Flip(PANTALLA);<br />      <br /><br />   }//FIN WHILE #1<br /><br />   //DECARGA DE SUPERFICIES Y OTROS RECURSOS<br />   SDL_FreeSurface(FONDO);<br />   SDL_FreeSurface(PJ);<br />   SDL_FreeSurface(PLATA);<br />   TTF_CloseFont(FUENTE);<br />   TTF_Quit();<br />   SDL_Quit ();<br /><br />return 0;<br />}<br /><br /><br /><br />/*****************************/<br /><br />bool COLISION( SDL_Rect A, SDL_Rect B )<br />{<br />    //Lados de los rectangulos<br />    int leftA, leftB;<br />    int rightA, rightB;<br />    int topA, topB;<br />    int bottomA, bottomB;<br /><br />    //Calcular los lados del rectangulo A<br />    leftA = A.x;<br />    rightA = A.x + A.w;<br />    topA = A.y;<br />    bottomA = A.y + A.h;<br /><br />    //calcular los lados del rectangulo B<br />    leftB = B.x;<br />    rightB = B.x + B.w;<br />    topB = B.y;<br />    bottomB = B.y + B.h;<br /><br />    //Si alguno de los lados de A esta fuera de B<br />    if( bottomA &lt;= topB ){ return false; }<br />   if( topA &gt;= bottomB ){ return false; }<br />   if( rightA &lt;= leftB ){ return false; }<br />   if( leftA &gt;= rightB ){ return false; }<br /><br />    //Si ninguno de los lados de A esta fuera de B<br />    return true;<br />}<br /><br />void PJ_PARADO ()<br />{<br />   if (TECLAS &#91;SDLK_LEFT&#93;)<br />      PJ_CAMBIAR_ESTADO (2);<br /><br />   if (TECLAS &#91;SDLK_RIGHT&#93;)<br />      PJ_CAMBIAR_ESTADO (3);<br />   <br />   if (TECLAS &#91;SDLK_x&#93;)<br />      PJ_CAMBIAR_ESTADO (4);<br />}<br /><br />void PJ_IZQUIERDA ()<br />{<br />   PERSONAJE_MOVER(-2);<br /><br />   if (! TECLAS &#91;SDLK_LEFT&#93;)<br />      PJ_CAMBIAR_ESTADO (1);<br /><br />   if (TECLAS &#91;SDLK_x&#93;)<br />      PJ_CAMBIAR_ESTADO (4);<br />}<br /><br />void PJ_DERECHA ()<br />{<br />   PERSONAJE_MOVER ( +2);<br /><br />   if (! TECLAS &#91;SDLK_RIGHT&#93;)<br />      PJ_CAMBIAR_ESTADO ( 1);<br /><br />   if (TECLAS &#91;SDLK_x&#93;)<br />      PJ_CAMBIAR_ESTADO ( 4);<br />}<br /><br /><br />void PJ_SALTANDO()<br />{<br />   PJ_R.y += VEL_INICIAL &gt;&gt; 2;<br />   VEL_INICIAL ++;<br /><br />   if (TECLAS &#91;SDLK_LEFT&#93;)<br />      PERSONAJE_MOVER (-2);<br /><br />   if (TECLAS &#91;SDLK_RIGHT&#93;)<br />      PERSONAJE_MOVER ( +2);<br /><br />   if( COLISION( PJ_R, PLATA_R ) )<br />   {<br />   <br />   PJ_R.y -=2;<br />   PJ_R.x -=2;<br />   PJ_CAMBIAR_ESTADO ( 1 );<br />   VEL_INICIAL=1;<br /><br />   }else PJ_R.y++;<br />   <br />   if (PJ_R.y +50&gt; 600)<br />   {<br />      PJ_R.y-=2;<br />      PJ_CAMBIAR_ESTADO ( 1 );<br />   }<br /><br />   if( COLISION( PJ_R, PLATA_R2 ) )<br />   {<br />   <br />   PJ_R.y -=2;<br />   PJ_R.x -=2;<br />   PJ_CAMBIAR_ESTADO ( 1 );<br />   VEL_INICIAL=1;<br /><br />   }else PJ_R.y++;<br /><br /><br /><br /><br />   <br /><br />}<br /><br />void PJ_CAMBIAR_ESTADO(int NUEVO)<br />{<br />   <br />   ESTADO = NUEVO;<br />   <br />   if (ESTADO == 4) { VEL_INICIAL = -50; }<br />}<br /><br />void PERSONAJE_MOVER ( int VEL_X )<br />{<br />   PJ_R.x += VEL_X;<br />   <br />   if( ( PJ_R.x &lt; 0 ) || ( PJ_R.x + 50 &gt; 800 ))<br />      {<br />        <br />        PJ_R.x -= VEL_X;<br />      <br />      <br />      }<br /><br />}<br /><br />void DIBUJAR_NUMERO(TTF_Font *FUENTE,int NUM,int x,int y,SDL_Surface * PANTALLA)<br />{<br />   char TEXTO_CHAR&#91;17&#93;;<br />   SDL_Surface *TEXTO;<br />    SDL_Rect TEXTO_RECTA;<br />    SDL_Color COLOR={255,255,0};<br />    sprintf(TEXTO_CHAR,&quot;%d&quot;,NUM);<br />    <br />   TEXTO = TTF_RenderText_Solid( FUENTE, TEXTO_CHAR , COLOR );<br />    <br />    TEXTO_RECTA.x = x;<br />    TEXTO_RECTA.y = y;<br />    TEXTO_RECTA.h = TEXTO-&gt;h;<br />    TEXTO_RECTA.w = TEXTO-&gt;w;<br />    <br />    SDL_BlitSurface(TEXTO, NULL,PANTALLA, &amp;TEXTO_RECTA);<br />    SDL_FreeSurface(TEXTO);<br />}<br /><br /><br /><br /></code></dd></dl><p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=2569">mcmakia.696</a> — Vie Jun 29, 2012 5:16 pm</p><hr />
]]></content>
</entry>
</feed>