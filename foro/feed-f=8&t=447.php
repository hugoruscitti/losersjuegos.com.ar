<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="es">
<link rel="self" type="application/atom+xml" href="http://losersjuegos.com.ar/foro/feed.php?f=8&amp;t=447" />

<title>LosersJuegos</title>
<subtitle>Desarrollando videojuegos libres</subtitle>
<link href="http://losersjuegos.com.ar/foro/index.php" />
<updated>2009-01-15T20:27:24+00:00</updated>

<author><name><![CDATA[LosersJuegos]]></name></author>
<id>http://losersjuegos.com.ar/foro/feed.php?f=8&amp;t=447</id>
<entry>
<author><name><![CDATA[hugoruscitti]]></name></author>
<updated>2009-01-15T20:27:24+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1914#p1914</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1914#p1914"/>
<title type="html"><![CDATA[Error de segmentacion trabajando con listas]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1914#p1914"><![CDATA[
<blockquote><div><cite>lacabra25 escribió:</cite><br />Una cosa que me estraña es que si en la ultima linea de la fucion main, antes de return, pongo exit(0) el programa se ejecuta perfecto sin dar fallo.<br /></div></blockquote><br /><br />Si, resulta que el sistema operativo es quien detecta el fallo<br />y aborta el programa. En muchos casos este instante, el de<br />interrupción, es diferente o impreciso. De todas formas es<br />común, generalmente se da cuando el sistema operativo<br />hace una operación de IO, como leer un archivo o imprimir. Algo<br />desconcertante realmente...<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=3">hugoruscitti</a> — Jue Ene 15, 2009 8:27 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lacabra25]]></name></author>
<updated>2009-01-15T16:42:46+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1908#p1908</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1908#p1908"/>
<title type="html"><![CDATA[Error de segmentacion trabajando con listas]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1908#p1908"><![CDATA[
Una cosa que me estraña es que si en la ultima linea de la fucion main, antes de return, pongo exit(0) el programa se ejecuta perfecto sin dar fallo.<br /><br />De todos modos voy a hacer una funcion que se encargue de crear los miembros de la lista y de meterlos en la lista copiando el contenido que se pase como argumento al contenido de la estructura del elemento, de ese modo espero que no de fallo.<br /><br />Tambien he pensado que puede que de fallo por como intento hacer una lista con elementos que estan en un array dentro de otra estructura, por eso pense lo de la funcion que se encargue de copiar el contenido a un nuevo elemento y meterlo en la lista.<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=1912">lacabra25</a> — Jue Ene 15, 2009 4:42 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[hugoruscitti]]></name></author>
<updated>2009-01-12T03:36:08+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1882#p1882</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1882#p1882"/>
<title type="html"><![CDATA[Error de segmentacion trabajando con listas]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1882#p1882"><![CDATA[
<blockquote><div><cite>lacabra25 escribió:</cite><br />Falla la linea:<br />lista_categorias-&gt;siguiente= lista_categorias;<br /><br />Pero no entiendo el por que, simplemente hago que el puntero al siguiente elemento apunte a si mismo.<br /></div></blockquote><br /><br />Pero depende del contexto, digo, que tal si &quot;lista_categoria&quot;<br />apunta a una dirección incorrecta de memoria. La simple<br />asignación en el registro &quot;siguiente&quot; puede ocacionar la falla. Intenta<br />usar DDD, cuando el programa falle consulta el valor de la variable<br />&quot;lista_categoria&quot;. Generalmente los problemas de memoria se <br />ocasionan algunas sentencias antes, es recomendable hacer<br />un seguimiento paso a paso a partir de un breakpoint cercano a<br />la linea 169.<br /><br />Saludos.<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=3">hugoruscitti</a> — Lun Ene 12, 2009 3:36 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lacabra25]]></name></author>
<updated>2009-01-11T22:33:26+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1881#p1881</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1881#p1881"/>
<title type="html"><![CDATA[Error de segmentacion trabajando con listas]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1881#p1881"><![CDATA[
dbg es lo que utilice para saber la parte que falla, pero no entiendo el por que falla por que no deberia, dbg devolvio esto:<br /><br />Program received signal SIGSEGV, Segmentation fault.<br />0x00000000004011ee in cargar_participantes (ruta_archivo=0x402386 &quot;campeonato.xml&quot;) at archivos.c:169<br />169 lista_categorias-&gt;siguiente= lista_categorias;<br /><br />Falla la linea:<br />lista_categorias-&gt;siguiente= lista_categorias;<br /><br />Pero no entiendo el por que, simplemente hago que el puntero al siguiente elemento apunte a si mismo.<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=1912">lacabra25</a> — Dom Ene 11, 2009 10:33 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[hugoruscitti]]></name></author>
<updated>2009-01-11T20:12:45+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1878#p1878</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1878#p1878"/>
<title type="html"><![CDATA[Error de segmentacion trabajando con listas]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1878#p1878"><![CDATA[
ummm... siquiera pude compilarlo porque faltan algunos<br />datos... De todas formas, cuando trabajes con C, es muy<br />recomendable que utilices un depurador como gdb, o<br />incluso un versión gráfica como DDD. Estos programas<br />te permiten ejecutar tu proyecto paso a paso, ver las<br />estructuras de memoria mientras tu programa se está<br />ejecutando e incluso saber la linea exacta donde falla (en<br />caso de recibir un Segmentation Fault).<br /><br />El depurador se ve algo así:<br /><br /><img src="http://www.losersjuegos.com.ar/incoming/descargas/20070928/ddd2.png" alt="Imagen" /><br /><br />Prueba leyendo estos otros mensajes del foro, seguramente te<br />resulte mucho mas sencillo encontrar el error usando estas<br />herramientas:<br /><br />- <!-- m --><a class="postlink" href="http://www.losersjuegos.com.ar/foro/viewtopic.php?t=318">http://www.losersjuegos.com.ar/foro/viewtopic.php?t=318</a><!-- m --><br />- <!-- m --><a class="postlink" href="http://www.losersjuegos.com.ar/foro/viewtopic.php?t=162">http://www.losersjuegos.com.ar/foro/viewtopic.php?t=162</a><!-- m --><br /><br />Saludos.<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=3">hugoruscitti</a> — Dom Ene 11, 2009 8:12 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lacabra25]]></name></author>
<updated>2009-01-11T18:26:14+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1875#p1875</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1875#p1875"/>
<title type="html"><![CDATA[Error de segmentacion trabajando con listas]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=447&amp;p=1875#p1875"><![CDATA[
Hola, tengo un programa en el que trabajo con listas y el problema me surje al intentar hacer que el puntero adentro de la estructura apunte al siguiente elemento o a si mismo en caso de ser el unico elemento, lo he estado mirando con el debuger y os paso el resultado:<br /><br /><blockquote class="uncited"><div><br />Program received signal SIGSEGV, Segmentation fault.<br />0x00000000004011ee in cargar_participantes (ruta_archivo=0x402386 &quot;campeonato.xml&quot;) at archivos.c:169<br />169lista_categorias-&gt;siguiente= lista_categorias;<br /></div></blockquote><br /><br />No entiendo por que me da un error de fragmentacion.<br /><br />Os dejo el codigo de la funcion donde da el error:<br /><dl class="codebox"><dt>Code: </dt><dd><code>int cargar_participantes&#40;char *ruta_archivo&#41;&#123;<br />   enum estado &#123;espera, fin_campeonato, leyendo_campeonato, leyendo_participante, leyendo_categoria&#125; estado=espera;<br />   register int r=0, f1=0, f2=0;<br />   char cl&#91;101&#93;;<br />   participante *participantes, *p_temporal;<br />   categoria *categorias, *c_temporal, *c_auxiliar;<br />   if&#40;ruta_archivo != NULL&#41;&#123;<br />      FILE *archivo;<br />      archivo= fopen&#40;ruta_archivo, &quot;r&quot;&#41;;<br />      if&#40;archivo != NULL&#41;&#123;<br />         while&#40;fscanf&#40;archivo, &quot;%s&quot;, &amp;cl&#91;0&#93;&#41; != EOF&#41;&#123;<br />            if&#40;strcmp&#40;&amp;cl&#91;0&#93;, &quot;&lt;championship&gt;&quot;&#41; == 0&#41;&#123;<br />               if&#40;estado == espera&#41;&#123;<br />                  estado= leyendo_campeonato;<br />               &#125;else&#123;<br />                  r=3;<br />                  break;<br />               &#125;<br />            &#125;else if&#40;strcmp&#40;&amp;cl&#91;0&#93;, &quot;&lt;title&gt;&quot;&#41; == 0&#41;&#123;<br />               while&#40;strcmp&#40;&amp;cl&#91;0&#93;, &quot;&lt;/title&gt;&quot;&#41; != 0 &amp;&amp; fscanf&#40;archivo, &quot;%s&quot;, &amp;cl&#91;0&#93;&#41; != EOF&#41;&#123;<br />                  if&#40;strcmp&#40;&amp;cl&#91;0&#93;, &quot;&lt;/title&gt;&quot;&#41; == 0&#41;&#123;<br />                     f1=0;<br />                     break;<br />                  &#125;else&#123;<br />                     switch&#40;estado&#41;&#123;<br />                        case leyendo_campeonato: if&#40;f1 == 0&#41;&#123;<br />                              strcpy&#40;&amp;titulo_campeonato&#91;0&#93;, &amp;cl&#91;0&#93;&#41;;<br /></code></dd></dl><dl class="codebox"><dt>Code: </dt><dd><code>                              f1=1;<br /><br />                           &#125;else&#123;<br />                              if&#40;&#40;strlen&#40;&amp;titulo_campeonato&#91;0&#93;&#41; + strlen&#40;&amp;cl&#91;0&#93;&#41;&#41; &lt; 100&#41;&#123;<br />                                 strcat&#40;&amp;titulo_campeonato&#91;0&#93;, &quot; &quot;&#41;;<br />                                 strcat&#40;&amp;titulo_campeonato&#91;0&#93;, &amp;cl&#91;0&#93;&#41;;<br />                              &#125;<br />                           &#125;<br />                           break;<br />                        case leyendo_categoria: c_temporal= &amp;&#40;p_temporal-&gt;categorias&#91;f2&#93;&#41;;<br />                              if&#40;f1 == 0&#41;&#123;<br />                              /*incorporando la categoria a las categorias en las que participa el participante*/<br />                              strcpy&#40;&amp;c_temporal-&gt;nombre&#91;0&#93;, &amp;cl&#91;0&#93;&#41;;<br />                              f1=1;<br />                           &#125;else&#123;<br />                              if&#40;&#40;strlen&#40;&amp;c_temporal-&gt;nombre&#91;0&#93;&#41; + strlen&#40;&amp;cl&#91;0&#93;&#41;&#41; &lt; 100&#41;&#123;<br />                                 strcat&#40;&amp;c_temporal-&gt;nombre&#91;0&#93;, &quot; &quot;&#41;;</code></dd></dl><dl class="codebox"><dt>Code: </dt><dd><code>                                 strcat&#40;&amp;c_temporal-&gt;nombre&#91;0&#93;, &amp;cl&#91;0&#93;&#41;;<br />                              &#125;<br />                           &#125;<br />                           break;<br />                        case leyendo_participante: break;<br />                        default: break;<br />                     &#125;<br />                  &#125;<br />               &#125;<br />            &#125;else if&#40;strcmp&#40;&amp;cl&#91;0&#93;, &quot;&lt;participant&gt;&quot;&#41; == 0&#41;&#123;<br />               if&#40;estado == leyendo_campeonato&#41;&#123;<br />                  /*reservando memoria para el nuevo participante*/<br />                  p_temporal=&#40;participante *&#41; malloc&#40;sizeof&#40;participante&#41;&#41;;<br />                  estado= leyendo_participante;<br />                  f2=0;<br />               &#125;else&#123;<br />                  r=3;<br />                  break;<br />               &#125;<br />            &#125;else if&#40;strcmp&#40;&amp;cl&#91;0&#93;, &quot;&lt;name&gt;&quot;&#41; == 0&#41;&#123;<br />               while&#40;strcmp&#40;&amp;cl&#91;0&#93;, &quot;&lt;/name&gt;&quot;&#41; != 0 &amp;&amp; fscanf&#40;archivo, &quot;%s&quot;, &amp;cl&#91;0&#93;&#41; != EOF&#41;&#123;<br />                  if&#40;strcmp&#40;&amp;cl&#91;0&#93;, &quot;&lt;/name&gt;&quot;&#41; == 0&#41;&#123;<br />                     f1=0;<br />                     break;</code></dd></dl><dl class="codebox"><dt>Code: </dt><dd><code>                  &#125;else&#123;<br />                     switch&#40;estado&#41;&#123;<br />                        case leyendo_participante: if&#40;f1 == 0&#41;&#123;<br />                              /*copiando la cadena en su correspondiente lugar en la estructura del nuevo participante*/<br />                              strcpy&#40;&amp;p_temporal-&gt;nombre&#91;0&#93;, &amp;cl&#91;0&#93;&#41;;<br />                              f1=1;<br />                           &#125;else&#123;<br />                              /*concatenando la cadena del nombre que falta al nombre dejando un espacio por medio si hay espacio en la cadena de la estructura*/<br />                              if&#40;&#40;strlen&#40;&amp;p_temporal-&gt;nombre&#91;0&#93;&#41; + strlen&#40;&amp;cl&#91;0&#93;&#41;&#41; &lt; 100&#41;&#123;<br />                                 strcat&#40;&amp;p_temporal-&gt;nombre&#91;0&#93;, &quot; &quot;&#41;;<br />                                 strcat&#40;&amp;p_temporal-&gt;nombre&#91;0&#93;, &amp;cl&#91;0&#93;&#41;;<br />                              &#125;<br />                           &#125;<br />                           break;<br />                        default: break;<br />                     &#125;<br />                  &#125;<br />               &#125;<br />            &#125;else if&#40;strcmp&#40;&amp;cl&#91;0&#93;, &quot;&lt;/participant&gt;&quot;&#41; == 0&#41;&#123;<br />               if&#40;estado == leyendo_participante&#41;&#123;<br />                  /*copiando la categoria*/</code></dd></dl><dl class="codebox"><dt>Code: </dt><dd><code>                  c_auxiliar= &#40;categoria *&#41; malloc&#40;sizeof&#40;categoria&#41;&#41;;<br />                  strcpy&#40;&amp;c_auxiliar-&gt;nombre&#91;0&#93;, &amp;c_temporal-&gt;nombre&#91;0&#93;&#41;;<br />                  c_temporal= c_auxiliar;<br />                  /*añadiendo el nuevo participante a la lista de participantes*/<br />                  if&#40;participantes == NULL&#41;&#123;<br />                     participantes= p_temporal;<br />                     participantes-&gt;siguiente= participantes;<br />                     participantes-&gt;anterior= participantes;<br />                  &#125;else&#123;<br />                     p_temporal-&gt;siguiente= participantes-&gt;siguiente;<br />                     p_temporal-&gt;anterior= participantes;<br />                     participantes-&gt;siguiente-&gt;anterior= p_temporal;</code></dd></dl><dl class="codebox"><dt>Code: </dt><dd><code>                     participantes-&gt;siguiente= p_temporal;<br />                     participantes= participantes-&gt;siguiente;<br />                  &#125;<br />                  estado= leyendo_campeonato;<br />               &#125;else&#123;<br />                  r=3;<br />                  break;<br />               &#125;<br />            &#125;else if&#40;strcmp&#40;&amp;cl&#91;0&#93;, &quot;&lt;result&gt;&quot;&#41; == 0&#41;&#123;<br />               if&#40;estado == leyendo_categoria&#41;&#123;<br />                  c_temporal= &amp;&#40;p_temporal-&gt;categorias&#91;f2&#93;&#41;;<br />                  fscanf&#40;archivo, &quot;%f&quot;, &amp;&#40;c_temporal-&gt;puntuacion&#41;&#41;;<br />               &#125;else&#123;<br />                  r=3;<br />                  break;<br />               &#125;</code></dd></dl><dl class="codebox"><dt>Code: </dt><dd><code>            &#125;else if&#40;strcmp&#40;&amp;cl&#91;0&#93;, &quot;&lt;/result&gt;&quot;&#41; == 0&#41;&#123;<br />               if&#40;estado == leyendo_categoria&#41;&#123;<br />                  estado= leyendo_categoria;<br />               &#125;else&#123;<br />                  r=3;<br />                  break;<br />               &#125;<br />            &#125;else if&#40;strcmp&#40;&amp;cl&#91;0&#93;, &quot;&lt;category&gt;&quot;&#41; == 0&#41;&#123;<br />               if&#40;estado == leyendo_participante&#41;&#123;<br />                  estado= leyendo_categoria;<br />               &#125;else&#123;<br />                  r=3;<br />                  break;<br />               &#125;</code></dd></dl><dl class="codebox"><dt>Code: </dt><dd><code>            &#125;else if&#40;strcmp&#40;&amp;cl&#91;0&#93;, &quot;&lt;/category&gt;&quot;&#41; == 0&#41;&#123;<br />               if&#40;estado == leyendo_categoria&#41;&#123;<br />                  /*actualizando la lista de categorias en la variable global*/<br />                  if&#40;lista_categorias == NULL&#41;&#123;<br />                     categorias-&gt;siguiente= categorias;<br />                     categorias-&gt;anterior= categorias;<br />                  &#125;<br />                  lista_categorias= categorias;<br />                  /*comprobando si la categoria incluida entre categorias del participante esta en la lista total de categorias y en caso negativo añadiendola*/<br />                  if&#40;existe_categoria&#40;c_temporal&#41; == 0&#41;&#123;<br />                     if&#40;categorias == NULL&#41;&#123;<br />                        categorias= c_temporal;<br />                        categorias-&gt;siguiente= c_temporal;<br />                        categorias-&gt;anterior= c_temporal;<br />                     &#125;else&#123;<br />                        c_temporal-&gt;siguiente= categorias-&gt;siguiente;<br />                        c_temporal-&gt;anterior= categorias;</code></dd></dl><dl class="codebox"><dt>Code: </dt><dd><code>                        categorias-&gt;siguiente-&gt;anterior= c_temporal;<br />                        categorias-&gt;siguiente= c_temporal;<br />                        categorias= categorias-&gt;siguiente;<br />                     &#125;<br />                  &#125;<br />                  estado= leyendo_participante;<br />                  f2++;<br />               &#125;else&#123;<br />                  r=3;<br />                  break;<br />               &#125;<br />            &#125;<br />         &#125;<br />         fclose&#40;archivo&#41;;<br />      &#125;else&#123;<br />         r=2;<br />         printf&#40;&quot;Error abriendo archivo %s\n&quot;, ruta_archivo&#41;;<br />      &#125;<br />   &#125;else&#123;<br />      r=1;<br />   &#125;<br />   /*devolviendo las listas de participantes y categorias totales*/<br />   lista_participantes= participantes-&gt;siguiente;<br />   lista_categorias= categorias;<br />   return r;<br />&#125;</code></dd></dl><br /><br />Lo pego en varios cachos para que no se corte.[/code]<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=1912">lacabra25</a> — Dom Ene 11, 2009 6:26 pm</p><hr />
]]></content>
</entry>
</feed>