<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="es" xml:lang="es">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="es" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="copyright" content="2000, 2002, 2005, 2007 phpBB Group" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

<title>LosersJuegos &bull; Ver Tema - Scroll con imagen de fondo</title>

<link rel="alternate" type="application/atom+xml" title="Feed - LosersJuegos" href="feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Nuevos Temas" href="feed-mode=topics.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Foro - Sobre las bibliotecas multimedia" href="feed-f=6.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Tema - Scroll con imagen de fondo" href="feed-f=6&amp;t=287.php" />

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:

	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Introduzca el número de página al que desea saltar:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/; domain=.losersjuegos.com.ar';
	var onload_functions = new Array();
	var onunload_functions = new Array();

	

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<script type="text/javascript" src="styles/prosilver/template/styleswitcher.js"></script>
<script type="text/javascript" src="styles/prosilver/template/forum_fn.js"></script>

<link href="styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="style.php-id=3&amp;lang=en&amp;sid=4ec7bd6b5b400f7171476bb35f8261c6.css" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />




<link href="styles/prosilver/theme/header.css" rel="stylesheet" type="text/css"/>
<link href="styles/prosilver/theme/barrausuario.css" rel="stylesheet" type="text/css"/>
<link href="styles/prosilver/theme/design.css" rel="stylesheet" type="text/css"/>

<link href="styles/prosilver/theme/src/prettify.css" type="text/css" rel="stylesheet" />
<script src="styles/prosilver/theme/src/prettify.js" type="text/javascript"></script>


</head>


<body onload="prettyPrint()" id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
<div id='borde'>

    <div id="cabecera">

        <a href='index.html'><img id='logo1' alt='' src="styles/prosilver/theme/ima_cabecera/logo_1.png" width="286" height="50" name="logo1" /></a>

        <div id="navi">
            <ul>
                <li><a href="../index.html">Web</a></li>
                <li id='actual'><a href="index.html">Foro</a></li>
            </ul>
        </div>

    </div>


<div class='barra_usuario'>
        <ul>
                <li class='regresar'><a href='../index.html'>Regresar a la web</a></li>
                <li class='buscar'><a href="search.php.html">Buscar</a></li>

                
                <li class='registrar'><a href="ucp.php-mode=register.html">Registrarse</a></li>

                <li class='registrar'><a href="ucp.php-mode=login.html">Identificarse</a>
                </li>
                

        </ul>
</div>




	<a name="start_here"></a>
	<div id="page-body">
		<ul style='font-size: 14px' class="linklist">
                    <li class="icon-home"><a href="index.php.html" accesskey="h">Índice general</a></li>
                    </ul>
<h2><a href="viewtopic.php-f=6&amp;t=287&amp;start=0.html">Scroll con imagen de fondo</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">Tratamos sobre el manejo de APIs frecuentemente utilizadas en el desarrollo de videojuegos, como SDL, pygame o SFML.<br /></div>

<div class="topic-actions">

	<div class="buttons">
	
		<div class="reply-icon"><a href="posting.php-mode=reply&amp;f=6&amp;t=287.html" title="Publicar una respuesta"><span></span>Publicar una respuesta</a></div>
	
	</div>

	
		<div class="search-box">
			<form method="post" id="topic-search" action="search.php-t=287.html">
			<fieldset>
				<input class="inputbox search tiny"  type="text" name="keywords" id="search_keywords" size="20" value="Buscar este tema…" onclick="if(this.value=='Buscar este tema…')this.value='';" onblur="if(this.value=='')this.value='Buscar este tema…';" />
				<input class="button2" type="submit" value="Buscar" />
				<input type="hidden" value="287" name="t" />
				<input type="hidden" value="msgonly" name="sf" />
			</fieldset>
			</form>
		</div>
	
		<div class="pagination">
			3 mensajes
			 &bull; Página <strong>1</strong> de <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p1120" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="#p1120">Scroll con imagen de fondo</a></h3>
			<p class="author"><a href="viewtopic.php-p=1120.html#p1120"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=1910.html">Rafiudo</a></strong> &raquo; Vie Abr 11, 2008 3:05 pm </p>

			

			<div class="content">Hola, estoy haciendo un juego de lucha y quisiera hacer un scroll con una imagen de fondo mas grande que la pantalla con SDL y c
<br />
<br />El problema es que no me deja hacer el scroll hacia la derecha y solo funciona hacia la izquierda pero dejandro rastro, hice las pruebas para que el fondo se moviera solo sin mover el muñeco pero no hay manera.
<br />
<br />Dejo el codigo para ver si alguien me puede echar una mano y decirque que es lo que hago mal:
<br />
<br />Esta son las funciones que uso en un archivo aparte util.c
<br />
<br />//******************************************************************************
<br />//Imprime el fondo
<br />//******************************************************************************
<br />void imprimir_fondo (SDL_Surface *fondo, SDL_Surface *screen, SDL_Rect * dest)
<br />{    
<br />
<br />     SDL_BlitSurface(fondo, NULL, screen, dest);
<br />     
<br />}
<br />
<br />//******************************************************************************
<br />//Scroll del fondo
<br />//******************************************************************************
<br />void scroll_fondo (SDL_Rect * dest)
<br />{    
<br />     dest-&gt;x--;   
<br />}
<br />
<br />//******************************************************************************
<br />//Inicia  fondo
<br />//******************************************************************************
<br />void inicia_fondo (SDL_Surface *fondo, SDL_Surface *screen, SDL_Rect * dest)
<br />{    
<br />     dest-&gt;x = 0;
<br />     dest-&gt;y = 0;
<br />     dest-&gt;w = fondo-&gt;w;
<br />     dest-&gt;h = fondo-&gt;h;     
<br />}
<br />
<br />
<br />Y estas son las llamadas a las funciones en el programa principal:
<br />
<br />    inicia_fondo (fondo, screen, &amp;dest);
<br />    imprimir_fondo (fondo, screen, &amp;dest);
<br />    
<br />	while (procesar_eventos ())
<br />	{				
<br />		scroll_fondo (&amp;dest);
<br />		imprimir_fondo (fondo, screen, &amp;dest);
<br />		actor_actualizar (&amp;actor);
<br /> 	    actor_imprimir (&amp;actor, screen, &amp;rect);
<br />
<br />		SDL_Flip (screen);
<br />		SDL_UpdateRect (screen,0,0,0,0);
<br />		
<br />		SDL_Delay (10);
<br />	}
<br />
<br />Si pogo en la funcion actualizar scroll dest-&gt;x++ me funciona pero es cuando sale el scroll hacia la izquierda, y otra cosa que he visto es que si uso estos diferenets modulos no me deja inicializar la imagen de fondo con los parametros x,y con valores negativos :S
<br />
<br />
<br />Muchas gracias de antemano!
<br />
<br />Un saludo</div>

			

		</div>

		
			<dl class="postprofile" id="profile1120">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=1910.html">Rafiudo</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 2</dd><dd><strong>Registrado:</strong> Vie Mar 28, 2008 1:31 am</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1126" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p1126"></a></h3>
			<p class="author"><a href="#p1126"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=3.html" style="color: #AA0000;" class="username-coloured">hugoruscitti</a></strong> &raquo; Vie Abr 11, 2008 9:10 pm </p>

			

			<div class="content">Saludos, te comento que existe un ejemplo sobre scroll con
<br />C y SDL en la sección de ejemplos:
<br />
<br />   <!-- m --><a class="postlink" href="http://www.losersjuegos.com.ar/referencia/ejemplos/ejemplos.php">http://www.losersjuegos.com.ar/referenc ... emplos.php</a><!-- m -->
<br />
<br />El programa de ejemplo se llama &quot;Desplazamiento suave&quot;:
<br />
<br />   <img src="http://www.losersjuegos.com.ar/referencia/ejemplos/scroll/mini.png" alt="Imagen" />
<br />
<br />tal vez ese ejemplo te sirva para ver otra forma de implementar
<br />un desplazamiento.
<br />
<br />Igualmente, si continúas con problemas en tu versión del programa
<br />sería bueno que subas una versión funcional (o al menos compilable)
<br />de lo que tienes hasta ahora, de esa forma puedo observar claramente
<br />el efecto de falla y tratar de ayudar. El ejemplo que nos 
<br />adjuntas no tiene imágenes y le falta gran parte del código... es un
<br />poco difícil seguirlo si lleva tanto tiempo ponerlo en funcionamiento. Si me
<br />lo haces un poco mas fácil puedo ayudar: ¿que tal un archivo .zip (no .rar)?, 
<br />una captura de pantalla... 
<br />
<br />Un saludo.</div>

			<div id="sig1126" class="signature">Hugo Ruscitti
<br /><!-- w --><a class="postlink" href="http://www.losersjuegos.com.ar">www.losersjuegos.com.ar</a><!-- w --></div>

		</div>

		
			<dl class="postprofile" id="profile1126">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=3.html"><img src="download/3-avatar=3_1295438267.jpg" width="80" height="80" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=3.html" style="color: #AA0000;" class="username-coloured">hugoruscitti</a>
			</dt>

			<dd>Site Admin</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 1242</dd><dd><strong>Registrado:</strong> Dom Jul 30, 2006 3:57 am</dd><dd><strong>Ubicación:</strong> Buenos Aires, Argentina</dd>
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://www.losersjuegos.com.ar" title="WWW: http://www.losersjuegos.com.ar"><span>Sitio web</span></a></li>
				</ul>
			</dd>
		

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1189" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p1189"></a></h3>
			<p class="author"><a href="viewtopic.php-p=1189.html#p1189"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=1910.html">Rafiudo</a></strong> &raquo; Jue Abr 17, 2008 5:07 pm </p>

			

			<div class="content">Buenas, uso el codigo de &quot;automatas&quot; que se encuentra en los ejemplos de esta web con la chinita que se mueve por pantalla, salta, pega etc... lo que quiero ahora es meterle un fondo mayor que el de la ventana y que haga scroll horizontal si el personaje pasa de x=300.
<br />
<br />El codigo que tengo ahora es este (solo pego los relaccionado a el scroll):
<br />
<br />//******************************************************************************
<br />//Imprime el fondo
<br />//******************************************************************************
<br />void imprimir_fondo (SDL_Surface *fondo, SDL_Surface *screen, SDL_Rect * dest)
<br />{    
<br />
<br />     SDL_BlitSurface(fondo, NULL, screen, dest);
<br />     
<br />}
<br />
<br />//******************************************************************************
<br />//Scroll del fondo
<br />//******************************************************************************
<br />void scroll_fondo (SDL_Rect * dest, struct actor * actor)
<br />{   
<br />    if (actor-&gt;x &gt; 300) 
<br />    {
<br />         dest-&gt;x--;
<br />         actor-&gt;x = 301;  
<br />    }
<br />    else if (actor-&gt;x &lt; 100) 
<br />    {
<br />         dest-&gt;x++; 
<br />         actor-&gt;x = 99;  
<br />    }
<br />}
<br />
<br />//******************************************************************************
<br />//Inicia  fondo
<br />//******************************************************************************
<br />void inicia_fondo (SDL_Surface *fondo, SDL_Surface *screen, SDL_Rect * dest)
<br />{    
<br />     dest-&gt;x = 0;
<br />     dest-&gt;y = 0;
<br />     dest-&gt;w = fondo-&gt;w;
<br />     dest-&gt;h = fondo-&gt;h;     
<br />}
<br />
<br />
<br />
<br />Poniendo esto se me queda pillao en la piscion 300 y solo avanza un pixel el fondo, cuando al dejar de andar incluso tenia q avanzar solo el fondo 1 pixel cada vez... no lo entiendo
<br />
<br />
<br />
<br />Las llamadas en el buble principal son :
<br />
<br />
<br />
<br />int main (int argc, char *argv[])
<br />{
<br /> SDL_Surface * screen,* fondo;
<br /> struct actor actor;
<br /> SDL_Rect rect,dest;
<br />
<br /> if (iniciar (&amp;screen))
<br />  return 1;
<br />
<br /> if (actor_iniciar (&amp;actor))
<br />  return 1;
<br />
<br /> fondo = IMG_Load(&quot;imagenes/fondo3.jpg&quot;);
<br /> if (fondo == NULL)
<br /> {
<br />  printf(&quot;Error: %s\n&quot;, SDL_GetError ());
<br />  return 1;
<br /> }
<br /> 
<br />    inicia_fondo (fondo, screen, &amp;dest);
<br />    imprimir_fondo (fondo, screen, &amp;dest);
<br />    
<br />
<br />    float startTime = SDL_GetTicks();
<br />    float currentTime = SDL_GetTicks();
<br />    int FPS = 0;
<br />    int FrameCount = 0;
<br />    
<br /> while (procesar_eventos ())
<br /> {    
<br />  scroll_fondo (&amp;dest, &amp;actor);
<br />  imprimir_fondo (fondo, screen, &amp;dest);
<br />  actor_actualizar (&amp;actor);
<br />      actor_imprimir (&amp;actor, screen, &amp;rect);
<br />
<br />  SDL_Flip (screen);
<br />  SDL_UpdateRect (screen,0,0,0,0);
<br />  
<br />        FrameCount++;
<br />
<br />        currentTime = SDL_GetTicks();
<br />        if (startTime - currentTime &gt; 1000) 
<br />        {
<br />           FPS = FrameCount;        
<br />           startTime = SDL_GetTicks();
<br />           FrameCount = 0;
<br />        }
<br />    } 
<br />}
<br />
<br />
<br />
<br />Gracias por todo, espero vuestra ayuda <img src="images/smilies/icon_wink.gif" alt=";)" title="Wink" /></div>

			

		</div>

		
			<dl class="postprofile" id="profile1189">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=1910.html">Rafiudo</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 2</dd><dd><strong>Registrado:</strong> Vie Mar 28, 2008 1:31 am</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<form id="viewtopic" method="post" action="viewtopic.php-f=6&amp;t=287&amp;start=0.html">

	<fieldset class="display-options" style="margin-top: 0; ">
		
		<label>Mostrar mensajes previos: <select name="st" id="st"><option value="0" selected="selected">Todos los mensajes</option><option value="1">1 día</option><option value="7">7 días</option><option value="14">2 semanas</option><option value="30">1 mes</option><option value="90">3 meses</option><option value="180">6 meses</option><option value="365">1 año</option></select></label>
		<label>Ordenar por <select name="sk" id="sk"><option value="a">Autor</option><option value="t" selected="selected">Fecha publicación</option><option value="s">Asunto</option></select></label> <label><select name="sd" id="sd"><option value="a" selected="selected">Ascendente</option><option value="d">Descendente</option></select> <input type="submit" name="sort" value="Ir" class="button2" /></label>
		
	</fieldset>

	</form>
	<hr />


<div class="topic-actions">
	<div class="buttons">
	
		<div class="reply-icon"><a href="posting.php-mode=reply&amp;f=6&amp;t=287.html" title="Publicar una respuesta"><span></span>Publicar una respuesta</a></div>
	
	</div>

	
		<div class="pagination">
			3 mensajes
			 &bull; Página <strong>1</strong> de <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="viewforum.php-f=6.html" class="left-box left" accesskey="r">Volver a Sobre las bibliotecas multimedia</a></p>

	<form method="post" id="jumpbox" action="viewforum.php.html" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Saltar a:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Seleccione un Foro</option>
			<option value="-1">------------------</option>
				<option value="15">Proyecto Losersjuegos</option>
			
				<option value="1">&nbsp; &nbsp;Planificación y eventos</option>
			
				<option value="14">&nbsp; &nbsp;Asadetris</option>
			
				<option value="22">Pilas Engine</option>
			
				<option value="23">&nbsp; &nbsp;Anuncios de los desarrolladores</option>
			
				<option value="24">&nbsp; &nbsp;Consultas, problemas o bugs.</option>
			
				<option value="25">&nbsp; &nbsp;Proyectos usando pilas</option>
			
				<option value="26">&nbsp; &nbsp;Sugerencias e ideas</option>
			
				<option value="28">&nbsp; &nbsp;General</option>
			
				<option value="16">Sugerencias, proyectos e ideas</option>
			
				<option value="2">&nbsp; &nbsp;Artículos, traducciones y documentación</option>
			
				<option value="3">&nbsp; &nbsp;Ejemplos</option>
			
				<option value="4">&nbsp; &nbsp;Videojuegos</option>
			
				<option value="12">&nbsp; &nbsp;Propuestas de desarrollo y concursos</option>
			
				<option value="13">&nbsp; &nbsp;Inspiración y otras ideas interesantes</option>
			
				<option value="5">&nbsp; &nbsp;Otros</option>
			
				<option value="17">Consultas</option>
			
				<option value="6" selected="selected">&nbsp; &nbsp;Sobre las bibliotecas multimedia</option>
			
				<option value="7">&nbsp; &nbsp;Instalación de bibliotecas y herramientas</option>
			
				<option value="8">&nbsp; &nbsp;Sobre lenguajes de programación</option>
			
				<option value="9">&nbsp; &nbsp;General</option>
			
				<option value="20">&nbsp; &nbsp;3D</option>
			
				<option value="29">&nbsp; &nbsp;HTML5 y Javascript</option>
			
				<option value="30">&nbsp; &nbsp;Qt y pyqt</option>
			
				<option value="18">Otros</option>
			
				<option value="10">&nbsp; &nbsp;Fuera de tópico</option>
			
				<option value="11">&nbsp; &nbsp;Links interesantes</option>
			
			</select>
			<input type="submit" value="Ir" class="button2" />
		</fieldset>
	</form>


	<h3>¿Quién está conectado?</h3>
	<p>Usuarios navegando por este Foro: No hay usuarios registrados visitando el Foro y 1 invitado</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="index.php.html" accesskey="h">Índice general</a></li>
				
			<li class="rightside"><a href="memberlist.php-mode=leaders.html">El Equipo</a> &bull; <a href="ucp.php-mode=delete_cookies.html">Borrar todas las cookies del Sitio</a> &bull; Todos los horarios son UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>



<div id="pie">

    <ul>
            <li class="contactenos"><a href="../comunidad/contactenos.html">Contáctenos</a></li>
                
                <li class="cc"><a href="http://creativecommons.org/licenses/by-sa/2.5/deed.es">Licencia de uso para el sitio</a></li>

                    <li class="foro"><a href="index.html">Foro de mensajes</a></li>

                        <li class="comunidad"><a href="../comunidad.html">Sobre el grupo ...</a></li>
                    </ul>
                </div>


</div> <!-- borde -->
</div>


<div class="copyright">
Este foro de mensajes funciona gracias al sistema <a href="http://www.phpbb.com/">phpBB</a>
<br/>
Tema visual personalizando por Hugo Ruscitti.
<br/>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	<img src="cron.php-cron_type=tidy_sessions.gif" width="1" height="1" alt="cron" />
</div>

</body>
</html>