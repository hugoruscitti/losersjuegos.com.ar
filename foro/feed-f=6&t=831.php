<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="es">
<link rel="self" type="application/atom+xml" href="http://losersjuegos.com.ar/foro/feed.php?f=6&amp;t=831" />

<title>LosersJuegos</title>
<subtitle>Desarrollando videojuegos libres</subtitle>
<link href="http://losersjuegos.com.ar/foro/index.php" />
<updated>2010-08-28T10:07:14+00:00</updated>

<author><name><![CDATA[LosersJuegos]]></name></author>
<id>http://losersjuegos.com.ar/foro/feed.php?f=6&amp;t=831</id>
<entry>
<author><name><![CDATA[RafaG]]></name></author>
<updated>2010-08-28T10:07:14+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3939#p3939</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3939#p3939"/>
<title type="html"><![CDATA[Re: Mapa de tiles en SDL]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3939#p3939"><![CDATA[
Después de diez días, y gracias a vuestra ayuda, lo he conseguido.  <img src="http://losersjuegos.com.ar/foro/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> <br /><br />Para resolver el último problema con las colisiones creé una función que detectaba las colisiones con las cuatro esquinas (como dijo Juanxo).<br /><br />Aquí dejo el código completo, seguro que a alguien le será útil:<br /><dl class="codebox"><dt>Code: </dt><dd><code>#include &lt;iostream.h&gt;<br />#include &lt;SDL.h&gt;<br /><br />#define ANCHO_MAPA 20<br />#define ALTO_MAPA 20<br />#define ANCHO_TILE 30<br />#define LAT_DERECHO ANCHO_TILE*ANCHO_MAPA<br />#define LAT_INFERIOR ANCHO_TILE*ALTO_MAPA<br />#define VELOCIDAD 5<br /><br />#define C 1<br /><br />void Cargar();<br /><br />int CeldaPersonaje();<br />void Imprimir();<br />void Mover();<br /><br />class Camara<br />{<br />    public:<br />        int X;<br />        int Y;<br />};<br />class Personaje<br />{<br />    public:<br />        int x,y;<br />        SDL_Surface*img;<br />};<br /><br />SDL_Surface*pantalla,*tiles;<br />SDL_Rect PosTiles, PosTilesR,PosBola;<br />Camara Camara;<br />Personaje Personaje;<br />Uint8 *tecla;<br />int ELSE=1;<br />int x=0,y=0;<br /><br />int map&#91;ALTO_MAPA&#93;&#91;ANCHO_MAPA&#93;=<br />{<br />    {C,C,C,0,0,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C},<br />    {C,0,C,C,0,C,0,0,0,0,0,0,0,C,0,0,0,0,0,C},<br />    {C,0,C,0,0,0,0,0,0,0,0,0,0,C,C,C,C,C,0,C},<br />    {C,0,C,C,C,C,0,0,0,0,0,0,0,0,0,0,0,C,0,C},<br />    {C,0,C,0,0,C,0,0,0,0,0,0,C,C,C,C,C,C,0,C},<br />    {C,0,C,C,C,C,0,0,C,C,C,C,C,0,0,0,0,0,0,C},<br />    {C,0,C,C,0,0,0,C,0,0,0,0,C,C,C,0,C,C,0,C},<br />    {C,0,0,C,0,C,C,C,C,C,C,C,0,C,C,0,C,C,0,C},<br />    {0,C,0,C,0,C,0,C,0,0,C,0,0,C,C,0,C,C,0,C},<br />    {0,C,0,C,0,0,0,C,C,0,C,0,0,C,C,C,C,C,0,C},<br />    {C,C,0,C,C,C,0,0,C,0,C,0,0,C,0,0,0,0,0,C},<br />    {0,C,0,0,0,C,0,C,C,0,C,0,C,C,C,C,C,C,0,C},<br />    {0,C,0,C,C,C,0,C,C,0,C,C,C,0,0,0,0,0,0,C},<br />    {0,C,0,C,0,0,0,C,0,0,0,0,0,0,C,C,C,C,C,C},<br />    {0,C,0,C,0,C,C,C,C,C,C,C,C,0,C,0,0,0,0,0},<br />    {0,C,0,C,0,C,0,0,0,0,0,0,0,0,C,C,0,0,0,0},<br />    {0,C,0,C,0,C,C,C,0,C,C,C,C,C,C,0,0,0,0,0},<br />    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />    {C,C,C,C,C,C,C,C,0,C,C,C,C,C,C,0,0,0,0,0},<br />    {0,0,0,0,0,0,0,C,0,C,0,0,0,0,0,0,0,0,0,0},<br />};<br /><br />int main ( int argc, char** argv )<br />{<br />    Cargar();<br /><br />    while (1)<br />    {<br />        Mover();<br />        Imprimir();<br />        SDL_Delay(10);<br />    }<br />    return 0;<br />}<br /><br />void Imprimir()<br />{<br />    SDL_FillRect(pantalla,NULL,0);<br />    for (y=0; y&lt;ALTO_MAPA; y++)<br />    {<br />        for (x=0; x&lt;ANCHO_MAPA; x++)<br />        {<br />            if (map&#91;y&#93;&#91;x&#93;==0)<br />            {<br />                PosTilesR.x=0;<br />                PosTilesR.y=0;<br />                PosTilesR.w=ANCHO_TILE;<br />                PosTilesR.h=ANCHO_TILE;<br />            }<br />            if (map&#91;y&#93;&#91;x&#93;==C)<br />            {<br />                PosTilesR.x=ANCHO_TILE;<br />                PosTilesR.y=0;<br />                PosTilesR.w=ANCHO_TILE*2;<br />                PosTilesR.h=ANCHO_TILE;<br />            }<br />            PosTiles.x=x*ANCHO_TILE-Camara.X;<br />            PosTiles.y=y*ANCHO_TILE-Camara.Y;<br />            if (PosTiles.x&gt;=-(ANCHO_TILE)&amp;&amp; PosTiles.x&lt;=200+ANCHO_TILE&amp;&amp;PosTiles.y&gt;=-(ANCHO_TILE)&amp;&amp; PosTiles.y&lt;=200)<br />            {<br />                SDL_BlitSurface(tiles,&amp;PosTilesR,pantalla,&amp;PosTiles);<br />            }<br />        }<br />    }<br />    SDL_BlitSurface(Personaje.img,NULL,pantalla,&amp;PosBola);<br />    SDL_Flip(pantalla);<br />}<br />void Mover()<br />{<br />    PosBola.x=Personaje.x;<br />    PosBola.y=Personaje.y;<br /><br />    SDL_PumpEvents();<br />    tecla=SDL_GetKeyState(NULL);<br /><br />    if (tecla&#91;SDLK_ESCAPE&#93;)<br />    {<br />        exit(1);<br />    }<br /><br />    ///******************************************///<br /><br />        if (tecla&#91;SDLK_UP&#93;)<br />        {<br />            if (Camara.Y&gt;0 &amp;&amp; Personaje.y==(200/2)-(Personaje.img-&gt;w/2))<br />            {<br />                Camara.Y-=VELOCIDAD;<br />                if (CeldaPersonaje()==C)<br />                {<br />                    Camara.Y+=VELOCIDAD;<br />                }<br />            }<br />            if (Personaje.y&gt;(200/2)-(Personaje.img-&gt;w/2) || (Camara.Y==0 &amp;&amp; Personaje.y&gt;0))<br />            {<br />                Personaje.y-=VELOCIDAD;<br />                if (CeldaPersonaje()==C)<br />                {<br />                    Personaje.y+=VELOCIDAD;<br />                }<br />            }<br /><br /><br />            if (Personaje.y&lt;(200/2)-(Personaje.img-&gt;h/2)&amp;&amp;Camara.Y!=0)<br />            {<br />                Personaje.y=(200/2)-(Personaje.img-&gt;h/2);<br />            }<br /><br />        }<br />        if (tecla&#91;SDLK_DOWN&#93;)<br />        {<br />            if (Camara.Y&lt;LAT_INFERIOR-200 &amp;&amp; Personaje.y==(200/2)-(Personaje.img-&gt;w/2))<br />            {<br />                Camara.Y+=VELOCIDAD;<br />                if (CeldaPersonaje()==C)<br />                {<br />                    Camara.Y-=VELOCIDAD;<br />                }<br />            }<br />            if (Personaje.y&lt;(200/2)-(Personaje.img-&gt;w/2)||(Camara.Y==LAT_INFERIOR-200 &amp;&amp; Personaje.y&lt;200-(Personaje.img-&gt;h)))<br />            {<br />                Personaje.y+=VELOCIDAD;<br />                if (CeldaPersonaje()==C)<br />                {<br />                    Personaje.y-=VELOCIDAD;<br />                }<br />            }<br /><br />            if (Personaje.y&gt;(200/2)-(Personaje.img-&gt;h/2)&amp;&amp;Camara.Y==0)<br />            {<br />                Personaje.y=(200/2)-(Personaje.img-&gt;h/2);<br />            }<br /><br />        }<br />        if (tecla&#91;SDLK_LEFT&#93;)<br />        {<br />            if (Camara.X&gt;0 &amp;&amp; Personaje.x==(200/2)-(Personaje.img-&gt;w/2))<br />            {<br />                Camara.X-=VELOCIDAD;<br />                if (CeldaPersonaje()==C)<br />                {<br />                    Camara.X+=VELOCIDAD;<br />                }<br />            }<br />            if (Personaje.x&gt;(200/2)-(Personaje.img-&gt;w/2)||(Camara.X==0 &amp;&amp; Personaje.x&gt;0))<br />            {<br />                Personaje.x-=VELOCIDAD;<br />                if (CeldaPersonaje()==C)<br />                {<br />                    Personaje.x+=VELOCIDAD;<br />                }<br />            }<br /><br />            if (Personaje.x&lt;(200/2)-(Personaje.img-&gt;w/2)&amp;&amp;Camara.X!=0)<br />            {<br />                Personaje.x=(200/2)-(Personaje.img-&gt;w/2);<br />            }<br />        }<br />        if (tecla&#91;SDLK_RIGHT&#93;)<br />        {<br />            if (Camara.X&lt;LAT_INFERIOR-200 &amp;&amp; Personaje.x==(200/2)-(Personaje.img-&gt;w/2))<br />            {<br />                Camara.X+=VELOCIDAD;<br />                if (CeldaPersonaje()==C)<br />                {<br />                    Camara.X-=VELOCIDAD;<br />                }<br />            }<br />            if (Personaje.x&lt;(200/2)-(Personaje.img-&gt;w/2)||(Camara.X==LAT_INFERIOR-200 &amp;&amp; Personaje.x&lt;200-(Personaje.img-&gt;h)))<br />            {<br />                Personaje.x+=VELOCIDAD;<br />                if (CeldaPersonaje()==C)<br />                {<br />                    Personaje.x-=VELOCIDAD;<br />                }<br />            }<br />            if (Personaje.x&gt;(200/2)-(Personaje.img-&gt;w/2)&amp;&amp;Camara.X==0)<br />            {<br />                Personaje.x=(200/2)-(Personaje.img-&gt;w/2);<br />            }<br /><br />        }<br /><br />    if (Personaje.x+Personaje.img-&gt;w&gt;200)<br />    {<br />        Personaje.x=200-Personaje.img-&gt;w;<br />        PosBola.x=Personaje.x;<br />    }<br />    if (Personaje.y+Personaje.img-&gt;h&gt;200)<br />    {<br />        Personaje.y=200-Personaje.img-&gt;h;<br />        PosBola.y=Personaje.y;<br />    }<br />    if (Personaje.x&lt;0)<br />    {<br />        Personaje.x=0;<br />        PosBola.x=Personaje.x;<br />    }<br />    if (Personaje.y&lt;0)<br />    {<br />        Personaje.y=0;<br />        PosBola.y=Personaje.y;<br />    }<br /><br />    ///*****************************************///<br /><br /><br />}<br /><br />int CeldaPersonaje()<br />{<br />    ///U<br />    if (map&#91;(Camara.Y+Personaje.y)/ANCHO_TILE&#93;&#91;(Camara.X+Personaje.x)/ANCHO_TILE&#93;==C)<br />    {<br />        return C;<br />    }<br />    if (map&#91;(Camara.Y+Personaje.y)/ANCHO_TILE&#93;&#91;(Camara.X+Personaje.x+(ANCHO_TILE-1))/ANCHO_TILE&#93;==C)<br />    {<br />        return C;<br />    }<br />    ///D<br />    if (map&#91;(Camara.Y+Personaje.y+(ANCHO_TILE-1))/ANCHO_TILE&#93;&#91;(Camara.X+Personaje.x)/ANCHO_TILE&#93;==C)<br />    {<br />        return C;<br />    }<br />    if (map&#91;(Camara.Y+Personaje.y+(ANCHO_TILE-1))/ANCHO_TILE&#93;&#91;(Camara.X+Personaje.x+(ANCHO_TILE-1))/ANCHO_TILE&#93;==C)<br />    {<br />        return C;<br />    }<br /><br />    return 0;<br />}<br /><br />void Cargar()<br />{<br />    if (SDL_Init(SDL_INIT_VIDEO)&lt;0)<br />    {<br />        cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; SDL_GetError() &lt;&lt; endl;<br />        exit(1);<br />    }<br /><br />    pantalla=SDL_SetVideoMode(200,200,24,SDL_HWSURFACE|SDL_DOUBLEBUF);<br />    if (pantalla==NULL)<br />    {<br />        cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; SDL_GetError() &lt;&lt; endl;<br />        exit(1);<br />    }<br /><br />    tiles=SDL_LoadBMP(&quot;tiles.bmp&quot;);<br />    if (tiles==NULL)<br />    {<br />        cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; SDL_GetError() &lt;&lt; endl;<br />        exit(1);<br />    }<br /><br />    Personaje.img=SDL_LoadBMP(&quot;pers.bmp&quot;);<br />    if (Personaje.img==NULL)<br />    {<br />        cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; SDL_GetError() &lt;&lt; endl;<br />        exit(1);<br />    }<br />    SDL_SetColorKey(Personaje.img, SDL_SRCCOLORKEY|SDL_RLEACCEL,SDL_MapRGB(Personaje.img-&gt;format, 255, 0, 255));<br />    Personaje.x=(200/2)-(Personaje.img-&gt;w/2);<br />    Personaje.y=(200/2)-(Personaje.img-&gt;h/2);<br /><br />    PosBola.x=(200/2)-(Personaje.img-&gt;w/2);<br />    PosBola.y=(200/2)-(Personaje.img-&gt;h/2);<br /><br />    Camara.X=LAT_DERECHO-200;<br />    Camara.Y=LAT_INFERIOR-200;<br /><br />}<br /></code></dd></dl><br /><br />Gracias a todos.<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=2204">RafaG</a> — Sab Ago 28, 2010 10:07 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Juanxo]]></name></author>
<updated>2010-08-25T20:51:02+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3885#p3885</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3885#p3885"/>
<title type="html"><![CDATA[Re: Mapa de tiles en SDL]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3885#p3885"><![CDATA[
Una opción es comprobar que ninguna de las cuatro esquinas choque con nada, así te evitarás este tipo de problemas. En 3d esto se conoce como BoundingBox<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=2057">Juanxo</a> — Mié Ago 25, 2010 8:51 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[RafaG]]></name></author>
<updated>2010-08-25T16:25:45+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3881#p3881</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3881#p3881"/>
<title type="html"><![CDATA[Re: Mapa de tiles en SDL]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3881#p3881"><![CDATA[
Si haces el artículo lo leeré.<br /><br />He hecho un avance (ya era hora), pero como siempre surge otro problema. Con un cálculo sencillo he conseguido averiguar en qué casilla se encuentra el personaje (me costó...):<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code>        if (tecla&#91;SDLK_UP&#93;)<br />        {<br />            if (Camara.Y&gt;0 &amp;&amp; Personaje.y==(200/2)-(Personaje.img-&gt;w/2))<br />            {<br />                Camara.Y-=VELOCIDAD;<br />                if (map&#91;(Camara.Y+Personaje.y)/30&#93;&#91;((Camara.X+Personaje.x))/30&#93;==C)<br />                {<br />                    Camara.Y+=VELOCIDAD;<br />                }<br />            }<br />            if (Personaje.y&gt;(200/2)-(Personaje.img-&gt;w/2) || (Camara.Y==0 &amp;&amp; Personaje.y&gt;0))<br />            {<br />                Personaje.y-=VELOCIDAD;<br />                if (map&#91;(Camara.Y+Personaje.y)/30&#93;&#91;(Camara.X+Personaje.x)/30&#93;==C)<br />                {<br />                    Personaje.y+=VELOCIDAD;<br />                }<br />            }<br /><br /><br />            if (Personaje.y&lt;(200/2)-(Personaje.img-&gt;h/2)&amp;&amp;Camara.Y!=0)<br />            {<br />                Personaje.y=(200/2)-(Personaje.img-&gt;h/2);<br />            }<br /><br />        }<br /></code></dd></dl><br /><br />El problema es que cuando Personaje.x sale de un tile Personaje.x+Personage.img-&gt;w sigue estando en el tile anterior (no se si me he explicado bien), entonces las colisiones funcionan mal, si compilais el código de arriba y lo probáis veréis el error, a ver si alguien sabe solucionarlo.<br /><br />Saludos.<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=2204">RafaG</a> — Mié Ago 25, 2010 4:25 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[adrigm77]]></name></author>
<updated>2010-08-25T09:31:56+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3875#p3875</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3875#p3875"/>
<title type="html"><![CDATA[Re: Mapa de tiles en SDL]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3875#p3875"><![CDATA[
Depende de si quieres colisiones por pixel o por tiles.<br /><br />Por tiles es muy fácil, solo debes saber por donde se puede pasar y por donde no y crear una matriz del mismo tamaño del mapa con los valores 1 y 0<br /><dl class="codebox"><dt>Code: </dt><dd><code>0 0 1 0 1 0<br />1 1 1 1 1 0<br />1 1 1 1 1 1<br />0 1 1 0 1 0<br /></code></dd></dl><br /><br />Los 1 son transitables y los 0  no. Pues ahora antes de moverte a un tile solo tienes que comprobar si la casilla es transitable.<br /><br />En realidad si quieres algo serio es mas complejo que esto poque puede haber bloqueos parciales (tiles que puedes moverte en unas direcciones y en otras no). Quiero escribir un artículo acerca de esto en mi blog, si lo hago te aviso.<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=2296">adrigm77</a> — Mié Ago 25, 2010 9:31 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[RafaG]]></name></author>
<updated>2010-08-25T08:23:01+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3873#p3873</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3873#p3873"/>
<title type="html"><![CDATA[Re: Mapa de tiles en SDL]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3873#p3873"><![CDATA[
Quizá haciendo una función que me devuelva en que tipo de tile (0,C) estoy... Pero no sé cómo.<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=2204">RafaG</a> — Mié Ago 25, 2010 8:23 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[RafaG]]></name></author>
<updated>2010-08-21T13:00:16+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3800#p3800</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3800#p3800"/>
<title type="html"><![CDATA[Re: Mapa de tiles en SDL]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3800#p3800"><![CDATA[
Ya he conseguido imprimir los tiles, por fin. <br /><br /><span style="font-weight: bold">Edito: </span>Ya solo me queda detectar colisiones, ¿alguna idea?<br /><br />Este es el código:<br /><dl class="codebox"><dt>Code: </dt><dd><code>#include &lt;iostream.h&gt;<br />#include &lt;SDL.h&gt;<br /><br />#define ANCHO_MAPA 20<br />#define ALTO_MAPA 20<br />#define ANCHO_TILE 30<br />#define LAT_DERECHO ANCHO_TILE*ANCHO_MAPA<br />#define LAT_INFERIOR ANCHO_TILE*ALTO_MAPA<br />#define VELOCIDAD 8<br /><br />#define C 1<br /><br />void Cargar();<br /><br />void Imprimir();<br />void Mover();<br /><br />class Camara<br />{<br />    public:<br />        int X;<br />        int Y;<br />};<br />class Personaje<br />{<br />    public:<br />        int x,y;<br />        SDL_Surface*img;<br />};<br /><br />SDL_Surface*pantalla,*tiles;<br />SDL_Rect PosTiles, PosTilesR,PosBola;<br />Camara Camara;<br />Personaje Personaje;<br />Uint8 *tecla;<br />int ELSE=1;<br />int x=0,y=0;<br /><br /><br />int map&#91;ALTO_MAPA&#93;&#91;ANCHO_MAPA&#93;=<br />{<br />    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />    {0,0,0,C,0,0,0,0,0,0,0,0,0,0,0,C,0,0,0,0},<br />    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />    {0,0,0,0,0,0,0,0,C,C,C,C,0,0,0,0,0,0,0,0},<br />    {0,0,C,0,0,0,0,C,0,0,0,0,C,0,0,0,0,0,0,0},<br />    {0,0,0,0,0,0,C,0,C,0,0,C,0,C,0,0,0,0,0,0},<br />    {0,0,0,0,0,0,C,0,0,0,0,0,0,C,0,0,0,0,0,0},<br />    {0,0,0,0,0,0,C,0,C,0,0,C,0,C,0,0,0,0,0,0},<br />    {0,0,0,0,0,0,C,0,0,C,C,0,0,C,0,0,0,0,0,0},<br />    {0,0,C,0,0,0,0,C,0,0,0,0,C,0,0,0,0,0,0,0},<br />    {0,0,0,0,0,0,0,0,C,C,C,C,0,0,0,0,0,0,0,0},<br />    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,C,0,0,0,0},<br />    {0,0,0,0,0,C,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />    {0,0,0,0,0,C,0,0,0,0,0,0,0,0,C,0,0,0,0,0},<br />    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />};<br /><br />int main ( int argc, char** argv )<br />{<br />    Cargar();<br /><br />    while (1)<br />    {<br />        Mover();<br />        Imprimir();<br />        SDL_Delay(10);<br />    }<br />    return 0;<br />}<br /><br />void Imprimir()<br />{<br />    SDL_FillRect(pantalla,NULL,0);<br />    for (y=0; y&lt;ALTO_MAPA; y++)<br />    {<br />        for (x=0; x&lt;ANCHO_MAPA; x++)<br />        {<br />            if (map&#91;y&#93;&#91;x&#93;==0)<br />            {<br />                PosTilesR.x=0;<br />                PosTilesR.y=0;<br />                PosTilesR.w=ANCHO_TILE;<br />                PosTilesR.h=ANCHO_TILE;<br />            }<br />            if (map&#91;y&#93;&#91;x&#93;==C)<br />            {<br />                PosTilesR.x=ANCHO_TILE;<br />                PosTilesR.y=0;<br />                PosTilesR.w=ANCHO_TILE*2;<br />                PosTilesR.h=ANCHO_TILE;<br />            }<br />            PosTiles.x=x*ANCHO_TILE-Camara.X;<br />            PosTiles.y=y*ANCHO_TILE-Camara.Y;<br />            if (PosTiles.x&gt;=-(ANCHO_TILE)&amp;&amp; PosTiles.x&lt;=200+ANCHO_TILE&amp;&amp;PosTiles.y&gt;=-(ANCHO_TILE)&amp;&amp; PosTiles.y&lt;=200)<br />            {<br />                SDL_BlitSurface(tiles,&amp;PosTilesR,pantalla,&amp;PosTiles);<br />            }<br />        }<br />    }<br />    SDL_BlitSurface(Personaje.img,NULL,pantalla,&amp;PosBola);<br />    SDL_Flip(pantalla);<br />}<br />void Mover()<br />{<br />    PosBola.x=Personaje.x;<br />    PosBola.y=Personaje.y;<br /><br />    SDL_PumpEvents();<br />    tecla=SDL_GetKeyState(NULL);<br /><br />    if (tecla&#91;SDLK_ESCAPE&#93;)<br />    {<br />        exit(1);<br />    }<br /><br />    ///******************************************///<br />    if (tecla&#91;SDLK_UP&#93;)<br />    {<br />        //Personaje.y+=VELOCIDAD;<br />        if (Camara.Y&gt;0)<br />        {<br />            Camara.Y-=VELOCIDAD;<br />        }<br />        if (Personaje.y&gt;(200/2)-(Personaje.img-&gt;w/2))<br />        {<br />            Personaje.y-=VELOCIDAD;<br />        }<br />        if (Camara.Y==0 &amp;&amp; Personaje.y&gt;0)<br />        {<br />            Personaje.y-=VELOCIDAD;<br />        }<br />    }<br />    if (tecla&#91;SDLK_DOWN&#93;)<br />    {<br />        //Personaje.y-=VELOCIDAD;<br />        ///Camara.Y+=VELOCIDAD;<br />        if (Camara.Y&lt;LAT_INFERIOR-200)<br />        {<br />            Camara.Y+=VELOCIDAD;<br />        }<br />        if (Personaje.y&lt;(200/2)-(Personaje.img-&gt;w/2))<br />        {<br />            Personaje.y+=VELOCIDAD;<br />        }<br />        if (Camara.Y==LAT_INFERIOR-200 &amp;&amp; Personaje.y&lt;200-(Personaje.img-&gt;h))<br />        {<br />            Personaje.y+=VELOCIDAD;<br />        }<br />    }<br />    if (tecla&#91;SDLK_LEFT&#93;)<br />    {<br />        //Personaje.x+=VELOCIDAD;<br />        //Camara.X-=VELOCIDAD;<br />        if (Camara.X&gt;0)<br />        {<br />            Camara.X-=VELOCIDAD;<br />        }<br />        if (Personaje.x&gt;(200/2)-(Personaje.img-&gt;w/2))<br />        {<br />            Personaje.x-=VELOCIDAD;<br />        }<br />        if (Camara.X==0 &amp;&amp; Personaje.x&gt;0)<br />        {<br />            Personaje.x-=VELOCIDAD;<br />        }<br />    }<br />    if (tecla&#91;SDLK_RIGHT&#93;)<br />    {<br />        //Personaje.x-=VELOCIDAD;<br />        if (Camara.X&lt;LAT_INFERIOR-200)<br />        {<br />            Camara.X+=VELOCIDAD;<br />        }<br />        if (Personaje.x&lt;(200/2)-(Personaje.img-&gt;w/2))<br />        {<br />            Personaje.x+=VELOCIDAD;<br />        }<br />        if (Camara.X==LAT_INFERIOR-200 &amp;&amp; Personaje.x&lt;200-(Personaje.img-&gt;h))<br />        {<br />            Personaje.x+=VELOCIDAD;<br />        }<br />    }<br /><br />    ///*****************************************///<br /><br /><br />}<br /><br />void Cargar()<br />{<br />    if (SDL_Init(SDL_INIT_VIDEO)&lt;0)<br />    {<br />        cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; SDL_GetError() &lt;&lt; endl;<br />        exit(1);<br />    }<br /><br />    pantalla=SDL_SetVideoMode(200,200,24,SDL_HWSURFACE|SDL_DOUBLEBUF);<br />    if (pantalla==NULL)<br />    {<br />        cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; SDL_GetError() &lt;&lt; endl;<br />        exit(1);<br />    }<br /><br />    tiles=SDL_LoadBMP(&quot;tiles.bmp&quot;);<br />    if (tiles==NULL)<br />    {<br />        cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; SDL_GetError() &lt;&lt; endl;<br />        exit(1);<br />    }<br /><br />    Personaje.img=SDL_LoadBMP(&quot;pers.bmp&quot;);<br />    if (Personaje.img==NULL)<br />    {<br />        cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; SDL_GetError() &lt;&lt; endl;<br />        exit(1);<br />    }<br />    Personaje.x=(200/2)-(Personaje.img-&gt;w/2);<br />    Personaje.y=(200/2)-(Personaje.img-&gt;h/2);<br /><br />    PosBola.x=(200/2)-(Personaje.img-&gt;w/2);<br />    PosBola.y=(200/2)-(Personaje.img-&gt;h/2);<br /><br />    Camara.X=LAT_DERECHO-200;<br />    Camara.Y=LAT_INFERIOR-200;<br />    /*Camara.X=PosBola.x+50;<br />    Camara.Y=PosBola.y+50;*/<br /><br />}<br /><br /><br /></code></dd></dl><br /><br />Saludos.<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=2204">RafaG</a> — Sab Ago 21, 2010 1:00 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[hugoruscitti]]></name></author>
<updated>2010-08-19T15:02:16+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3780#p3780</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3780#p3780"/>
<title type="html"><![CDATA[Re: Mapa de tiles en SDL]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3780#p3780"><![CDATA[
<blockquote><div><cite>RafaG escribió:</cite><br />Por cierto Hugo, no logro comprender el tercer parámetro que le pasas a imprimir_grilla(). Se que es para elegir el cuadro que será impreso, pero no entiendo: mapa [fila + i] [columna + j] - '0'<br /><br />¿No se supone que hay que pasarle un int? mapa[x][y] es char.<br /></div></blockquote><br /><br />Buenas, en principio si. La función tiene que recibir un número, que podría ser<br />un int. Solo que C trata a los char también como números, y a veces son mas convenientes<br />que los enteros. Te comento por qué:<br /><br />La grilla la estoy tratando como una cadena, así me resulta mas sencillo indicar como es<br />toda una fila del mapa &quot;01000234&quot;, el problema es que para C estos valores son como<br />un vector de números, donde cada elemento es el valor ascii de cada caracter: [48, 19, 48 ...etc]<br /><br />Entonces, en esa función que imprime, no me gustaría usar el valor 48 sino 0, pero como<br />'0' es un char (y vale 48) lo tengo que llevar a 0, eso se puede hacer con la<br />sentencia &quot;variable - '0'&quot;. Luego si tienes &quot; '4' - '0' &quot; el resultado sería 4 (pero como entero<br />y no como caracter.<br /><br />No se si lo he explicado bien, es medio complicado, pero ante dudas preguntame nuevamente y<br />lo explico desde otro enfoque.<br /><br />Saludos.<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=3">hugoruscitti</a> — Jue Ago 19, 2010 3:02 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[RafaG]]></name></author>
<updated>2010-08-19T09:08:08+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3775#p3775</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3775#p3775"/>
<title type="html"><![CDATA[Re: Mapa de tiles en SDL]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3775#p3775"><![CDATA[
Gracias al tutorial de adrigm77 ahora entiendo mejor el ejemplo de Hugo, pero sigo sin saber nada de las colisiones. Alomojor logro averiguarlo solo, pero no estoy seguro.<br /><br />Por cierto Hugo, no logro comprender el tercer parámetro que le pasas a imprimir_grilla(). Se que es para elegir el cuadro que será impreso, pero no entiendo: mapa [fila + i] [columna + j] - '0'<br /><br />¿No se supone que hay que pasarle un int? mapa[x][y] es char.<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=2204">RafaG</a> — Jue Ago 19, 2010 9:08 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[adrigm77]]></name></author>
<updated>2010-08-18T16:59:15+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3773#p3773</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3773#p3773"/>
<title type="html"><![CDATA[Re: Mapa de tiles en SDL]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3773#p3773"><![CDATA[
Si quieres que tenga Scroll, detención de colisiones, capas y demás no es algo trivial. pero quizás esto te sirva:<br /><br /><!-- m --><a class="postlink" href="http://www.wired-weasel.com/users/serhid/tutos/tut4.html">http://www.wired-weasel.com/users/serhi ... /tut4.html</a><!-- m --><p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=2296">adrigm77</a> — Mié Ago 18, 2010 4:59 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[hugoruscitti]]></name></author>
<updated>2010-08-18T16:16:58+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3772#p3772</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3772#p3772"/>
<title type="html"><![CDATA[Re: Mapa de tiles en SDL]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3772#p3772"><![CDATA[
Hola, como estas?<br /><br />En la web hay un ejemplo llamado &quot;scroll suave&quot; y tiene una rutina que te puede<br />servir.<br /><br />La rutina se encarga de imprimir todo el escenario de tiles sobre la pantalla<br />usando una matriz:<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code>void imprimir_escenario (SDL_Surface * screen, SDL_Surface * ima, int x, int y)<br />{<br />   static char mapa &#91;FILAS_MAPA&#93; &#91;COLUMNAS_MAPA + 1&#93; = {<br />      &quot;00000002115000000211&quot;,<br />      &quot;00000002115000000211&quot;,<br />      &quot;00000002115000000211&quot;,<br />      &quot;00000002115000000211&quot;,<br />      &quot;33333334116333333411&quot;,<br />      &quot;11111111111111111111&quot;,<br />      &quot;11111111111111111111&quot;,<br />      &quot;11111111111111111111&quot;,<br />      &quot;11111111111111111111&quot;,<br />      &quot;11111111111111111111&quot;};<br />   int i;<br />   int j;<br />   int fila = y / ALTO_TILE;<br />   int columna = x / ANCHO_TILE;<br />   int desplazamiento_x = x % ANCHO_TILE;<br />   int desplazamiento_y = y % ALTO_TILE;<br />   <br />   for (i = 0; i &lt; 6; i ++)<br />   {<br />      for (j = 0; j &lt; 8; j ++)<br />      {<br />         imprimir_grilla (screen, ima, <br />               mapa &#91;fila + i&#93; &#91;columna + j&#93; - '0',<br />               COLUMNAS_TILES,<br />               j * ANCHO_TILE - desplazamiento_x,<br />               i * ALTO_TILE - desplazamiento_y);<br />      }<br />   }<br />   <br />}<br /><br />void imprimir_grilla (SDL_Surface * screen, SDL_Surface * src, int cuadro, <br />      int cols, int x, int y)<br />{<br />   int w = src-&gt;w / cols;<br />   SDL_Rect fuente = {cuadro * w, 0, w, src-&gt;h};<br />   SDL_Rect rect = {x, y, 0, 0};<br />   <br />   if (cuadro &lt; 0 || cuadro &gt; cols)<br />   {<br />      printf (&quot;No se puede imprimir el cuadro %d\n&quot;, cuadro);<br />      return;<br />   }<br />   <br />   SDL_BlitSurface (src, &amp; fuente,   screen, &amp;rect);<br />}<br /></code></dd></dl><br /><br /><img src="http://www.losersjuegos.com.ar/_media/referencia/ejemplos/scroll/captura.png" alt="Imagen" /><br /><br />Con la diferencia que en tu código no creo que uses las variables &quot;desplazamiento_x&quot; y &quot;desplazamiento_y&quot;. A menos<br />que quieras mover un cámara o algo así...<br /><br />La página donde puedes encontrar el ejemplo es:<br /><br /><!-- m --><a class="postlink" href="http://www.losersjuegos.com.ar/referencia/ejemplos">http://www.losersjuegos.com.ar/referencia/ejemplos</a><!-- m --><br /><br />y en particular el ejemplo es:<br /><br /><!-- m --><a class="postlink" href="http://www.losersjuegos.com.ar/_media/referencia/ejemplos/scroll/scroll.tar.gz">http://www.losersjuegos.com.ar/_media/r ... oll.tar.gz</a><!-- m --><br /><br />hay otros ejemplos que también usan una técnica muy parecida, pero están en python y no<br />en C. Si algún voluntario se anima a traducirlos bienvenido...<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=3">hugoruscitti</a> — Mié Ago 18, 2010 4:16 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[RafaG]]></name></author>
<updated>2010-08-18T14:10:42+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3766#p3766</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3766#p3766"/>
<title type="html"><![CDATA[Mapa de tiles en SDL]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=831&amp;p=3766#p3766"><![CDATA[
Estoy intentando hacer un juego con un mapa hecho con tiles con SDL en C++. Pero no consigo hacerlo. He hecho que se imprima en la pantalla los tiles, pero creo que el sistema que he utilizado no es muy bueno:<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code>void Imprimir()<br />{<br />    while (1) //Hasta que no se hayan impreso todos los tiles no sale del bucle.<br />    {<br />        if (x!=9)<br />        {<br />            x++;<br />            PosTiles.x+=50;<br />        }<br />        else<br />        {<br />            if (y!=9)<br />            {<br />                x=0;<br />                PosTiles.x=0;<br />                y++;<br />                PosTiles.y+=50;<br />            }<br />            else<br />            {<br />                break; //Sale del bucle.<br />            }<br />        }<br />        if (MAP1&#91;y&#93;&#91;x&#93;==0) //Dedice que imagen hay que imprimir<br />        {<br />            PosTilesR.x=0;<br />            PosTilesR.w=50;<br />        }<br />        if (MAP1&#91;y&#93;&#91;x&#93;==1)<br />        {<br />            PosTilesR.x=50;<br />            PosTilesR.w=100;<br />        }<br /><br />        SDL_BlitSurface(tiles,&amp;PosTilesR,pantalla,&amp;PosTiles);<br />    }<br />    SDL_BlitSurface(personaje1,&amp;PosPersonaje1R,pantalla,&amp;PosPersonaje1);<br />    SDL_Flip(pantalla);<br />}<br /></code></dd></dl><br /><br />No es bueno el código, al mover el personaje no se ve fluido. Tampoco se me ocurre un modo de detectar colisiones.<br /><br />Miré el ejemplo de Colisión de plataformas pero me cuesta entender tanto código que no he escrito yo.<br /><br />A ver si alguien me da la teoría, o un ejemplo sencillo, para:<br />-Imprimir tiles (de un buen modo).<br />-Detectar colisiones con los tiles.<br /><br />Luego intentaré ponerlo en práctica. El juego no será de plataformas, la vista será desde arriba (<a href="http://i37.tinypic.com/10e3db8.jpg" class="postlink">http://i37.tinypic.com/10e3db8.jpg</a>), así que no necesita nada de gravedad.<br /><br />Saludos y gracias.<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=2204">RafaG</a> — Mié Ago 18, 2010 2:10 pm</p><hr />
]]></content>
</entry>
</feed>