<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="es" xml:lang="es">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="es" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="copyright" content="2000, 2002, 2005, 2007 phpBB Group" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

<title>LosersJuegos &bull; Ver Tema - Desactivar key_repeat selectivamente (pygame)</title>

<link rel="alternate" type="application/atom+xml" title="Feed - LosersJuegos" href="feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Nuevos Temas" href="feed-mode=topics.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Foro - Sobre lenguajes de programación" href="feed-f=8.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Tema - Desactivar key_repeat selectivamente (pygame)" href="feed-f=8&amp;t=894.php" />

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:

	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Introduzca el número de página al que desea saltar:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/; domain=.losersjuegos.com.ar';
	var onload_functions = new Array();
	var onunload_functions = new Array();

	

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<script type="text/javascript" src="styles/prosilver/template/styleswitcher.js"></script>
<script type="text/javascript" src="styles/prosilver/template/forum_fn.js"></script>

<link href="styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="style.php-id=3&amp;lang=en&amp;sid=4ec7bd6b5b400f7171476bb35f8261c6.css" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />




<link href="styles/prosilver/theme/header.css" rel="stylesheet" type="text/css"/>
<link href="styles/prosilver/theme/barrausuario.css" rel="stylesheet" type="text/css"/>
<link href="styles/prosilver/theme/design.css" rel="stylesheet" type="text/css"/>

<link href="styles/prosilver/theme/src/prettify.css" type="text/css" rel="stylesheet" />
<script src="styles/prosilver/theme/src/prettify.js" type="text/javascript"></script>


</head>


<body onload="prettyPrint()" id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
<div id='borde'>

    <div id="cabecera">

        <a href='index.html'><img id='logo1' alt='' src="styles/prosilver/theme/ima_cabecera/logo_1.png" width="286" height="50" name="logo1" /></a>

        <div id="navi">
            <ul>
                <li><a href="../index.html">Web</a></li>
                <li id='actual'><a href="index.html">Foro</a></li>
            </ul>
        </div>

    </div>


<div class='barra_usuario'>
        <ul>
                <li class='regresar'><a href='../index.html'>Regresar a la web</a></li>
                <li class='buscar'><a href="search.php.html">Buscar</a></li>

                
                <li class='registrar'><a href="ucp.php-mode=register.html">Registrarse</a></li>

                <li class='registrar'><a href="ucp.php-mode=login.html">Identificarse</a>
                </li>
                

        </ul>
</div>




	<a name="start_here"></a>
	<div id="page-body">
		<ul style='font-size: 14px' class="linklist">
                    <li class="icon-home"><a href="index.php.html" accesskey="h">Índice general</a></li>
                    </ul>
<h2><a href="viewtopic.php-f=8&amp;t=894&amp;start=0.html">Desactivar key_repeat selectivamente (pygame)</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">Agrupa todas las consultas sobre los lenguajes de programacion como C, C++, Python, Java ...<br /></div>

<div class="topic-actions">

	<div class="buttons">
	
		<div class="reply-icon"><a href="posting.php-mode=reply&amp;f=8&amp;t=894.html" title="Publicar una respuesta"><span></span>Publicar una respuesta</a></div>
	
	</div>

	
		<div class="search-box">
			<form method="post" id="topic-search" action="search.php-t=894.html">
			<fieldset>
				<input class="inputbox search tiny"  type="text" name="keywords" id="search_keywords" size="20" value="Buscar este tema…" onclick="if(this.value=='Buscar este tema…')this.value='';" onblur="if(this.value=='')this.value='Buscar este tema…';" />
				<input class="button2" type="submit" value="Buscar" />
				<input type="hidden" value="894" name="t" />
				<input type="hidden" value="msgonly" name="sf" />
			</fieldset>
			</form>
		</div>
	
		<div class="pagination">
			4 mensajes
			 &bull; Página <strong>1</strong> de <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p4204" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="#p4204">Desactivar key_repeat selectivamente (pygame)</a></h3>
			<p class="author"><a href="viewtopic.php-p=4204.html#p4204"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2006.html" style="color: #00AA00;" class="username-coloured">algarafa</a></strong> &raquo; Mié Sep 29, 2010 5:49 pm </p>

			

			<div class="content">Hola a todos los losersdevelopers  <img src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> :<br /><br />Estoy haciendo un minijuego con una navecita. No se muy bien como enfocaré el juego, pero lo que si es seguro es que constará de dos elementos, navecita y misiles. Así que, mientras que me pienso que habrá que hacer para ganar y eso he programado ya las dos clases correspondientes. El caso es que al hacer el misil me encuentro un problema. Tengo activada la repetición de teclas para que sea más sencillo mover la nave, pero al pulsar la tecla espacio (asignada para lanzar misil) me lanza una ráfaga de ellos que no veas. Adjuntos dos capturas y el código.<br /><br />Así está ahora:<br /><img src="http://img299.imageshack.us/img299/8167/provisional3.png" alt="Imagen" /><br /><br />Y así quiero que esté:<br /><img src="http://img691.imageshack.us/img691/2231/provisional2.png" alt="Imagen" /><br /><br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>#!/usr/bin/env python<br /># -*- coding: utf-8 -*-<br /># ------------------------------<br /># Autor: Rafael Álvarez García<br /># e-mail: algarafa@gmail.com<br /># ------------------------------<br /><br /># ------------------------------<br /># Importación de módulos<br /># ------------------------------<br /><br />import pygame<br />from pygame.locals import *<br />import sys<br />import os<br /><br /># ------------------------------<br /># Constantes<br /># ------------------------------<br /><br />SCREEN_WIDTH = 400<br />SCREEN_HEIGHT = 600<br />IMG_DIR = 'images'<br /><br /># ------------------------------<br /># Funciones y clases<br /># ------------------------------<br /><br /># Creamos la función para cargar imágenes.<br />def load_image(name, dir, alpha = False):<br />&nbsp; &nbsp;# Unimos la ruta de la imágen.<br />&nbsp; &nbsp;ruta = os.path.join(dir, name)<br />&nbsp; &nbsp;# Probamos a cargarla y si no devolvemos error.<br />&nbsp; &nbsp;try:<br />&nbsp; &nbsp;&nbsp; &nbsp;image = pygame.image.load(ruta)<br />&nbsp; &nbsp;&nbsp; &nbsp;print 'Cargando imagen', ruta, '...¡éxito!'<br />&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;except:<br />&nbsp; &nbsp;&nbsp; &nbsp;print 'No se pudo cargar la imagen', ruta<br />&nbsp; &nbsp;&nbsp; &nbsp;sys.exit(1)<br />&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;# Comprobamos si hay alpha.<br />&nbsp; &nbsp;if alpha:<br />&nbsp; &nbsp;&nbsp; &nbsp;image = image.convert_alpha()<br />&nbsp; &nbsp;else:<br />&nbsp; &nbsp;&nbsp; &nbsp;image = image.convert()<br />&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;return image<br /><br /># Clase para la nave.<br />class Nave(pygame.sprite.Sprite):<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;def __init__(self):<br />&nbsp; &nbsp;&nbsp; &nbsp;pygame.sprite.Sprite.__init__(self)<br />&nbsp; &nbsp;&nbsp; &nbsp;self.image = load_image('nave.png', IMG_DIR, alpha = True)<br />&nbsp; &nbsp;&nbsp; &nbsp;self.rect = self.image.get_rect()<br />&nbsp; &nbsp;&nbsp; &nbsp;self.rect.centerx = SCREEN_WIDTH / 2<br />&nbsp; &nbsp;&nbsp; &nbsp;self.rect.centery = SCREEN_HEIGHT - 60<br />&nbsp; &nbsp;&nbsp; &nbsp;self.speed = &#91;0, 0&#93;<br />&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;def update(self):<br />&nbsp; &nbsp;&nbsp; &nbsp;# Hacemos que no salga de la pantalla.<br />&nbsp; &nbsp;&nbsp; &nbsp;if self.rect.top &lt; 0:<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self.rect.top = 0<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self.speed&#91;1&#93; = 0<br />&nbsp; &nbsp;&nbsp; &nbsp;elif self.rect.bottom &gt; SCREEN_HEIGHT + 1:<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self.rect.bottom = SCREEN_HEIGHT<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self.speed&#91;1&#93; = 0<br />&nbsp; &nbsp;&nbsp; &nbsp;elif self.rect.left &lt; -1:<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self.rect.left = 0<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self.speed&#91;0&#93; = 0<br />&nbsp; &nbsp;&nbsp; &nbsp;elif self.rect.right &gt; SCREEN_WIDTH + 1:<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self.rect.right = SCREEN_WIDTH<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self.speed&#91;0&#93; = 0<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;&nbsp; &nbsp;self.rect.move_ip(self.speed)<br />&nbsp; &nbsp;&nbsp; &nbsp;<br /># Clase para el misil.<br />class Misil(pygame.sprite.Sprite):<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;def __init__(self, initial_pos):<br />&nbsp; &nbsp;&nbsp; &nbsp;pygame.sprite.Sprite.__init__(self)<br />&nbsp; &nbsp;&nbsp; &nbsp;self.image = load_image('misil.png', IMG_DIR, alpha = True)<br />&nbsp; &nbsp;&nbsp; &nbsp;self.rect = self.image.get_rect()<br />&nbsp; &nbsp;&nbsp; &nbsp;self.rect.midbottom = initial_pos<br />&nbsp; &nbsp;&nbsp; &nbsp;self.speed = &#91;0, -4&#93;<br />&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;# Si se sale de pantalla lo matamos, si no lo movemos.<br />&nbsp; &nbsp;def update(self):<br />&nbsp; &nbsp;&nbsp; &nbsp;if self.rect.bottom &lt; 0:<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self.kill<br />&nbsp; &nbsp;&nbsp; &nbsp;else:<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self.rect.move_ip(self.speed)<br /><br /># ------------------------------<br /># Función principal<br /># ------------------------------<br /><br />def main():<br />&nbsp; &nbsp;pygame.init()<br />&nbsp; &nbsp;print 'Iniciando juego...'<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# Creamos la ventana e indicamos nombre e icono.<br />&nbsp; &nbsp;screen = pygame.display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))<br />&nbsp; &nbsp;pygame.display.set_caption('Provisional')<br />&nbsp; &nbsp;icon = pygame.image.load('images/nave.png').convert_alpha()<br />&nbsp; &nbsp;pygame.display.set_icon(icon)<br />&nbsp; &nbsp;print 'Creando ventana... ¡éxito!'<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# Cargamos e imprimimos el fondo.<br />&nbsp; &nbsp;fondo = load_image('background.jpg', IMG_DIR)<br />&nbsp; &nbsp;screen.blit(fondo, (0, 0))<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# Cremoas el frupo de sprites.<br />&nbsp; &nbsp;sprites = pygame.sprite.Group()<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# Creamos la nave y la añadimos al grupo sprites.<br />&nbsp; &nbsp;nave = Nave()<br />&nbsp; &nbsp;sprites.add(nave)<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# Creamos el reloj.<br />&nbsp; &nbsp;clock = pygame.time.Clock()<br />&nbsp; &nbsp;# Activamos la repetición de teclas.<br />&nbsp; &nbsp;pygame.key.set_repeat(1, 25)<br />&nbsp; &nbsp;# Hacemos el ratón invisible.<br />&nbsp; &nbsp;pygame.mouse.set_visible(False)<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# Bucle principal.<br />&nbsp; &nbsp;while True:<br />&nbsp; &nbsp;&nbsp; &nbsp;clock.tick(60)<br />&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;&nbsp; &nbsp;# Comprobamos los eventos.<br />&nbsp; &nbsp;&nbsp; &nbsp;for event in pygame.event.get():<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if event.type == pygame.QUIT:<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;print 'Cerrando juego...'<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;sys.exit()<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if event.type == pygame.KEYDOWN:<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if event.key == K_UP:<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;nave.speed&#91;1&#93; -= 0.3<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;elif event.key == K_DOWN:<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;nave.speed&#91;1&#93; += 0.3<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;elif event.key == K_LEFT:<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;nave.speed&#91;0&#93; -= 0.3<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;elif event.key == K_RIGHT:<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;nave.speed&#91;0&#93; += 0.3<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;elif event.key == K_SPACE:<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;misil = Misil(nave.rect.midtop)<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;sprites.add(misil)<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;elif event.key == K_ESCAPE:<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;print 'Cerrando juego...'<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;sys.exit()<br />&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;&nbsp; &nbsp;# Actualizamos los sprites.<br />&nbsp; &nbsp;&nbsp; &nbsp;sprites.update()<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;&nbsp; &nbsp;# Actualizamos la pantalla.<br />&nbsp; &nbsp;&nbsp; &nbsp;sprites.clear(screen, fondo)<br />&nbsp; &nbsp;&nbsp; &nbsp;sprites.draw(screen)<br />&nbsp; &nbsp;&nbsp; &nbsp;pygame.display.flip()<br />&nbsp; &nbsp;<br />if __name__ == &quot;__main__&quot;:<br />&nbsp; &nbsp;main()<br /></code></dd></dl><br /><br />¡Muchas gracias!  <img src="images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>

			<div id="sig4204" class="signature">http://liberatumundo.wordpress.com/</div>

		</div>

		
			<dl class="postprofile" id="profile4204">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2006.html"><img src="download/2006-avatar=2006_1286822595.jpg" width="80" height="80" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=2006.html" style="color: #00AA00;" class="username-coloured">algarafa</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 135</dd><dd><strong>Registrado:</strong> Lun Oct 27, 2008 6:12 pm</dd><dd><strong>Ubicación:</strong> España</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p4205" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p4205">Re: Desactivar key_repeat selectivamente (pygame)</a></h3>
			<p class="author"><a href="viewtopic.php-p=4205.html#p4205"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2057.html">Juanxo</a></strong> &raquo; Mié Sep 29, 2010 6:54 pm </p>

			

			<div class="content"><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>#clase Nave<br />def update(self):<br />&nbsp; &nbsp; &nbsp; key = pygame.key.get_pressed()<br />&nbsp; &nbsp; &nbsp; vel_x = 0<br />&nbsp; &nbsp; &nbsp; vel_y = 0<br />&nbsp; &nbsp; &nbsp; if (key&#91;K_UP&#93;)<br />&nbsp; &nbsp;vel_y = -VELOCIDAD_NAVE<br />&nbsp; &nbsp; &nbsp; elif (key&#91;K_DOWN&#93;)<br />&nbsp; &nbsp;vel_y = VELOCIDAD_NAVE<br />&nbsp; &nbsp; &nbsp; if (key&#91;K_LEFT&#93;)<br />&nbsp; &nbsp;vel_x = -VELOCIDAD_NAVE<br />&nbsp; &nbsp; &nbsp; if (key&#91;K_RIGHT&#93;)<br />&nbsp; &nbsp;vel_x = VELOCIDAD_NAVE<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; self.rect.move_ip(vel_x, vel_y)<br /></code></dd></dl><br /><br />Otra opcion:<br /><br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>#inicializacion<br />nave.speed= &#91;0,0&#93;<br /><br />#dentro del bucle principal<br />if event.type == pygame.KEYDOWN:<br />&nbsp; &nbsp; if event.key == K_UP:<br />&nbsp; &nbsp; &nbsp; &nbsp;nave.speed&#91;1&#93;&nbsp; = -0.3<br />&nbsp; &nbsp; elif event.key == K_DOWN:<br />&nbsp; &nbsp; &nbsp; &nbsp;nave.speed&#91;1&#93;&nbsp; = 0.3<br />&nbsp; &nbsp; elif event.key == K_LEFT:<br />&nbsp; &nbsp; &nbsp; &nbsp;nave.speed&#91;0&#93; =&nbsp; -0.3<br />&nbsp; &nbsp; elif event.key == K_RIGHT:<br />&nbsp; &nbsp; &nbsp; &nbsp;nave.speed&#91;0&#93; = 0.3<br />&nbsp; &nbsp; elif event.key == K_SPACE:<br />&nbsp; &nbsp; &nbsp; &nbsp;misil = Misil(nave.rect.midtop)<br />&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp;sprites.add(misil)<br />&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; elif event.key == K_ESCAPE:<br />&nbsp; &nbsp; &nbsp; &nbsp;print 'Cerrando juego...'<br />&nbsp; &nbsp; &nbsp; &nbsp;sys.exit()<br />if event.type == pygame.KEYUP:<br />&nbsp; &nbsp; if event.key == K_UP or event.key == K_DOWN: <br />&nbsp; &nbsp; &nbsp; &nbsp;nave.speed&#91;1&#93; = 0.0<br />&nbsp; &nbsp; if event.key == K_LEFT or event.key == K_RIGHT:<br />&nbsp; &nbsp; &nbsp; &nbsp;nave.speed&#91;0&#93; = 0.0<br /></code></dd></dl><br /><br />El tema es que de esta manera no tienes que manejar nada de repeticiones de teclas ni nada parecido, asi que no tendrás problemas con los misiles</div>

			

		</div>

		
			<dl class="postprofile" id="profile4205">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2057.html"><img src="download/2057-avatar=2057_1281526741.png" width="80" height="75" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=2057.html">Juanxo</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 437</dd><dd><strong>Registrado:</strong> Sab Ene 31, 2009 2:34 am</dd><dd><strong>Ubicación:</strong> Madrid(España)</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p4206" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p4206">Re: Desactivar key_repeat selectivamente (pygame)</a></h3>
			<p class="author"><a href="viewtopic.php-p=4206.html#p4206"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=3.html" style="color: #AA0000;" class="username-coloured">hugoruscitti</a></strong> &raquo; Mié Sep 29, 2010 7:57 pm </p>

			

			<div class="content"><blockquote><div><cite>algarafa escribió:</cite>Estoy haciendo un minijuego con una navecita. No se muy bien como enfocaré el juego, pero lo que si es seguro es que constará de dos elementos, navecita y misiles. Así que, mientras que me pienso que habrá que hacer para ganar y eso he programado ya las dos clases correspondientes. El caso es que al hacer el misil me encuentro un problema. Tengo activada la repetición de teclas para que sea más sencillo mover la nave, pero al pulsar la tecla espacio (asignada para lanzar misil) me lanza una ráfaga de ellos que no veas. </div></blockquote><br />Buenas, ¡que bien se ve el juego!.<br /><br />Está muy bien que comiences por un prototipo, a mi<br />entender es una de las mejores forma de madurar<br />las ideas de desarrollo.<br /><br />Con respecto a la lógica de los disparos, te sugiero<br />una mejora y una forma para implementar lo<br />de la repeticion de los disparos.<br /><br />En donde capturas la pulsación de teclas es<br />mas sencillo enviarle un mensaje a la nave:<br /><br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>elif event.key == K_SPACE:<br />&nbsp; &nbsp; nave.shoot()<br /></code></dd></dl><br /><br />Esto te permite encapsular es funcionalidad dentro de<br />la nave y hacer que el 'disparo' se vea mas sencillo<br />desde afuera.<br /><br />Luego, para lograr que los disparos no se generen con<br />tanta frecuencia necesitarías un contador dentro de la<br />clase Nave.<br /><br />Escribo acá solamente las lineas nuevas para agregar, el<br />resto de lo que tienes de código se tendría que dejar intacto:<br /><br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code><br />class Nave(pygame.sprite.Sprite):<br /><br />&nbsp; &nbsp; def __init__(self, sprites):<br />&nbsp; &nbsp; &nbsp; &nbsp; self.sprites = sprites&nbsp; &nbsp; &nbsp;# necesita la lista de sprites para agregar disparos<br />&nbsp; &nbsp; &nbsp; &nbsp; self.counter = 0<br /><br />&nbsp; &nbsp; def update(self):<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;Actualiza el contador para simular el tiempo que le lleva recargar municiones.&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; if self.counter &gt; 0:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.counter -= 1<br /><br />&nbsp; &nbsp; def shoot(self):<br />&nbsp; &nbsp; &nbsp; &nbsp; if self.can_shoot():<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; misil = Misil(self.rect.midtop)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.sprites.add(misil)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.counter = 10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # actualiza el contacto de municiones.<br /><br />&nbsp; &nbsp; def can_shoot(self):<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;Indica si la nave puede disparar o no&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; return self.counter &lt; 1<br /><br /></code></dd></dl><br /><br />Entonces con este cambio tu nave tiene un<br />método que sabe disparar, solamente que no lo hace<br />con tanta frecuencia, sino por lo que indica la variable 'counter':<br />cuanto mayor sea el valor que le asignas al contador cuando<br />dispara (en mi caso 10) mas lenta será la frecuencia de disparo.<br /><br />El día de mañana, si la nave captura un item de<br />super potencia, o algo así, el valor de la variable<br />counter se puede ajustar, o incluso puede<br />disparar mas de un misíl a la vez, o supermisiles !!... etc<br /><br />En fin, sería bueno que juegues con el valor de counter para<br />ver si se adapta bien a la frecuencia de disparos que<br />quieres tener, al menos para mí un buen enfoque<br />es colocar esa lógica en la nave, solo por conveniencia<br />digamos.<br /><br />Saludos.</div>

			<div id="sig4206" class="signature">Hugo Ruscitti
<br /><!-- w --><a class="postlink" href="http://www.losersjuegos.com.ar">www.losersjuegos.com.ar</a><!-- w --></div>

		</div>

		
			<dl class="postprofile" id="profile4206">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=3.html"><img src="download/3-avatar=3_1295438267.jpg" width="80" height="80" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=3.html" style="color: #AA0000;" class="username-coloured">hugoruscitti</a>
			</dt>

			<dd>Site Admin</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 1242</dd><dd><strong>Registrado:</strong> Dom Jul 30, 2006 3:57 am</dd><dd><strong>Ubicación:</strong> Buenos Aires, Argentina</dd>
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://www.losersjuegos.com.ar" title="WWW: http://www.losersjuegos.com.ar"><span>Sitio web</span></a></li>
				</ul>
			</dd>
		

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p4212" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p4212">Re: Desactivar key_repeat selectivamente (pygame)</a></h3>
			<p class="author"><a href="#p4212"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2006.html" style="color: #00AA00;" class="username-coloured">algarafa</a></strong> &raquo; Vie Oct 01, 2010 3:56 pm </p>

			

			<div class="content">¡Muchas gracias a los dos por vuestras respuestas! Al final he cogido la solución de Hugo, ¡y funciona muy bien! Ahora me toca pensar en que voy a poner, si enemigos o algo así. <br /><br />Respecto a lo de los Supermisiles, lo que se podría hacer es poner laser a la nave y que tuviera una frecuencia de disparo muy alta pero bajara muy poca vida, y que los misiles se pudieran disparar pocos pero muy destructivos. Luego todavía podría haber un bonificador que te diera 3 supermisiles o algo... no sé, ya se verá. ¡De momento un obstáculo menos!<br /><br />¡Gracias a los dos de nuevo!  <img src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>

			<div id="sig4212" class="signature">http://liberatumundo.wordpress.com/</div>

		</div>

		
			<dl class="postprofile" id="profile4212">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2006.html"><img src="download/2006-avatar=2006_1286822595.jpg" width="80" height="80" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=2006.html" style="color: #00AA00;" class="username-coloured">algarafa</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 135</dd><dd><strong>Registrado:</strong> Lun Oct 27, 2008 6:12 pm</dd><dd><strong>Ubicación:</strong> España</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<form id="viewtopic" method="post" action="viewtopic.php-f=8&amp;t=894&amp;start=0.html">

	<fieldset class="display-options" style="margin-top: 0; ">
		
		<label>Mostrar mensajes previos: <select name="st" id="st"><option value="0" selected="selected">Todos los mensajes</option><option value="1">1 día</option><option value="7">7 días</option><option value="14">2 semanas</option><option value="30">1 mes</option><option value="90">3 meses</option><option value="180">6 meses</option><option value="365">1 año</option></select></label>
		<label>Ordenar por <select name="sk" id="sk"><option value="a">Autor</option><option value="t" selected="selected">Fecha publicación</option><option value="s">Asunto</option></select></label> <label><select name="sd" id="sd"><option value="a" selected="selected">Ascendente</option><option value="d">Descendente</option></select> <input type="submit" name="sort" value="Ir" class="button2" /></label>
		
	</fieldset>

	</form>
	<hr />


<div class="topic-actions">
	<div class="buttons">
	
		<div class="reply-icon"><a href="posting.php-mode=reply&amp;f=8&amp;t=894.html" title="Publicar una respuesta"><span></span>Publicar una respuesta</a></div>
	
	</div>

	
		<div class="pagination">
			4 mensajes
			 &bull; Página <strong>1</strong> de <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="viewforum.php-f=8.html" class="left-box left" accesskey="r">Volver a Sobre lenguajes de programación</a></p>

	<form method="post" id="jumpbox" action="viewforum.php.html" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Saltar a:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Seleccione un Foro</option>
			<option value="-1">------------------</option>
				<option value="15">Proyecto Losersjuegos</option>
			
				<option value="1">&nbsp; &nbsp;Planificación y eventos</option>
			
				<option value="14">&nbsp; &nbsp;Asadetris</option>
			
				<option value="22">Pilas Engine</option>
			
				<option value="23">&nbsp; &nbsp;Anuncios de los desarrolladores</option>
			
				<option value="24">&nbsp; &nbsp;Consultas, problemas o bugs.</option>
			
				<option value="25">&nbsp; &nbsp;Proyectos usando pilas</option>
			
				<option value="26">&nbsp; &nbsp;Sugerencias e ideas</option>
			
				<option value="28">&nbsp; &nbsp;General</option>
			
				<option value="16">Sugerencias, proyectos e ideas</option>
			
				<option value="2">&nbsp; &nbsp;Artículos, traducciones y documentación</option>
			
				<option value="3">&nbsp; &nbsp;Ejemplos</option>
			
				<option value="4">&nbsp; &nbsp;Videojuegos</option>
			
				<option value="12">&nbsp; &nbsp;Propuestas de desarrollo y concursos</option>
			
				<option value="13">&nbsp; &nbsp;Inspiración y otras ideas interesantes</option>
			
				<option value="5">&nbsp; &nbsp;Otros</option>
			
				<option value="17">Consultas</option>
			
				<option value="6">&nbsp; &nbsp;Sobre las bibliotecas multimedia</option>
			
				<option value="7">&nbsp; &nbsp;Instalación de bibliotecas y herramientas</option>
			
				<option value="8" selected="selected">&nbsp; &nbsp;Sobre lenguajes de programación</option>
			
				<option value="9">&nbsp; &nbsp;General</option>
			
				<option value="20">&nbsp; &nbsp;3D</option>
			
				<option value="29">&nbsp; &nbsp;HTML5 y Javascript</option>
			
				<option value="30">&nbsp; &nbsp;Qt y pyqt</option>
			
				<option value="18">Otros</option>
			
				<option value="10">&nbsp; &nbsp;Fuera de tópico</option>
			
				<option value="11">&nbsp; &nbsp;Links interesantes</option>
			
			</select>
			<input type="submit" value="Ir" class="button2" />
		</fieldset>
	</form>


	<h3>¿Quién está conectado?</h3>
	<p>Usuarios navegando por este Foro: No hay usuarios registrados visitando el Foro y 0 invitados</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="index.php.html" accesskey="h">Índice general</a></li>
				
			<li class="rightside"><a href="memberlist.php-mode=leaders.html">El Equipo</a> &bull; <a href="ucp.php-mode=delete_cookies.html">Borrar todas las cookies del Sitio</a> &bull; Todos los horarios son UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>



<div id="pie">

    <ul>
            <li class="contactenos"><a href="../comunidad/contactenos.html">Contáctenos</a></li>
                
                <li class="cc"><a href="http://creativecommons.org/licenses/by-sa/2.5/deed.es">Licencia de uso para el sitio</a></li>

                    <li class="foro"><a href="index.html">Foro de mensajes</a></li>

                        <li class="comunidad"><a href="../comunidad.html">Sobre el grupo ...</a></li>
                    </ul>
                </div>


</div> <!-- borde -->
</div>


<div class="copyright">
Este foro de mensajes funciona gracias al sistema <a href="http://www.phpbb.com/">phpBB</a>
<br/>
Tema visual personalizando por Hugo Ruscitti.
<br/>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	<img src="cron.php-cron_type=tidy_sessions.gif" width="1" height="1" alt="cron" />
</div>

</body>
</html>