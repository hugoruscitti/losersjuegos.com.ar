<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="es" xml:lang="es">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="es" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="copyright" content="2000, 2002, 2005, 2007 phpBB Group" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

<title>LosersJuegos &bull; Ver Tema - Colision con plataformas hechas de Sprites</title>

<link rel="alternate" type="application/atom+xml" title="Feed - LosersJuegos" href="feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Nuevos Temas" href="feed-mode=topics.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Foro - Videojuegos" href="feed-f=4.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Tema - Colision con plataformas hechas de Sprites" href="feed-f=4&amp;t=1320.php" />

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:

	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Introduzca el número de página al que desea saltar:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/; domain=.losersjuegos.com.ar';
	var onload_functions = new Array();
	var onunload_functions = new Array();

	

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<script type="text/javascript" src="styles/prosilver/template/styleswitcher.js"></script>
<script type="text/javascript" src="styles/prosilver/template/forum_fn.js"></script>

<link href="styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="style.php-id=3&amp;lang=en&amp;sid=4ec7bd6b5b400f7171476bb35f8261c6.css" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />




<link href="styles/prosilver/theme/header.css" rel="stylesheet" type="text/css"/>
<link href="styles/prosilver/theme/barrausuario.css" rel="stylesheet" type="text/css"/>
<link href="styles/prosilver/theme/design.css" rel="stylesheet" type="text/css"/>

<link href="styles/prosilver/theme/src/prettify.css" type="text/css" rel="stylesheet" />
<script src="styles/prosilver/theme/src/prettify.js" type="text/javascript"></script>


</head>


<body onload="prettyPrint()" id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
<div id='borde'>

    <div id="cabecera">

        <a href='index.html'><img id='logo1' alt='' src="styles/prosilver/theme/ima_cabecera/logo_1.png" width="286" height="50" name="logo1" /></a>

        <div id="navi">
            <ul>
                <li><a href="../index.html">Web</a></li>
                <li id='actual'><a href="index.html">Foro</a></li>
            </ul>
        </div>

    </div>


<div class='barra_usuario'>
        <ul>
                <li class='regresar'><a href='../index.html'>Regresar a la web</a></li>
                <li class='buscar'><a href="search.php.html">Buscar</a></li>

                
                <li class='registrar'><a href="ucp.php-mode=register.html">Registrarse</a></li>

                <li class='registrar'><a href="ucp.php-mode=login.html">Identificarse</a>
                </li>
                

        </ul>
</div>




	<a name="start_here"></a>
	<div id="page-body">
		<ul style='font-size: 14px' class="linklist">
                    <li class="icon-home"><a href="index.php.html" accesskey="h">Índice general</a></li>
                    </ul>
<h2><a href="viewtopic.php-f=4&amp;t=1320&amp;start=0.html">Colision con plataformas hechas de Sprites</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->

<div class="topic-actions">

	<div class="buttons">
	
		<div class="reply-icon"><a href="posting.php-mode=reply&amp;f=4&amp;t=1320.html" title="Publicar una respuesta"><span></span>Publicar una respuesta</a></div>
	
	</div>

	
		<div class="search-box">
			<form method="post" id="topic-search" action="search.php-t=1320.html">
			<fieldset>
				<input class="inputbox search tiny"  type="text" name="keywords" id="search_keywords" size="20" value="Buscar este tema…" onclick="if(this.value=='Buscar este tema…')this.value='';" onblur="if(this.value=='')this.value='Buscar este tema…';" />
				<input class="button2" type="submit" value="Buscar" />
				<input type="hidden" value="1320" name="t" />
				<input type="hidden" value="msgonly" name="sf" />
			</fieldset>
			</form>
		</div>
	
		<div class="pagination">
			4 mensajes
			 &bull; Página <strong>1</strong> de <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p6117" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="#p6117">Colision con plataformas hechas de Sprites</a></h3>
			<p class="author"><a href="viewtopic.php-p=6117.html#p6117"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2303.html">diego_g_09</a></strong> &raquo; Mar Oct 18, 2011 3:24 am </p>

			

			<div class="content">Buenas, estoy haciendo un juego de plataformas, ahora estoy implementando las colisiones del personaje principal y las diferentes plataformas, estas plataformas son Sprites (no son tiles), debido a que el juego no tendrá scrolling y las plataformas podrán tener distintos movimientos (girar sobre su eje, horizontal, vertical, etc). Si bien he logrado hacer que colisione mi personaje con las plataformas no se si el método a sido el mas optimo, además de que cuando el personaje esta encima de una plataforma, esta hace un efecto raro &quot;como que no sincroniza cuando hace el blit&quot; por lo tanto quería consultar si existe algún ejemplo o alguna manera de hacer esto lo mas optimo posible y sin que ese efecto &quot;raro&quot; aparezca. Además quiciera que mi personaje solo colisione &quot;por los pies&quot; no todo el rectangulo, como puedo hacer esto mediante rect? algún ejemplo o algo?, <br />Gracias!<br /><br />Saludos<br />Diego</div>

			

		</div>

		
			<dl class="postprofile" id="profile6117">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2303.html">diego_g_09</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 21</dd><dd><strong>Registrado:</strong> Sab Ago 07, 2010 11:58 pm</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p6123" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p6123">Re: Colision con plataformas hechas de Sprites</a></h3>
			<p class="author"><a href="#p6123"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2357.html">MrBB4</a></strong> &raquo; Mar Oct 18, 2011 5:46 pm </p>

			

			<div class="content">Buenas.<br />Pues no entendí bien lo del efecto raro. Talves si nos muestras el codigo podamos identificar el problema. En lo que si te puedo ayudar es en que el personaje solo colicione con los pies. A principio de año me habia puesto a hacer un juego del mismo estilo del que nos comentas, lo que hice fue crear una función <span style="font-style: italic">gravedad()</span>, dentro de la clase de tu personaje, en donde si el personaje no estab tocando nada que cayera, en caso contrario que revisara que eran solo los pies. Te muestro el codigo:<br /><pre class="prettyprint">def Gravedad&#40;self&#41;:<br />    for obj in Objeto:<br />        if not self.rect.colliderect&#40;obj.rect&#41; and not self.SALTANDO:<br />            self.CAYENDO = True<br />        elif self.rect.bottom &gt;= obj.rect.top and self.rect.bottom &lt;= obj.rect.top+10 and not self.JUMPING:<br />            self.CAYENDO = False<br />            self.recty = obj.rect.top+2<br />            break</pre><br /><br />Entonces, si te fijas primero revisa que no esté tocando nada y que además no esté saltando, de este modo tu personaje podrá atravesar el objeto y pasar hacia arriba, si las dos condiciones se cumplen el personaje caerá. En caso de que de que haya un impacto el programa verificará si la base del personaje (self.rect.bottom) está por debajo debajo, o a la misma altura, del tope del objeto (obj.rect.top). Para esto se usa el signo de <span style="font-style: italic">&gt;=</span> ya que self.rect.bottom y obj.rec.top son la cordenada Y de la base y el tope de los objetos rect, correspondientemente; y como sabemos, en programación a diferencia de las matemáticas, en plano carteciano la Y crece hacia abajo. Luego de esto el programa verifica que self.rect.bottom sea menor a obj.rect.top más 10 pixeles. Entonces, lo que estamos haciendo es que estamos haciendo es verificar que la base de nuestro personaje se encuentre dentro de los primeros 11 pixeles del objeto, esto es una medida que tuve que aplicar para evitar que el personaje pasara de largo ya que la velocidad de caida del personaje era de más de un pixel por loop, por lo que si el tope del objeto estaba por ejemplo en (x, 5) y la base de mi personaje se encontraba en (x, 4) y hacia un salto de dos pixeles iva a acabar por debajo de (x, 5) y el personaje simplemente caería al vacio.<br />Otro pequeño detalle, si te fijas dentro del elif dice <span style="font-style: italic">self.recty = obj.rect.top<span style="color: #FF0000">+2</span></span>. Esto hará que el personaje, si se pasó de largo, vuelva arriba y no se note. Pero lo que quería destacar es el +2 (osea dos pixeles dentro del obj). Lo puse así porque se veia más estetico de esta manera con los sprites que yo estaba usando, talves con los tuyos no. Arreglalo a tu gusto.<br /><br />Espero haber contestado a tu necesidad y que no haya sido muy confuso. Si algo no te quedó claro, pregunta tranquilo que yo te contesto <img src="images/smilies/icon_wink.gif" alt=";)" title="Wink" /></div>

			

		</div>

		
			<dl class="postprofile" id="profile6123">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2357.html"><img src="download/2357-avatar=2357_1318448935.jpg" width="80" height="80" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=2357.html">MrBB4</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 49</dd><dd><strong>Registrado:</strong> Mar Dic 14, 2010 11:39 pm</dd><dd><strong>Ubicación:</strong> Purto Madryn, Chubut, Argentina.</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p6124" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p6124">Re: Colision con plataformas hechas de Sprites</a></h3>
			<p class="author"><a href="viewtopic.php-p=6124.html#p6124"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2303.html">diego_g_09</a></strong> &raquo; Mar Oct 18, 2011 10:52 pm </p>

			

			<div class="content">Buenas, primero que nada estoy trabajando con python, y pygame. Luego contarles que realizando algunas pruebas pude determinar a que se debía el efecto &quot;raro&quot;, y es que tenia los sprites plataformas en un group distinto al group que tenia el personaje principal, por lo tanto cuando realizaba el update, clear y draw lo hacia desincronizado y producía ese efecto. Esto se arreglo creándome un group self.grupoAllSprites = pygame.sprite.RenderUpdates () y metiendo todos los sprites en el y en vez de realizar dos  update, clear y draw (uno por cada group que tenia) solo realize uno para grupoAllSprites y el efecto desapareció. <br /><br />Con respecto a la ayuda de MrBB4 que me pareció excelente y muy bien explicada!! y que voy a aplicar cuanto antes, tengo una duda, yo había implementado algo medio parecido pero no lo había hecho en la clase personaje y si en la clase Escenario, la cual realizaba el control de la siguiente manera: <br /><br /><pre class="prettyprint">for plataforma in pygame.sprite.spritecollide&#40;personaje, self.grupoPlataformas, False&#41;:<br />           if plataforma.rect.y &lt;= personaje.rect.y + personaje.rect.height + 10 and plataforma.rect.y &gt;= personaje.rect.y + personaje.rect.height - 10:</pre><br /><br />Tengo 3 preguntas, <br />1: Objeto viene a ser como un group de plataformas?? <br />2: la función colliderect que utilizaste viene a ser mas optima en rendimiento que spritecollide, la pregunta se debe a que estoy realizando el juego <br />para una pc que tiene unos recursos limitados de hardware y debo ser lo mas optimo posible.<br />3: Esta se debe también a optimizar, tu controlas la colisión desde la clase personaje, y yo en la clase escenario (mi decisión de crearlo en escenario es porque lo que hice fue modificar el típico método getDistanciaAlSuelo que se utiliza cuando se tienen Tiles, y puse el código que pegue arriba ) la pregunta es si quedaría mas optimo el control en la clase del personaje. <br /><br />Muchas gracias por la ayuda!!</div>

			

		</div>

		
			<dl class="postprofile" id="profile6124">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2303.html">diego_g_09</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 21</dd><dd><strong>Registrado:</strong> Sab Ago 07, 2010 11:58 pm</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p6125" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p6125">Re: Colision con plataformas hechas de Sprites</a></h3>
			<p class="author"><a href="viewtopic.php-p=6125.html#p6125"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2357.html">MrBB4</a></strong> &raquo; Mié Oct 19, 2011 12:46 am </p>

			

			<div class="content">Pues que bien que te haya servido! =D<br />En cuanto a tus dudas:<br />1- Si. El grupo objetos sería equivalente a Plataformas. Era para generalizar.<br />2- La verdad no se que diferencia hay entre coliderect y spritecollide pero siempre utilizo coliderect porque no me gusta derivar de la clase sprites, me parece innecesario.<br />3- Originalmente tambien yo había hecho la función fuera del personaje, pero utilizarla dentro del personaje ayudaría a hacerla más personalizada en el caso de los bots, ya que no todos serán iguales, tienen distintas velocidades de caido por lo que los numeros que se utilizan para evitar que se pasen de largo y cosas así serían distintos.<br /><br />Suerte con tu proyecto <img src="images/smilies/icon_wink.gif" alt=";)" title="Wink" /></div>

			

		</div>

		
			<dl class="postprofile" id="profile6125">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2357.html"><img src="download/2357-avatar=2357_1318448935.jpg" width="80" height="80" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=2357.html">MrBB4</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 49</dd><dd><strong>Registrado:</strong> Mar Dic 14, 2010 11:39 pm</dd><dd><strong>Ubicación:</strong> Purto Madryn, Chubut, Argentina.</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<form id="viewtopic" method="post" action="viewtopic.php-f=4&amp;t=1320&amp;start=0.html">

	<fieldset class="display-options" style="margin-top: 0; ">
		
		<label>Mostrar mensajes previos: <select name="st" id="st"><option value="0" selected="selected">Todos los mensajes</option><option value="1">1 día</option><option value="7">7 días</option><option value="14">2 semanas</option><option value="30">1 mes</option><option value="90">3 meses</option><option value="180">6 meses</option><option value="365">1 año</option></select></label>
		<label>Ordenar por <select name="sk" id="sk"><option value="a">Autor</option><option value="t" selected="selected">Fecha publicación</option><option value="s">Asunto</option></select></label> <label><select name="sd" id="sd"><option value="a" selected="selected">Ascendente</option><option value="d">Descendente</option></select> <input type="submit" name="sort" value="Ir" class="button2" /></label>
		
	</fieldset>

	</form>
	<hr />


<div class="topic-actions">
	<div class="buttons">
	
		<div class="reply-icon"><a href="posting.php-mode=reply&amp;f=4&amp;t=1320.html" title="Publicar una respuesta"><span></span>Publicar una respuesta</a></div>
	
	</div>

	
		<div class="pagination">
			4 mensajes
			 &bull; Página <strong>1</strong> de <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="viewforum.php-f=4.html" class="left-box left" accesskey="r">Volver a Videojuegos</a></p>

	<form method="post" id="jumpbox" action="viewforum.php.html" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Saltar a:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Seleccione un Foro</option>
			<option value="-1">------------------</option>
				<option value="15">Proyecto Losersjuegos</option>
			
				<option value="1">&nbsp; &nbsp;Planificación y eventos</option>
			
				<option value="14">&nbsp; &nbsp;Asadetris</option>
			
				<option value="22">Pilas Engine</option>
			
				<option value="23">&nbsp; &nbsp;Anuncios de los desarrolladores</option>
			
				<option value="24">&nbsp; &nbsp;Consultas, problemas o bugs.</option>
			
				<option value="25">&nbsp; &nbsp;Proyectos usando pilas</option>
			
				<option value="26">&nbsp; &nbsp;Sugerencias e ideas</option>
			
				<option value="28">&nbsp; &nbsp;General</option>
			
				<option value="16">Sugerencias, proyectos e ideas</option>
			
				<option value="2">&nbsp; &nbsp;Artículos, traducciones y documentación</option>
			
				<option value="3">&nbsp; &nbsp;Ejemplos</option>
			
				<option value="4" selected="selected">&nbsp; &nbsp;Videojuegos</option>
			
				<option value="12">&nbsp; &nbsp;Propuestas de desarrollo y concursos</option>
			
				<option value="13">&nbsp; &nbsp;Inspiración y otras ideas interesantes</option>
			
				<option value="5">&nbsp; &nbsp;Otros</option>
			
				<option value="17">Consultas</option>
			
				<option value="6">&nbsp; &nbsp;Sobre las bibliotecas multimedia</option>
			
				<option value="7">&nbsp; &nbsp;Instalación de bibliotecas y herramientas</option>
			
				<option value="8">&nbsp; &nbsp;Sobre lenguajes de programación</option>
			
				<option value="9">&nbsp; &nbsp;General</option>
			
				<option value="20">&nbsp; &nbsp;3D</option>
			
				<option value="29">&nbsp; &nbsp;HTML5 y Javascript</option>
			
				<option value="30">&nbsp; &nbsp;Qt y pyqt</option>
			
				<option value="18">Otros</option>
			
				<option value="10">&nbsp; &nbsp;Fuera de tópico</option>
			
				<option value="11">&nbsp; &nbsp;Links interesantes</option>
			
			</select>
			<input type="submit" value="Ir" class="button2" />
		</fieldset>
	</form>


	<h3>¿Quién está conectado?</h3>
	<p>Usuarios navegando por este Foro: No hay usuarios registrados visitando el Foro y 0 invitados</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="index.php.html" accesskey="h">Índice general</a></li>
				
			<li class="rightside"><a href="memberlist.php-mode=leaders.html">El Equipo</a> &bull; <a href="ucp.php-mode=delete_cookies.html">Borrar todas las cookies del Sitio</a> &bull; Todos los horarios son UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>



<div id="pie">

    <ul>
            <li class="contactenos"><a href="../comunidad/contactenos.html">Contáctenos</a></li>
                
                <li class="cc"><a href="http://creativecommons.org/licenses/by-sa/2.5/deed.es">Licencia de uso para el sitio</a></li>

                    <li class="foro"><a href="index.html">Foro de mensajes</a></li>

                        <li class="comunidad"><a href="../comunidad.html">Sobre el grupo ...</a></li>
                    </ul>
                </div>


</div> <!-- borde -->
</div>


<div class="copyright">
Este foro de mensajes funciona gracias al sistema <a href="http://www.phpbb.com/">phpBB</a>
<br/>
Tema visual personalizando por Hugo Ruscitti.
<br/>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
</div>

</body>
</html>