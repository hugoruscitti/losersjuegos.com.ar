<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="es" xml:lang="es">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="es" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="copyright" content="2000, 2002, 2005, 2007 phpBB Group" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

<title>LosersJuegos &bull; Ver Tema - Sobre el 3D, Un tutorial de panda3D</title>

<link rel="alternate" type="application/atom+xml" title="Feed - LosersJuegos" href="feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Nuevos Temas" href="feed-mode=topics.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Foro - 3D" href="feed-f=20.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Tema - Sobre el 3D, Un tutorial de panda3D" href="feed-f=20&amp;t=1370.php" />

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:

	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Introduzca el número de página al que desea saltar:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/; domain=.losersjuegos.com.ar';
	var onload_functions = new Array();
	var onunload_functions = new Array();

	

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<script type="text/javascript" src="styles/prosilver/template/styleswitcher.js"></script>
<script type="text/javascript" src="styles/prosilver/template/forum_fn.js"></script>

<link href="styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="style.php-id=3&amp;lang=en&amp;sid=4ec7bd6b5b400f7171476bb35f8261c6.css" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />




<link href="styles/prosilver/theme/header.css" rel="stylesheet" type="text/css"/>
<link href="styles/prosilver/theme/barrausuario.css" rel="stylesheet" type="text/css"/>
<link href="styles/prosilver/theme/design.css" rel="stylesheet" type="text/css"/>

<link href="styles/prosilver/theme/src/prettify.css" type="text/css" rel="stylesheet" />
<script src="styles/prosilver/theme/src/prettify.js" type="text/javascript"></script>


</head>


<body onload="prettyPrint()" id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
<div id='borde'>

    <div id="cabecera">

        <a href='index.html'><img id='logo1' alt='' src="styles/prosilver/theme/ima_cabecera/logo_1.png" width="286" height="50" name="logo1" /></a>

        <div id="navi">
            <ul>
                <li><a href="../index.html">Web</a></li>
                <li id='actual'><a href="index.html">Foro</a></li>
            </ul>
        </div>

    </div>


<div class='barra_usuario'>
        <ul>
                <li class='regresar'><a href='../index.html'>Regresar a la web</a></li>
                <li class='buscar'><a href="search.php.html">Buscar</a></li>

                
                <li class='registrar'><a href="ucp.php-mode=register.html">Registrarse</a></li>

                <li class='registrar'><a href="ucp.php-mode=login.html">Identificarse</a>
                </li>
                

        </ul>
</div>




	<a name="start_here"></a>
	<div id="page-body">
		<ul style='font-size: 14px' class="linklist">
                    <li class="icon-home"><a href="index.php.html" accesskey="h">Índice general</a></li>
                    </ul>
<h2><a href="viewtopic.php-f=20&amp;t=1370&amp;start=0.html">Sobre el 3D, Un tutorial de panda3D</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">Panda3d, blender y otras herramientas para juegos en 3D<br /></div>

<div class="topic-actions">

	<div class="buttons">
	
		<div class="reply-icon"><a href="posting.php-mode=reply&amp;f=20&amp;t=1370.html" title="Publicar una respuesta"><span></span>Publicar una respuesta</a></div>
	
	</div>

	
		<div class="search-box">
			<form method="post" id="topic-search" action="search.php-t=1370.html">
			<fieldset>
				<input class="inputbox search tiny"  type="text" name="keywords" id="search_keywords" size="20" value="Buscar este tema…" onclick="if(this.value=='Buscar este tema…')this.value='';" onblur="if(this.value=='')this.value='Buscar este tema…';" />
				<input class="button2" type="submit" value="Buscar" />
				<input type="hidden" value="1370" name="t" />
				<input type="hidden" value="msgonly" name="sf" />
			</fieldset>
			</form>
		</div>
	
		<div class="pagination">
			1 mensaje
			 &bull; Página <strong>1</strong> de <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p6316" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="#p6316">Sobre el 3D, Un tutorial de panda3D</a></h3>
			<p class="author"><a href="#p6316"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2345.html">Barajas</a></strong> &raquo; Mar Dic 27, 2011 2:24 am </p>

			

			<div class="content"><span style="font-style: italic"><span style="text-decoration: underline"><span style="font-weight: bold">Mi primer juego en 3D.</span></span></span><br /><br /><span style="font-weight: bold">Antes de empezar.</span><br /><br />Este tutorial-articulo esta destinado a ser una pequeña y fácil guía para hacer un pequeño juego 3D.<br />Antes que nada, unas consideraciones básicas.<br /><br />Lo que necesitas tener:<br /><br />Panda3D, saber tanto Python y programación estructurada. (en teoría si sabes la primera, se supone que sabes la segunda <img src="images/smilies/icon_wink.gif" alt=";)" title="Wink" /> )<br /><br />Lo que (mas aparte) deberías tener:<br /><br />Conocimientos de programación orientada a objetos y saber manejar un programa 3D (aun que no se vera en este tutorial eso, ayuda mucho al momento de hacer juegos 3D).<br /><br />Sobre los modelos...<br /><br /><span style="text-decoration: underline">Puedes encontrarlos adjuntos al articulo</span>. Para este caso los modelos están hechos utilizando Blender. No se habla de herramientas que exportan directamente a .egg (el formato por defecto de panda3D), ya que, me parece mucho más simple exportar desde blender a .x (el formato de DirectX) y, después trasformar a .egg usando los transformadores que vienen junto con panda3D. Si bien, es posible exportar a .egg usando blender, esta característica de exportación esta activada en Blender 2.4x no en superiores como 2.5 y 2.6, eso lo pondré en otro hilo en este foro.<br /><br />Sobre el 3D (algo muy, muy, obvio)...<br /><br />Una cosa que resulta obvia, al hablar de 3D es que trabajamos en un espacio tridimensional (sí, capitán obvio). Esto significa que, se agrega un nuevo eje al espacio. En otras palabras, para representar la posición en el espacio de un elemento, en lugar de ser la típica representación cartesiana de toda la vida (X,Y); pasa a ser: (X,Y,Z).<br /><br />La instalación de panda 3D.<br /><br />No se toca ese tema. Si se tienen problemas instalando, para eso esta el foro <img src="images/smilies/icon_wink.gif" alt=";)" title="Wink" />.<br /><br />Ahora sí.<br /><br /><span style="font-weight: bold">Mi primera ventana.</span><br /><br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />run&#40;&#41;</pre><br /><br />Con esas dos simples lineas, creamos una ventana. Lo que sucede, en la primera linea, importamos todo lo mínimo necesario para que panda funcione (en realidad, es mas parecido eso a una plantilla), y en la segunda, la función &quot;run&quot; es la encargada de echar a andar los componentes, incluyendo el bucle principal del programa.<br /><br /><span style="font-weight: bold">Creando un mundo.</span><br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />class Mundo&#40;&#41;:<br />    def __init__&#40;self&#41;:<br />        base.setBackgroundColor&#40;0,0,0&#41;<br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br />Esta vez, el código es mucho mas largo. ¿Que hemos hecho?<br />/*si sabes que es orientado a objetos pasa de aquí...<br /><br />si no:<br />    lee esto primero: <a href="http://mundogeek.net/archivos/2008/03/05/python-orientacion-a-objetos/" class="postlink">http://mundogeek.net/archivos/2008/03/05/python-orientacion-a-objetos/</a><br /><br />*/hasta aquí...<br /><br />Se creo en el ejemplo de arriba una clase llamada Mundo (podría tener cualquier otro nombre). En esa clase, introducimos todo lo que hagamos, para nuestro juego. Y para que lo escrito en la clase suceda en la ventana, es necesario, instanciar con &quot;mundo = Mundo()&quot;. En este caso, la función de la linea  &quot;base.setBackgroundColor(0,0,0)&quot; sera cambiar el color de fondo de gris a negro.<br /><br /><span style="font-weight: bold">Un escenario.</span><br /><br />Ahora cargaremos un modelo a nuestro programa, para eso se agregan las siguientes lineas:<br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />class Mundo&#40;&#41;:<br />    def __init__&#40;self&#41;:<br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        self.mundo = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo.reparentTo&#40;render&#41;<br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br />En la linea:<br /><blockquote class="uncited"><div> self.mundo = loader.loadModel(&quot;cilindro.egg&quot;) </div></blockquote><br />Creamos una variable donde almacenamos nuestro modelo, y lo cargamos, en este caso, el modelo esta en la misma carpeta que nuestro programa. De no ser así, para cargar el archivo, se toma como referencia la ruta CON RESPECTO A NUESTRO PROGRAMA.<br />La variable es ahora, un tipo de dato llamado nodePath<br /><br />En la siguiente linea:<br /><blockquote class="uncited"><div> self.mundo.reparentTo(render) </div></blockquote><br />Es lo que &quot;dibuja&quot; al modelo en la pantalla.<br /><br />podemos modificar su posición usando los métodos setPos(x,y,z) -general-, o setX(x), setY(y), setZ(z) :<br /><br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />class Mundo&#40;&#41;:<br />    def __init__&#40;self&#41;:<br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        self.mundo = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo.setPos&#40;0, 0, 0&#41; #recuerden &#40;x,y,z&#41;<br />        self.mundo.reparentTo&#40;render&#41;<br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br />...o su tamaño con setScale(x,y,z) -general-, setSx(x), setSy(y), setSx(z)...<br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />class Mundo&#40;&#41;:<br />    def __init__&#40;self&#41;:<br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        <br />        self.mundo0 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo0.setPos&#40;0, -5, 0&#41;<br />        self.mundo0.setSz&#40;10&#41; #crece en el eje Z<br />        self.mundo0.reparentTo&#40;render&#41;<br />        <br />        self.mundo1 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo1.setPos&#40;0, 0, 0&#41;<br />        self.mundo1.setSy&#40;10&#41;#crece en el eje Y<br />        self.mundo1.reparentTo&#40;render&#41;<br />        <br />        self.mundo2 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo2.setPos&#40;0, 5, 0&#41; <br />        self.mundo2.setSx&#40;10&#41;#crece en el eje X<br />        self.mundo2.reparentTo&#40;render&#41;<br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br />Un tip es que escalen a la misma relación los modelos al cargarlos <img src="images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />...también, podemos girar los modelos de forma simple con los métodos<br /><br />setH(h) -gira con respecto al eje z un ángulo h (la h viene de Heading rotates)-<br />setP(p) -gira con respecto al eje x un ángulo p (la p es de   Pitch rotates)-<br />setR(r) -gira con respecto al eje y un ángulo r (y la r es por Roll rotates)-<br />setHpr(h,p,r) -una combinación de los anteriores-<br /><br />en acción:<br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />class Mundo&#40;&#41;:<br />    def __init__&#40;self&#41;:<br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        <br />        self.mundo0 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo0.setPos&#40;0, -5, 0&#41;<br />        self.mundo0.setSz&#40;10&#41;<br />        self.mundo0.setH&#40;45&#41; #gira con respecto al eje Z<br />        self.mundo0.reparentTo&#40;render&#41;<br />        <br />        self.mundo1 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo1.setPos&#40;0, 0, 0&#41;<br />        self.mundo1.setSy&#40;10&#41;<br />        self.mundo1.setR&#40;45&#41; #gira con respecto al eje Y<br />        self.mundo1.reparentTo&#40;render&#41;<br />        <br />        self.mundo2 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo2.setPos&#40;0, 5, 0&#41; <br />        self.mundo2.setSx&#40;10&#41;<br />        self.mundo2.setP&#40;45&#41; #gira con respecto al eje X<br />        self.mundo2.reparentTo&#40;render&#41;<br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br />Sabiendo esto, podemos acomodar nuestro modelo en la pantalla:<br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />class Mundo&#40;&#41;:<br />    def __init__&#40;self&#41;:<br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        self.mundo0 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo0.setScale&#40;2,2,2&#41;<br />        self.mundo0.setPos&#40;0, 15, -5&#41;<br />        self.mundo0.setH&#40;90&#41;<br />        self.mundo0.reparentTo&#40;render&#41;<br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br /><span style="font-weight: bold">Funciones internas para mover los objetos con código....<br />El gestor de tareas (en ingles, task Manager)</span><br /><br />El gestor de tareas, como dice su nombre, se encarga de gestionar las &quot;tareas&quot;, las tareas son cosas a realizar por panda mientras se ejecuta el programa. El gestor de tareas ejecuta las tareas como si una cola se tratara, y siempre en orden.<br /><br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />class Mundo&#40;&#41;:<br />    def __init__&#40;self&#41;:<br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        self.mundo0 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo0.setScale&#40;2,2,2&#41;<br />        self.mundo0.setPos&#40;0, 15, -5&#41;<br />        self.mundo0.setH&#40;90&#41;<br />        self.mundo0.reparentTo&#40;render&#41;<br />        print taskMgr #esta linea, imprime las tareas en el gestor<br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br />Como se habrán dado cuenta, no utilizamos un bucle, de eso se encarga la función run(), así que, ¿Como aplicamos una función sobre nuestro modelo?, facíl, creamos una nueva tarea.<br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />class Mundo&#40;&#41;:<br />    def __init__&#40;self&#41;:<br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        self.mundo0 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo0.setScale&#40;2,2,2&#41;<br />        self.mundo0.setPos&#40;0, 15, -5&#41;<br />        self.mundo0.setH&#40;90&#41;<br />        self.mundo0.reparentTo&#40;render&#41;<br />        taskMgr.add&#40;self.gira_cilindro, &quot;gira_cilindro&quot;&#41;<br />    def gira_cilindro&#40;self, task&#41;:<br />        self.mundo0.setR&#40;self.mundo0,-1&#41;<br />        return task.cont<br /><br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br />En la linea:<br /><blockquote class="uncited"><div>  taskMrg.add(self.gira_cilindro, &quot;gira_cilindro&quot;) </div></blockquote><br />Agregamos la tarea a nuestro gestor de tareas (taskMrg) con su método add(función_que queremos_agregar, nombre_que_queramos).<br /><br />creamos el método con:<br /><blockquote class="uncited"><div> def gira_cilindro(self, task):  </div></blockquote><br /><br />Es importante notar, que el primer argumento después de self, el siguiente argumento debe ser task, para que sea agregado al gestor. Todo lo que esta dentro del metodo es lo que realizara el gestor de tareas<br /><br />Aquí, aparece la linea:<br /><blockquote class="uncited"><div> self.mundo0.setR(self.mundo0,-1) </div></blockquote><br /><br />La razón por la cual lo pasamos como propio argumento a su metodo, es para que sea &quot;consiente&quot; de que el giro es relativo a si mismo.<br /><br />Y al final:<br /><br /><blockquote class="uncited"><div> return task.cont </div></blockquote><br /><br />Esta linea, su trabajo es, hacer que la tarea se ejecute una vez más (cont de continue).<br /><br />Ahora, veremos al cilindro rodando.<br /><br />Una demostración de como funciona, (y un repaso por lo anterior)<br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />class Mundo&#40;&#41;:<br />    def __init__&#40;self&#41;:<br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        <br />        self.mundo0 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo0.setPos&#40;0, -15, 0&#41;<br />        self.mundo0.setSz&#40;5&#41;<br />        self.mundo0.setH&#40;45&#41; #gira con respecto al eje Z<br />        self.mundo0.reparentTo&#40;render&#41;<br />        <br />        self.mundo1 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo1.setPos&#40;0, 0, 0&#41;<br />        self.mundo1.setSy&#40;5&#41;<br />        self.mundo1.setR&#40;45&#41; #gira con respecto al eje Y<br />        self.mundo1.reparentTo&#40;render&#41;<br />        <br />        self.mundo2 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo2.setPos&#40;0, 15, 0&#41; <br />        self.mundo2.setSx&#40;5&#41;<br />        self.mundo2.setP&#40;45&#41; #gira con respecto al eje X<br />        self.mundo2.reparentTo&#40;render&#41;<br />        taskMgr.add&#40;self.gira_cilindros, &quot;gira_cilindros&quot;&#41;<br />    def gira_cilindros&#40;self, task&#41;:<br />        self.mundo0.setH&#40;self.mundo0,-1&#41;<br />        self.mundo1.setR&#40;self.mundo1,-1&#41;<br />        self.mundo2.setP&#40;self.mundo2,-1&#41;<br />        return task.cont<br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br /><br />Modificándolo un poco nuestro programa, podemos agregar un delay, es decir, que tarde un tiempo antes de iniciar la acción.<br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />class Mundo&#40;&#41;:<br />    def __init__&#40;self&#41;:<br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        self.mundo0 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo0.setScale&#40;2,2,2&#41;<br />        self.mundo0.setPos&#40;0, 15, -5&#41;<br />        self.mundo0.setH&#40;90&#41;<br />        self.mundo0.reparentTo&#40;render&#41;<br />        taskMgr.doMethodLater&#40;5,self.gira_cilindro, &quot;gira_cilindro&quot;&#41;<br />    def gira_cilindro&#40;self, task&#41;:<br />        self.mundo0.setR&#40;self.mundo0,-1&#41;<br />        return task.cont<br /><br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br />La linea:<br /><br /><blockquote class="uncited"><div> taskMrg.add(self.gira_cilindro, &quot;gira_cilindro&quot;) </div></blockquote><br /><br />se a remplazado por:<br /><br /><blockquote class="uncited"><div> taskMgr.doMethodLater(5,self.gira_cilindro, &quot;gira_cilindro&quot;) </div></blockquote><br /><br />doMethodLater, realiza la misma función que add, solo que, recibe como argumento, cuantos segundos esperar antes de comenzar a ejecutar la acción, en este caso, esperara 5 segundos antes de ponerlo a rodar. Si fuese ha hacerse una vez, y esperara nuevamente, 5 segundos antes de ejecutarse, nosotros tendríamos que cambiar return task.cont por return task.again (again = de nuevo, si no se te da mucho el ingles <img src="images/smilies/icon_wink.gif" alt=";)" title="Wink" /> )<br /><br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />class Mundo&#40;&#41;:<br />    def __init__&#40;self&#41;:<br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        self.mundo0 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo0.setScale&#40;2,2,2&#41;<br />        self.mundo0.setPos&#40;0, 15, -5&#41;<br />        self.mundo0.setH&#40;90&#41;<br />        self.mundo0.reparentTo&#40;render&#41;<br />        taskMgr.add&#40;5,self.gira_cilindro, &quot;gira_cilindro&quot;&#41;<br />    def gira_cilindro&#40;self, task&#41;:<br />        self.mundo0.setR&#40;self.mundo0, -1&#41;<br />        return task.cont<br /><br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br /><span style="font-weight: bold">Utilizando diferencia de tiempo (delta t).</span><br /><br />Nuestro cilindro rueda, pero, si la cantidad de FPS (Frames por segundo <img src="images/smilies/icon_smile.gif" alt=":)" title="Smile" /> )del juego es grande, se vera mucho mas rápido. Imaginemos que por cada frame de nuestro juego, el tiempo es de 0.1 unidades, es decir, si corre a 60 FPS, el tiempo de un segundo seria 6 unidades, si va a 30 FSP, son 3 unidades. Ahora, imaginemos que esas unidades son el numero de veces que se realizan las tareas de nuestro gestor.<br /><br />Para lograr velocidad constante, se utiliza la técnica de la diferencia de tiempo (delta t).<br /><br />en nuestra función que mueve el cilindro (girar_cilindro) creamos una variable donde almacenaremos la diferencia de tiempo.<br /><br /><blockquote class="uncited"><div> dt = globalClock.getDt() </div></blockquote><br /><br />El secreto es, ahora, poner cuanto queremos que se mueva en un segundo y multiplicarlo por dt, en el programa seria:<br /><br /><blockquote class="uncited"><div> self.mundo0.setR(self.mundo0, -20*dt) </div></blockquote><br /><br />es decir, que girara 20 grados cada segundo. Esto se aplica también para los métodos de cambio de posición.<br /><br />El programa quedaría así:<br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />class Mundo&#40;&#41;:<br />    def __init__&#40;self&#41;:<br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        self.mundo0 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo0.setScale&#40;2,2,2&#41;<br />        self.mundo0.setPos&#40;0, 15, -5&#41;<br />        self.mundo0.setH&#40;90&#41;<br />        self.mundo0.reparentTo&#40;render&#41;<br />        taskMgr.add&#40;self.gira_cilindro, &quot;gira_cilindro&quot;&#41;<br />    def gira_cilindro&#40;self, task&#41;:<br />        dt = globalClock.getDt&#40;&#41;<br />        self.mundo0.setR&#40;self.mundo0, -20*dt&#41;<br />        return task.cont<br /><br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br />Pero, surge un problema. ¿Que sucede si la cantidad de FPS cambia?, si en un momento son muchos y al siguiente baja.<br /><br />Esto se soluciona con dos lineas más de código:<br /><br /><pre class="prettyprint">if  dt &gt; 0.20:<br />    return task.cont</pre><br /><br />En el if, se revisa si esta comenzando a aumentar el numero de FPS, de pasar eso, hace que la tarea se agrege al gesto una vez más. Agregando estas lineas, queda así el programa.<br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />class Mundo&#40;&#41;:<br />    def __init__&#40;self&#41;:<br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        self.mundo0 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.mundo0.setScale&#40;2,2,2&#41;<br />        self.mundo0.setPos&#40;0, 15, -5&#41;<br />        self.mundo0.setH&#40;90&#41;<br />        self.mundo0.reparentTo&#40;render&#41;<br />        taskMgr.add&#40;self.gira_cilindro, &quot;gira_cilindro&quot;&#41;<br />    def gira_cilindro&#40;self, task&#41;:<br />        dt = globalClock.getDt&#40;&#41;<br />        if  dt &gt; 0.20:<br />            return task.cont<br />        self.mundo0.setR&#40;self.mundo0, -20*dt&#41;<br />        return task.cont<br /><br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br /><br />Agrego una nave al programa:<br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />class Mundo&#40;&#41;:<br />    def __init__&#40;self&#41;:<br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        self.mundo0 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.nave = loader.loadModel&#40;&quot;nave_01.egg&quot;&#41;<br />        <br />        self.nave.setScale&#40;1,1,1&#41;<br />        self.mundo0.setScale&#40;2,2,2&#41;<br />        <br />        self.nave.setPos&#40;0,15,0&#41;<br />        self.mundo0.setPos&#40;0, 15, -5&#41;<br />        <br />        self.nave.setH&#40;180&#41;<br />        self.mundo0.setH&#40;90&#41;<br />        <br />        self.nave.reparentTo&#40;render&#41;<br />        self.mundo0.reparentTo&#40;render&#41;<br />        <br />        taskMgr.add&#40;self.gira_cilindro, &quot;gira_cilindro&quot;&#41;<br /><br />    def gira_cilindro&#40;self, task&#41;:<br />        dt = globalClock.getDt&#40;&#41;<br />        if  dt &gt; 0.20:<br />            return task.cont<br />        self.mundo0.setR&#40;self.mundo0, -20*dt&#41;<br />        return task.cont<br /><br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br /><span style="font-weight: bold">Eventos y entradas de usuario.</span><br /><br />Nuestro programa se ve -considerando lo poco trabajado que esta- bastante bien. Pero no sirve de mucho si no podemos hacer nada mas que ver. Ahora, vamos a trabajar en lo necesario para que la nave añadida se mueva cuando presionemos una tecla. Para eso, agregamos al principio de nuestro archivo la siguiente linea:<br /><br /><blockquote class="uncited"><div> from direct.showbase.DirectObject import DirectObject </div></blockquote><br /><br />DirectObject es una clase interna de panda3D que contiene utilidades para manejar los objetos y el mundo. Entre sus utilidades, se encuentra el método accept().<br /><br />ahora, justo donde comienza nuestra clase Mundo(), heredamos los métodos de DirectObject para que ahora, sean nuestros:<br /><br /><blockquote class="uncited"><div>class Mundo():</div></blockquote><br /><br />pasa a ser <br /><blockquote class="uncited"><div>class Mundo(DirectObject)</div></blockquote><br /><br />La sintaxis del método accept es accept(&quot;nombre_del_evento&quot;, función_a_hacer).<br /><br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />from direct.showbase.DirectObject import DirectObject #importamos DirectObject<br /><br />class Mundo&#40;DirectObject&#41;: #lo heredamos<br />    def __init__&#40;self&#41;:<br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        self.mundo0 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.nave = loader.loadModel&#40;&quot;nave_01.egg&quot;&#41;<br />        <br />        self.nave.setScale&#40;1,1,1&#41;<br />        self.mundo0.setScale&#40;2,2,2&#41;<br />        <br />        self.nave.setPos&#40;0,15,0&#41;<br />        self.mundo0.setPos&#40;0, 15, -5&#41;<br />        <br />        self.nave.setH&#40;180&#41;<br />        self.mundo0.setH&#40;90&#41;<br />        <br />        self.nave.reparentTo&#40;render&#41;<br />        self.mundo0.reparentTo&#40;render&#41;<br />        <br />        self.accept&#40;&quot;h&quot;, self.di_hola&#41; <br />        # en esta parte usamos accept<br />        # el nombre del evento es &quot;h&quot;<br />        # la función es di_hola<br />        <br />        taskMgr.add&#40;self.gira_cilindro, &quot;gira_cilindro&quot;&#41;<br /><br />    def gira_cilindro&#40;self, task&#41;:<br />        dt = globalClock.getDt&#40;&#41;<br />        if  dt &gt; 0.20:<br />            return task.cont<br />        self.mundo0.setR&#40;self.mundo0, -20*dt&#41;<br />        return task.cont<br />    <br />    def di_hola&#40;self&#41;:<br />        print &quot;Hola a todos&quot;<br /><br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br />El programa de arriba contiene la implementación del método accept, en particular, al apretar la letra h, mandara a llamar a la función &quot;di_hola&quot; y realizara su contenido, en este caso, imprimir un &quot;Hola a todos&quot;.<br /><br />La pregunta que debes estar haciendo (o deberías ) es ¿cuales son los nombres de eventos del teclado?.<br /><br />Panda3D contiene un nombre de evento para casi todas las teclas, por ejemplo:<br /><br /><pre class="prettyprint">&quot;a&quot;, &quot;d&quot;, &quot;2&quot;, &quot;{&quot;</pre> ... etc.<br /><br />todos esos, son nombres validos.<br /><br />Los que no lo son:<br /><br /><pre class="prettyprint">&quot;A&quot;, &quot;B&quot;, &quot;*&quot;, &quot;#&quot;</pre><br /><br />De los que no funcionan, lo que tienen en común, es que son en mayúsculas, o el segundo carácter de una tecla. Esto puede parecer bueno en principio, pero en forma personal, es molesto, ya que, en un teclado ingles, el primer carácter es &quot;[&quot;, pero el segundo &quot;{&quot; Así que hay que tener cuidado con eso.<br /><br />El evento para que al dejar de presionar una tecla se llame a la función es agregando un &quot;-up&quot; al nombre:<br /><br /><pre class="prettyprint">&quot;a-up&quot;, &quot;2-up&quot;, &quot;{-up&quot;</pre><br /><br />Y si queremos que el evento ocurra mientras mantenemos presionada la tecla es agregando &quot;-repeat&quot; al nombre:<br /><br /><pre class="prettyprint">&quot;a-repeat&quot;, &quot;2-repeat&quot;, &quot;{-repeat&quot;</pre><br /><br />Los nombres de eventos para teclas que no tienen un carácter imprimible, están por su nombre en ingles:<br /><br /><pre class="prettyprint">&quot;escape&quot;, &quot;f1&quot;, &quot;f2&quot;, &quot;f12&quot;, &quot;print_screen&quot;, &quot;scroll_lock&quot;, &quot;num_lock&quot;, &quot;backspace&quot;, &quot;insert&quot;, &quot;home&quot;, &quot;page_up&quot;, &quot;delete&quot;, &quot;end&quot;, &quot;page_down&quot;, &quot;caps_lock&quot;, &quot;enter&quot;, &quot;space&quot;, &quot;tab&quot;, &quot;pause&quot;, &quot;arrow_left&quot;, &quot;arrow_up&quot;, &quot;arrow_down&quot;, &quot;arrow_right&quot;, &quot;shift&quot;, &quot;lshift&quot;, &quot;rshift&quot;, &quot;control&quot;, &quot;alt&quot;, &quot;lcontrol&quot;, &quot;lalt&quot;, &quot;ralt&quot;, &quot;rcontrol&quot;</pre><br /><br />Algunas teclas especiales (shift, control, alt), pueden llamarse en combinaciones:<br /><br /><pre class="prettyprint">&quot;shift-a&quot;, &quot;control-a&quot;, &quot;shift-control-a&quot;, &quot;shift-control-alt-a&quot;</pre><br /><br />También se pueden gestionar las entradas del ratón con este método. Los nombres de los eventos para el ratón son:<br /><br /><pre class="prettyprint">&quot;mouse1&quot;: clic izquierdo<br />&quot;mouse2&quot;: botón medio <br />&quot;mouse3&quot;: clic derecho</pre><br /><br /><span style="font-weight: bold"><br />Creando un keyMap (mapa de teclas) y extendiendo la funcionalidad de accept()</span><br /><br />Un keyMap (usare el nombre en ingles) es solo un diccionario en el que meteremos las teclas y su valor binario,<br />en este caso:<br /><br /><blockquote class="uncited"><div>self.keyMap = {&quot;a&quot;:False, &quot;s&quot;:False, &quot;d&quot;:False, &quot;w&quot;:False}</div></blockquote><br /><br />Comente que extenderíamos la funcionalidad de accept. Bien, accept no solo recibe como argumentos el nombre del evento y la función a llamar, también, puede tomar y en su momento pasar los argumentos de la función a llamar. ¿Como?.<br /><br />accept(&quot;nombre_evento&quot;, función, [lista,de,argumentos,a,función])<br /><br />Esto nos servirá para hacer que nuestro modelo se mueva.<br /><br />En donde llamábamos a accept, lo remplazamos por lo siguiente:<br /><br /><pre class="prettyprint">self.keyMap = {&quot;a&quot;:False, &quot;s&quot;:False, &quot;d&quot;:False, &quot;w&quot;:False}<br />self.accept&#40;&quot;a&quot;, self.di_tecla, [&quot;a&quot;,True]&#41;<br />self.accept&#40;&quot;s&quot;, self.di_tecla, [&quot;s&quot;,True]&#41;<br />self.accept&#40;&quot;d&quot;, self.di_tecla, [&quot;d&quot;,True]&#41;<br />self.accept&#40;&quot;w&quot;, self.di_tecla, [&quot;w&quot;,True]&#41;<br />self.accept&#40;&quot;a-up&quot;, self.di_tecla, [&quot;a&quot;,False]&#41;<br />self.accept&#40;&quot;s-up&quot;, self.di_tecla, [&quot;s&quot;,False]&#41;<br />self.accept&#40;&quot;d-up&quot;, self.di_tecla, [&quot;d&quot;,False]&#41;<br />self.accept&#40;&quot;w-up&quot;, self.di_tecla, [&quot;w&quot;,False]&#41;</pre><br /><br />También cambiamos la función di_hola por di_tecla:<br /><br /><br /><pre class="prettyprint">def di_tecla&#40;self, tecla, valor&#41;:<br />    self.keyMap[tecla] = valor</pre><br /><br />Ahora, esas partes del código sirve como un interruptor, y no solo eso, renombramos &quot;gira_cilindro&quot; a &quot;actualiza&quot; y le agregamos las siguientes lineas:<br /><br /><pre class="prettyprint">if&#40;self.keyMap[&quot;w&quot;] == True&#41;:<br />    self.nave.setY&#40;self.nave, -10 * dt&#41;<br />if&#40;self.keyMap[&quot;d&quot;] == True&#41;:<br />    self.nave.setX&#40;self.nave, -5 * dt&#41;<br />if&#40;self.keyMap[&quot;a&quot;] == True&#41;:<br />    self.nave.setX&#40;self.nave, 5 * dt&#41;<br />if&#40;self.keyMap[&quot;s&quot;] == True&#41;:<br />    self.nave.setY&#40;self.nave, 10 * dt&#41;</pre><br /><br />Estas ultimas lineas realizan la magia de mover la nave.<br /><br />Nuestro programa queda así:<br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />from direct.showbase.DirectObject import DirectObject #importamos DirectObject<br /><br />class Mundo&#40;DirectObject&#41;:<br />    def __init__&#40;self&#41;:<br />    <br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        self.mundo0 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.nave = loader.loadModel&#40;&quot;nave_01.egg&quot;&#41;<br />        <br />        self.nave.setScale&#40;1,1,1&#41;<br />        self.mundo0.setScale&#40;2,2,2&#41;<br />        <br />        self.nave.setPos&#40;0,15,0&#41;<br />        self.mundo0.setPos&#40;0, 15, -5&#41;<br />        <br />        self.nave.setH&#40;180&#41;<br />        self.mundo0.setH&#40;90&#41;<br />        <br />        self.nave.reparentTo&#40;render&#41;<br />        self.mundo0.reparentTo&#40;render&#41;<br />        <br />        base.camera.reparentTo&#40;self.nave&#41;<br />        base.camera.setY&#40;base.camera, -5&#41;<br /><br />        <br />        self.keyMap = {&quot;a&quot;:False, &quot;s&quot;:False, &quot;d&quot;:False, &quot;w&quot;:False}<br />        self.accept&#40;&quot;a&quot;, self.di_tecla, [&quot;a&quot;,True]&#41;<br />        self.accept&#40;&quot;s&quot;, self.di_tecla, [&quot;s&quot;,True]&#41;<br />        self.accept&#40;&quot;d&quot;, self.di_tecla, [&quot;d&quot;,True]&#41;<br />        self.accept&#40;&quot;w&quot;, self.di_tecla, [&quot;w&quot;,True]&#41;<br />        self.accept&#40;&quot;a-up&quot;, self.di_tecla, [&quot;a&quot;,False]&#41;<br />        self.accept&#40;&quot;s-up&quot;, self.di_tecla, [&quot;s&quot;,False]&#41;<br />        self.accept&#40;&quot;d-up&quot;, self.di_tecla, [&quot;d&quot;,False]&#41;<br />        self.accept&#40;&quot;w-up&quot;, self.di_tecla, [&quot;w&quot;,False]&#41;<br />        <br />        #no olviden cambiar el nombre del gestor de tareas<br />        taskMgr.add&#40;self.actualiza, &quot;actualiza&quot;&#41; <br /><br />    def actualiza&#40;self, task&#41;:<br />        dt = globalClock.getDt&#40;&#41;<br />        if  dt &gt; 0.20:<br />            return task.cont<br />        self.mundo0.setR&#40;self.mundo0, -20*dt&#41;<br />        base.camera.reparentTo&#40;self.nave&#41;<br />        base.camera.setY&#40;base.camera, -5&#41;<br />        if&#40;self.keyMap[&quot;w&quot;] == True&#41;:<br />            self.nave.setY&#40;self.nave, -10 * dt&#41;<br />        if&#40;self.keyMap[&quot;d&quot;] == True&#41;:<br />            self.nave.setX&#40;self.nave, -5 * dt&#41;<br />        if&#40;self.keyMap[&quot;a&quot;] == True&#41;:<br />            self.nave.setX&#40;self.nave, 5 * dt&#41;<br />        if&#40;self.keyMap[&quot;s&quot;] == True&#41;:<br />            self.nave.setY&#40;self.nave, 10 * dt&#41;<br />        return task.cont<br />    <br />    def di_tecla&#40;self, tecla, valor&#41;:<br />        self.keyMap[tecla] = valor<br /><br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br />Haciendo que la cámara nos siga:<br /><br /><br />Para esto, hay que desactivar todos los métodos relacionados por default con el ratón. para eso, agregamos en __init__ la siguiente linea:<br /><br /><blockquote class="uncited"><div> base.disableMouse() </div></blockquote><br /><br />ahora, en nuestro método actualiza, debajo de donde se revisa el estado de las teclas, ponemos esto:<br /><br /><br /><pre class="prettyprint">if&#40;base.mouseWatcherNode.hasMouse&#40;&#41; == True&#41;:<br />    mpos = base.mouseWatcherNode.getMouse&#40;&#41;<br />    base.camera.setP&#40;mpos.getY&#40;&#41; * 30&#41;<br />    base.camera.setH&#40;mpos.getX&#40;&#41; * -30&#41;</pre><br /><br />Si, se ve un poco extraño, lo que hace el programa es que la cámara gira basada en la posición del ratón en la ventana. Para ser específicos, la cantidad que gira, es un porcentaje de 30° de acuerdo con que tan lejos este el ratón del centro de la ventana.<br /><br />El código luce así:<br /><br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />from direct.showbase.DirectObject import DirectObject #importamos DirectObject<br /><br />class Mundo&#40;DirectObject&#41;:<br />    def __init__&#40;self&#41;:<br />        base.disableMouse&#40;&#41; #desactivamos las acciones por defecto del raton <br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        self.mundo0 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.nave = loader.loadModel&#40;&quot;nave_01.egg&quot;&#41;<br />        <br />        self.nave.setScale&#40;1,1,1&#41;<br />        self.mundo0.setScale&#40;2,2,2&#41;<br />        <br />        self.nave.setPos&#40;0,15,0&#41;<br />        self.mundo0.setPos&#40;0, 15, -5&#41;<br />        <br />        self.nave.setH&#40;180&#41;<br />        self.mundo0.setH&#40;90&#41;<br />        <br />        self.nave.reparentTo&#40;render&#41;<br />        self.mundo0.reparentTo&#40;render&#41;<br />        <br />        self.keyMap = {&quot;a&quot;:False, &quot;s&quot;:False, &quot;d&quot;:False, &quot;w&quot;:False}<br />        self.accept&#40;&quot;a&quot;, self.di_tecla, [&quot;a&quot;,True]&#41;<br />        self.accept&#40;&quot;s&quot;, self.di_tecla, [&quot;s&quot;,True]&#41;<br />        self.accept&#40;&quot;d&quot;, self.di_tecla, [&quot;d&quot;,True]&#41;<br />        self.accept&#40;&quot;w&quot;, self.di_tecla, [&quot;w&quot;,True]&#41;<br />        self.accept&#40;&quot;a-up&quot;, self.di_tecla, [&quot;a&quot;,False]&#41;<br />        self.accept&#40;&quot;s-up&quot;, self.di_tecla, [&quot;s&quot;,False]&#41;<br />        self.accept&#40;&quot;d-up&quot;, self.di_tecla, [&quot;d&quot;,False]&#41;<br />        self.accept&#40;&quot;w-up&quot;, self.di_tecla, [&quot;w&quot;,False]&#41;<br />        <br />        #no olviden cambiar el nombre del gestor de tareas<br />        taskMgr.add&#40;self.actualiza, &quot;actualiza&quot;&#41; <br /><br />    def actualiza&#40;self, task&#41;:<br />        dt = globalClock.getDt&#40;&#41;<br />        if  dt &gt; 0.20:<br />            return task.cont<br />        self.mundo0.setR&#40;self.mundo0, -20*dt&#41;<br />        if&#40;self.keyMap[&quot;w&quot;] == True&#41;:<br />            self.nave.setY&#40;self.nave, -10 * dt&#41;<br />        if&#40;self.keyMap[&quot;d&quot;] == True&#41;:<br />            self.nave.setX&#40;self.nave, -20 * dt&#41;<br />            self.nave.setH&#40;self.nave, -10 * dt&#41;<br />        if&#40;self.keyMap[&quot;a&quot;] == True&#41;:<br />            self.nave.setX&#40;self.nave, 20 * dt&#41;<br />            self.nave.setH&#40;self.nave, 10 * dt&#41;<br />        if&#40;self.keyMap[&quot;s&quot;] == True&#41;:<br />            self.nave.setY&#40;self.nave, 20 * dt&#41;<br />        <br />        #aqui hacemos que la camara siga al raton<br />        if&#40;base.mouseWatcherNode.hasMouse&#40;&#41; == True&#41;:<br />            mpos = base.mouseWatcherNode.getMouse&#40;&#41;<br />            base.camera.setP&#40;mpos.getY&#40;&#41; * 30&#41;<br />            base.camera.setH&#40;mpos.getX&#40;&#41; * -30&#41;<br />        return task.cont<br />    <br />    def di_tecla&#40;self, tecla, valor&#41;:<br />        self.keyMap[tecla] = valor<br /><br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br />Para seguirlo, hay que pensar en que tiene que ir atrás de el (para este ejemplo), en ese caso, su posición es menor. En el siguiente ejemplo, se modifica el programa.<br /><br /><pre class="prettyprint">import direct.directbase.DirectStart<br />from direct.showbase.DirectObject import DirectObject<br /><br />class Mundo&#40;DirectObject&#41;:<br />    def __init__&#40;self&#41;:<br />        base.disableMouse&#40;&#41; #desactivamos las acciones por defecto del raton <br />        base.setBackgroundColor&#40;0,0,0&#41;<br />        self.mundo0 = loader.loadModel&#40;&quot;cilindro.egg&quot;&#41;<br />        self.nave = loader.loadModel&#40;&quot;nave_01.egg&quot;&#41;<br />        <br />        self.nave.setScale&#40;1,1,1&#41;<br />        self.mundo0.setScale&#40;2,2,2&#41;<br />        <br />        self.nave.setPos&#40;0,15,0&#41;<br />        self.mundo0.setPos&#40;0, 15, -5&#41;<br />        <br />        self.nave.setH&#40;180&#41;<br />        self.mundo0.setH&#40;90&#41;<br />        <br />        self.nave.reparentTo&#40;render&#41;<br />        self.mundo0.reparentTo&#40;render&#41;<br />        <br />        self.keyMap = {&quot;a&quot;:False, &quot;s&quot;:False, &quot;d&quot;:False, &quot;w&quot;:False}<br />        self.accept&#40;&quot;a&quot;, self.di_tecla, [&quot;a&quot;,True]&#41;<br />        self.accept&#40;&quot;s&quot;, self.di_tecla, [&quot;s&quot;,True]&#41;<br />        self.accept&#40;&quot;d&quot;, self.di_tecla, [&quot;d&quot;,True]&#41;<br />        self.accept&#40;&quot;w&quot;, self.di_tecla, [&quot;w&quot;,True]&#41;<br />        self.accept&#40;&quot;a-up&quot;, self.di_tecla, [&quot;a&quot;,False]&#41;<br />        self.accept&#40;&quot;s-up&quot;, self.di_tecla, [&quot;s&quot;,False]&#41;<br />        self.accept&#40;&quot;d-up&quot;, self.di_tecla, [&quot;d&quot;,False]&#41;<br />        self.accept&#40;&quot;w-up&quot;, self.di_tecla, [&quot;w&quot;,False]&#41;<br />        <br />        #no olviden cambiar el nombre del gestor de tareas<br />        taskMgr.add&#40;self.actualiza, &quot;actualiza&quot;&#41; <br /><br />    def actualiza&#40;self, task&#41;:<br />        dt = globalClock.getDt&#40;&#41;<br />        if  dt &gt; 0.20:<br />            return task.cont<br />        self.mundo0.setR&#40;self.mundo0, -20*dt&#41;<br />        if&#40;self.keyMap[&quot;w&quot;] == True&#41;:<br />            self.nave.setY&#40;self.nave, -30 * dt&#41;<br />        if&#40;self.keyMap[&quot;d&quot;] == True&#41;:<br />            self.nave.setH&#40;self.nave, -20 * dt&#41;<br />        if&#40;self.keyMap[&quot;a&quot;] == True&#41;:<br />            self.nave.setH&#40;self.nave, 45 * dt&#41;#ahora, nuestra nave gira<br />        if&#40;self.keyMap[&quot;s&quot;] == True&#41;:<br />            self.nave.setY&#40;self.nave, 45 * dt&#41;#tambien aqui...<br />        <br />        #tomamos la posicion de la nave<br />        pos =  self.nave.getPos&#40;&#41;<br />        #hacemos que la camara este detras de la nave...<br />        base.camera.setPos&#40;pos[0],pos[1]-15,pos[2]+2&#41;<br />        #aqui hacemos que la camara siga al raton<br />        if&#40;base.mouseWatcherNode.hasMouse&#40;&#41; == True&#41;:<br />            mpos = base.mouseWatcherNode.getMouse&#40;&#41;<br />            #y que cabie la altitud de nuestra nave conforme movemos el raton.<br />            self.nave.setP&#40;mpos.getY&#40;&#41; * -30&#41;<br /><br /><br />        return task.cont<br />    <br />    def di_tecla&#40;self, tecla, valor&#41;:<br />        self.keyMap[tecla] = valor<br /><br />mundo = Mundo&#40;&#41;<br />run&#40;&#41;</pre><br /><br />Bueno, eso a sido todo, aquí adjunto el programa final, con los modelos utilizados. Recuerden, dudas al final.<br /><br />(Este es el primer tutorial de otros que vienen <img src="images/smilies/icon_wink.gif" alt=";)" title="Wink" />)</div>

			<div id="sig6316" class="signature"><span style="font-size: 80%; line-height: 116%;">Vi veri universum vivus vici</span></div>

		</div>

		
			<dl class="postprofile" id="profile6316">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2345.html"><img src="download/2345-avatar=2345_1341026901.png" width="80" height="80" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=2345.html">Barajas</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 209</dd><dd><strong>Registrado:</strong> Mar Nov 16, 2010 12:06 am</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />


<div class="topic-actions">
	<div class="buttons">
	
		<div class="reply-icon"><a href="posting.php-mode=reply&amp;f=20&amp;t=1370.html" title="Publicar una respuesta"><span></span>Publicar una respuesta</a></div>
	
	</div>

	
		<div class="pagination">
			1 mensaje
			 &bull; Página <strong>1</strong> de <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="viewforum.php-f=20.html" class="left-box left" accesskey="r">Volver a 3D</a></p>

	<form method="post" id="jumpbox" action="viewforum.php.html" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Saltar a:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Seleccione un Foro</option>
			<option value="-1">------------------</option>
				<option value="15">Proyecto Losersjuegos</option>
			
				<option value="1">&nbsp; &nbsp;Planificación y eventos</option>
			
				<option value="14">&nbsp; &nbsp;Asadetris</option>
			
				<option value="22">Pilas Engine</option>
			
				<option value="23">&nbsp; &nbsp;Anuncios de los desarrolladores</option>
			
				<option value="24">&nbsp; &nbsp;Consultas, problemas o bugs.</option>
			
				<option value="25">&nbsp; &nbsp;Proyectos usando pilas</option>
			
				<option value="26">&nbsp; &nbsp;Sugerencias e ideas</option>
			
				<option value="28">&nbsp; &nbsp;General</option>
			
				<option value="16">Sugerencias, proyectos e ideas</option>
			
				<option value="2">&nbsp; &nbsp;Artículos, traducciones y documentación</option>
			
				<option value="3">&nbsp; &nbsp;Ejemplos</option>
			
				<option value="4">&nbsp; &nbsp;Videojuegos</option>
			
				<option value="12">&nbsp; &nbsp;Propuestas de desarrollo y concursos</option>
			
				<option value="13">&nbsp; &nbsp;Inspiración y otras ideas interesantes</option>
			
				<option value="5">&nbsp; &nbsp;Otros</option>
			
				<option value="17">Consultas</option>
			
				<option value="6">&nbsp; &nbsp;Sobre las bibliotecas multimedia</option>
			
				<option value="7">&nbsp; &nbsp;Instalación de bibliotecas y herramientas</option>
			
				<option value="8">&nbsp; &nbsp;Sobre lenguajes de programación</option>
			
				<option value="9">&nbsp; &nbsp;General</option>
			
				<option value="20" selected="selected">&nbsp; &nbsp;3D</option>
			
				<option value="29">&nbsp; &nbsp;HTML5 y Javascript</option>
			
				<option value="30">&nbsp; &nbsp;Qt y pyqt</option>
			
				<option value="18">Otros</option>
			
				<option value="10">&nbsp; &nbsp;Fuera de tópico</option>
			
				<option value="11">&nbsp; &nbsp;Links interesantes</option>
			
			</select>
			<input type="submit" value="Ir" class="button2" />
		</fieldset>
	</form>


	<h3>¿Quién está conectado?</h3>
	<p>Usuarios navegando por este Foro: No hay usuarios registrados visitando el Foro y 0 invitados</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="index.php.html" accesskey="h">Índice general</a></li>
				
			<li class="rightside"><a href="memberlist.php-mode=leaders.html">El Equipo</a> &bull; <a href="ucp.php-mode=delete_cookies.html">Borrar todas las cookies del Sitio</a> &bull; Todos los horarios son UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>



<div id="pie">

    <ul>
            <li class="contactenos"><a href="../comunidad/contactenos.html">Contáctenos</a></li>
                
                <li class="cc"><a href="http://creativecommons.org/licenses/by-sa/2.5/deed.es">Licencia de uso para el sitio</a></li>

                    <li class="foro"><a href="index.html">Foro de mensajes</a></li>

                        <li class="comunidad"><a href="../comunidad.html">Sobre el grupo ...</a></li>
                    </ul>
                </div>


</div> <!-- borde -->
</div>


<div class="copyright">
Este foro de mensajes funciona gracias al sistema <a href="http://www.phpbb.com/">phpBB</a>
<br/>
Tema visual personalizando por Hugo Ruscitti.
<br/>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
</div>

</body>
</html>