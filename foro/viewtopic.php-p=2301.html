<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="es" xml:lang="es">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="es" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="copyright" content="2000, 2002, 2005, 2007 phpBB Group" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

<title>LosersJuegos &bull; Ver Tema - programacion de sockets con C en GNU/Linux</title>

<link rel="alternate" type="application/atom+xml" title="Feed - LosersJuegos" href="feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Nuevos Temas" href="feed-mode=topics.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Foro - Sobre lenguajes de programación" href="feed-f=8.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Tema - programacion de sockets con C en GNU/Linux" href="feed-f=8&amp;t=512.php" />

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:

	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Introduzca el número de página al que desea saltar:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/; domain=.losersjuegos.com.ar';
	var onload_functions = new Array();
	var onunload_functions = new Array();

	

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<script type="text/javascript" src="styles/prosilver/template/styleswitcher.js"></script>
<script type="text/javascript" src="styles/prosilver/template/forum_fn.js"></script>

<link href="styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="style.php-id=3&amp;lang=en&amp;sid=4ec7bd6b5b400f7171476bb35f8261c6.css" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />




<link href="styles/prosilver/theme/header.css" rel="stylesheet" type="text/css"/>
<link href="styles/prosilver/theme/barrausuario.css" rel="stylesheet" type="text/css"/>
<link href="styles/prosilver/theme/design.css" rel="stylesheet" type="text/css"/>

<link href="styles/prosilver/theme/src/prettify.css" type="text/css" rel="stylesheet" />
<script src="styles/prosilver/theme/src/prettify.js" type="text/javascript"></script>


</head>


<body onload="prettyPrint()" id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
<div id='borde'>

    <div id="cabecera">

        <a href='index.html'><img id='logo1' alt='' src="styles/prosilver/theme/ima_cabecera/logo_1.png" width="286" height="50" name="logo1" /></a>

        <div id="navi">
            <ul>
                <li><a href="../index.html">Web</a></li>
                <li id='actual'><a href="index.html">Foro</a></li>
            </ul>
        </div>

    </div>


<div class='barra_usuario'>
        <ul>
                <li class='regresar'><a href='../index.html'>Regresar a la web</a></li>
                <li class='buscar'><a href="search.php.html">Buscar</a></li>

                
                <li class='registrar'><a href="ucp.php-mode=register.html">Registrarse</a></li>

                <li class='registrar'><a href="ucp.php-mode=login.html">Identificarse</a>
                </li>
                

        </ul>
</div>




	<a name="start_here"></a>
	<div id="page-body">
		<ul style='font-size: 14px' class="linklist">
                    <li class="icon-home"><a href="index.php.html" accesskey="h">Índice general</a></li>
                    </ul>
<h2><a href="viewtopic.php-f=8&amp;t=512&amp;start=0.html">programacion de sockets con C en GNU/Linux</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">Agrupa todas las consultas sobre los lenguajes de programacion como C, C++, Python, Java ...<br /></div>

<div class="topic-actions">

	<div class="buttons">
	
		<div class="reply-icon"><a href="posting.php-mode=reply&amp;f=8&amp;t=512.html" title="Publicar una respuesta"><span></span>Publicar una respuesta</a></div>
	
	</div>

	
		<div class="search-box">
			<form method="post" id="topic-search" action="search.php-t=512.html">
			<fieldset>
				<input class="inputbox search tiny"  type="text" name="keywords" id="search_keywords" size="20" value="Buscar este tema…" onclick="if(this.value=='Buscar este tema…')this.value='';" onblur="if(this.value=='')this.value='Buscar este tema…';" />
				<input class="button2" type="submit" value="Buscar" />
				<input type="hidden" value="512" name="t" />
				<input type="hidden" value="msgonly" name="sf" />
			</fieldset>
			</form>
		</div>
	
		<div class="pagination">
			7 mensajes
			 &bull; Página <strong>1</strong> de <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p2296" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="#p2296">programacion de sockets con C en GNU/Linux</a></h3>
			<p class="author"><a href="viewtopic.php-p=2296.html#p2296"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=1912.html">lacabra25</a></strong> &raquo; Mar Mar 17, 2009 6:54 pm </p>

			

			<div class="content">Hola, estoi aprendiendo a programar en C sockets, se que GNU/Linux soporta ademas de IPv4 las IPv6 lo que no estoi seguro de como programar el codigo para que pueda funcionar con ambas IP ya que en el ejemplo que he estado biendo explican como usarlo con IPv4.
<br />
<br />El codigo que tengo por el momento es:
<br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>#include &lt;sys/types.h&gt;<br />#include &lt;sys/socket.h&gt;<br />#include &lt;sys/un.h&gt;<br />#include &lt;unistd.h&gt;<br />#include &lt;errno.h&gt;<br />#include &lt;stdio.h&gt;<br />#include &lt;string.h&gt;<br />#include &lt;netinet/in.h&gt;<br />#include &lt;stdio.h&gt;<br />#include &lt;stdlib.h&gt;<br />#include &lt;netdb.h&gt;<br />#include &lt;arpa/inet.h&gt;<br /><br />int conectar&#40;char *direccion, unsigned short int puerto&#41;&#123;<br />register int r=0;<br />int descriptor;<br />struct in_addr direccion_internet;<br />struct sockaddr_in direccion_socket;<br />/*pasando la cadena con la IP con los bytes separados por puntos a un numero de 32 bits*/<br />direccion_internet.s_addr= inet_addr&#40;direccion&#41;;<br />if&#40;direccion_internet.s_addr == -1&#41;&#123;<br />&nbsp; &nbsp;r= 1;<br />&#125;else&#123;<br />&nbsp; &nbsp;/*rellenando la estructura de la direccion de socket*/<br />&nbsp; &nbsp;direccion_socket.sin_family = AF_INET;<br />&nbsp; &nbsp;direccion_socket.sin_port = htons&#40;puerto&#41;;<br />&nbsp; &nbsp;direccion_socket.sin_addr.s_addr= direccion_internet.s_addr;<br />&nbsp; &nbsp;memset&#40;&amp;&#40;direccion_socket.sin_zero&#41;, '\0', 8&#41;;<br />&nbsp; &nbsp;/*obteniendo el descriptor de fichero*/<br />&nbsp; &nbsp;descriptor= socket&#40;AF_INET, SOCK_STREAM, 0&#41;;<br />&nbsp; &nbsp;if&#40;descriptor == -1&#41;&#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;r= 2;<br />&nbsp; &nbsp;&#125;else&#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;if&#40;connect&#40;descriptor, &#40;struct sockaddr *&#41;&amp;direccion_socket, sizeof&#40;struct sockaddr&#41;&#41; == -1&#41;&#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;r= 3;<br />&nbsp; &nbsp;&nbsp; &nbsp;&#125;<br />&nbsp; &nbsp;&#125;<br />&#125;<br />if&#40;r != 0&#41;&#123;<br />&nbsp; &nbsp;return -1;<br />&#125;else&#123;<br />&nbsp; &nbsp;return descriptor;<br />&#125;<br />&#125;</code></dd></dl>
<br />
<br />Ya he probado la funcion pasandole como direccion la IP de google y no da ningun error, por lo que supongo que conecta bien, lo que no se si al pasarle una IPv6 funcionara bien igualmente o si debo cambiar algo al codigo para poder manejar ambas IP.
<br />
<br />Si sabeis de algun manual o tutorial sobre los sockets en C para IPv6 lo agradeceria (y si es para IPv6 e IPv4 lo agradeceria más aun).</div>

			<div id="sig2296" class="signature">Esta cuenta ahora a pasado a la cuenta jhg</div>

		</div>

		
			<dl class="postprofile" id="profile2296">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=1912.html"><img src="download/1912-avatar=1912.png" width="75" height="75" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=1912.html">lacabra25</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 222</dd><dd><strong>Registrado:</strong> Mié Abr 02, 2008 9:45 pm</dd><dd><strong>Ubicación:</strong> Tenerife (España)</dd>
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://www.snl.ya.st" title="WWW: http://www.snl.ya.st"><span>Sitio web</span></a></li>
				</ul>
			</dd>
		

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2301" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p2301"></a></h3>
			<p class="author"><a href="#p2301"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2057.html">Juanxo</a></strong> &raquo; Mar Mar 17, 2009 11:42 pm </p>

			

			<div class="content">No se si habrá libros de lo que tu buscas( espero que si), pero estoy seguro de que habra montones de libros( y muchos de ellos de informatica en una de las siguientes paginas(si esto gusta podria ponerse en tema aparte xD:
<br />
<br /><a href="http://www.knowfree.net" class="postlink">knowfree</a>
<br /><a href="http://www.mailxmail.com" class="postlink">mailxmail</a>
<br /><a href="http://www.librosdeluz.net" class="postlink">librosdeluz</a>
<br /><a href="http://www.free-ebooks.net" class="postlink">free-ebooks</a>
<br /><a href="http://manybooks.net/categories/COM/1" class="postlink">manybooks</a>
<br /><a href="http://www.freeebooks.info/" class="postlink">www.freeebooks.info</a>
<br />
<br />Estos son unos pocos(google+&quot;free ebook&quot;=esto(mas o menos))
<br />Ire editando a medida que encuentre nuevos(le he cogido el gusto a esto del conocimiento de &quot;libre&quot; difusion.
<br />
<br />Sobra mencionar que la mayoria(si no todos) estan en ingles, pero es que este es uno de los requerimientos minimos e indispensables en el mundo de los ordenadores e internet xD
<br />
<br />Por cierto, tambien existe otra comunidad de habla hispana d desarrollo de juegos en la que quizas puedas encontrar algo(<!-- w --><a class="postlink" href="http://www.vjuegos.org">www.vjuegos.org</a><!-- w -->)</div>

			

		</div>

		
			<dl class="postprofile" id="profile2301">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2057.html"><img src="download/2057-avatar=2057_1281526741.png" width="80" height="75" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=2057.html">Juanxo</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 437</dd><dd><strong>Registrado:</strong> Sab Ene 31, 2009 2:34 am</dd><dd><strong>Ubicación:</strong> Madrid(España)</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2305" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p2305"></a></h3>
			<p class="author"><a href="viewtopic.php-p=2305.html#p2305"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2078.html">Adri</a></strong> &raquo; Mié Mar 18, 2009 11:03 am </p>

			

			<div class="content">Encontré <a href="http://ou800doc.caldera.com/en/SDK_netapi/sockC.TheIPv6sockaddrstructure.html" class="postlink">http://ou800doc.caldera.com/en/SDK_netapi/sockC.TheIPv6sockaddrstructure.html</a> por ahi buscando... espero que te sirva (con utilizar estas estructuras en vez de in_addr y sockaddr_in debería funcionar creo ^^ ).
<br />
<br />No entiendo muy bien que hace tu código... cuando haces un connect a una direccion y un puerto tiene que haber un socket escuchando y aceptando conexiones... google tiene un puerto escuchando?? :S
<br />
<br />Un saludo</div>

			

		</div>

		
			<dl class="postprofile" id="profile2305">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2078.html">Adri</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 4</dd><dd><strong>Registrado:</strong> Jue Mar 05, 2009 2:42 pm</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2307" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p2307"></a></h3>
			<p class="author"><a href="viewtopic.php-p=2307.html#p2307"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=1912.html">lacabra25</a></strong> &raquo; Mié Mar 18, 2009 3:39 pm </p>

			

			<div class="content"><blockquote><div><cite>Adri escribió:</cite>Encontré <a href="http://ou800doc.caldera.com/en/SDK_netapi/sockC.TheIPv6sockaddrstructure.html" class="postlink">http://ou800doc.caldera.com/en/SDK_netapi/sockC.TheIPv6sockaddrstructure.html</a> por ahi buscando... </div></blockquote><br />Muchas gracias, acabdo de cargarlo en otra pestaña para mirarlo.<br /><blockquote><div><cite>Adri escribió:</cite>espero que te sirva </div></blockquote><br />Por lo que he estado mirando hasta ahora la pagina (por el momento solo por encima) creo que si me sirve, pero como no conozco un servidor de internet que trabaje ya con IPv6 para probar a conectarme y como aun no he escrito funciones con las que poder hacer un servidor sencillo no puedo estar seguro del resultado<br /><blockquote><div><cite>Adri escribió:</cite>No entiendo muy bien que hace tu código... </div></blockquote><br />por el momento no son mas que 4 funciones para trabajar con sockets IPv4 y otras 4 para trabajar con sockets IPv6 pero pretendo crear una libreria para el manejo de sockets para IPv6 e IPv4 con funciones suficientes para programar un cliente o un servidor indistintamente sin tener que preocuparse por los sockets y (en el caso de los servidores) por bloqueos y atencion a varios clientes y que de ademas facilidad para empaquetar informacion y enviarla sea del tipo que sea. Con esto pretendo hacer una libreria para hacer juegos en red que sea facil de usar y lo suficiente potente como para que funcione bien en los juegos, antes de comenzar con esto ya sabia de la existencia de SDL_net y he probado esta libreria anteriormente pero aunque pueda facilitar un poco mas la programacion de los sockets y la portabilidad que programarlos tal y como lo estoi haciendo yo ahora hay algunos aspectos que creia que podrian incluir la libreria y no sabia si SDL_net ya estaba preparada para IPv6; por ejemplo para montar un servidor con SDL_net la cuestion de atender a varios servidores debe ser implementada con las funciones que ofrece la biblioteca SDL_net y SDL; otra cosa que no me convencia es que estuviera tan ligada a SDL (en un servidor para partidas en red de un determinado juego no interesa para nada tener SDL ya que no vas a necesitar ni los graficos ni el sonido, como mucho los eventos pero nada mas (y segun creo para usar SDL_net hay que compilar tambien con SDL). Ya que ha salido este tema os informo de que la libreria que estoi programando estara bajo la licencia LGPL y que intentare (una vez la acabe para GNU/Linux) que sea portable por compilacion condicionada.<br /><blockquote><div><cite>Adri escribió:</cite>cuando haces un connect a una direccion y un puerto tiene que haber un socket escuchando y aceptando conexiones... google tiene un puerto escuchando?? :S</div></blockquote>
<br />Claro que si, cuando pones en el navegador <!-- w --><a class="postlink" href="http://www.google.es">www.google.es</a><!-- w --> eso es traducido a una IP (el servicio de DNS) y el navegador se conecta a la IP en el puerto 80 y comienza a &quot;entablar una conversacion&quot; con el servidor usando el protocolo HTTP, se pone a la escucha y el servidor le responde (tambien en HTTP) enviandole una respuesta acorde a lo que pidiera el navegador. Normalmente despues se cierra la conexion por como ya ha recibido la pagina y la ha cargado en pantalla. Por el momento creo que tengo algunos problemas con la funcion de DNS para pasar un dominio a su correspondiente direccion IP, este problema lo estoi teniendo en IPv4, ya que cada vez que ejecuto el programa me da que la direccion de google es diferente (lo que no se si podria ser por que google usara un servidor maestro y varios esclavos y por eso me diese diferentes IP en cada vez, despues cuando le envio una cabecera HTTP pidiendole la pagina de google aunque no me da error al enviarla no recivo respuesta lo que supongo que sera por que mando una cabecera HTTP mal mas que por la funcion para conectarse y para enviar y recibir datos (use una cabecera que vi en wikipedia a ver si me devolvia la pagina, de HTTP se poco y nada).</div>

			<div id="sig2307" class="signature">Esta cuenta ahora a pasado a la cuenta jhg</div>

		</div>

		
			<dl class="postprofile" id="profile2307">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=1912.html"><img src="download/1912-avatar=1912.png" width="75" height="75" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=1912.html">lacabra25</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 222</dd><dd><strong>Registrado:</strong> Mié Abr 02, 2008 9:45 pm</dd><dd><strong>Ubicación:</strong> Tenerife (España)</dd>
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://www.snl.ya.st" title="WWW: http://www.snl.ya.st"><span>Sitio web</span></a></li>
				</ul>
			</dd>
		

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2308" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p2308"></a></h3>
			<p class="author"><a href="viewtopic.php-p=2308.html#p2308"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2057.html">Juanxo</a></strong> &raquo; Mié Mar 18, 2009 4:32 pm </p>

			

			<div class="content">A mi siempre me sale la misma cuando hago un ping a la direccion <!-- w --><a class="postlink" href="http://www.google.es">www.google.es</a><!-- w --> (209.85.229.99).
<br />
<br />Puede ser que a lo mejor obtengas la ip publica(o algo por ese estilo), que cambia cada vez que se conecta??</div>

			

		</div>

		
			<dl class="postprofile" id="profile2308">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2057.html"><img src="download/2057-avatar=2057_1281526741.png" width="80" height="75" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=2057.html">Juanxo</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 437</dd><dd><strong>Registrado:</strong> Sab Ene 31, 2009 2:34 am</dd><dd><strong>Ubicación:</strong> Madrid(España)</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2310" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p2310"></a></h3>
			<p class="author"><a href="viewtopic.php-p=2310.html#p2310"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=1912.html">lacabra25</a></strong> &raquo; Mié Mar 18, 2009 5:00 pm </p>

			

			<div class="content"><blockquote><div><cite>Juanxo escribió:</cite>A mi siempre me sale la misma cuando hago un ping a la direccion <!-- w --><a class="postlink" href="http://www.google.es">www.google.es</a><!-- w --> (209.85.229.99).<br /><br />Puede ser que a lo mejor obtengas la ip publica(o algo por ese estilo), que cambia cada vez que se conecta??</div></blockquote>
<br />
<br />no, no creo, si fuese asi a ti tambien te deberia de cambiar al hacer ping ya que supuestamente el ping usa las mismas funciones que tengo yo que usar para trabajar con los sockets ya que esta en una libreria del sistema (y seguro que el ping las usa mejor que yo jeje). Entonces el problema lo debo de tener en la funcion del DNS.
<br />
<br />Os dejo el codigo de la funcion de DNS (tanto la que tengo para IPv4 como para IPv6, pego las dos):
<br />
<br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>int DNS_IPv4&#40;char *direccion, char *host&#41;&#123;<br />register int r=0;<br />struct hostent *h;<br />h=gethostbyname&#40;host&#41;<br />if&#40;h == NULL&#41;&#123;<br />&nbsp; &nbsp;r= 1;<br />&#125;else&#123;<br />&nbsp; &nbsp;if&#40;strcpy&#40;direccion, inet_ntoa&#40;*&#40;&#40;struct in_addr *&#41;h-&gt;h_addr&#41;&#41;&#41; == NULL&#41;&#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;r= 2;<br />&nbsp; &nbsp;&#125;<br />&#125;<br />return r;<br />&#125;<br /><br />int DNS_IPv6&#40;char *direccion, char *host, char *servicio, unsigned long int longitud_d, unsigned long int longitud_s&#41;&#123;<br />register int r=0;<br />int n;<br />struct sockaddr_in6 direccion_socket;<br />struct in6_addr direccion_internet;<br />r= getnameinfo&#40;&#40;struct sockaddr *&#41;&amp;direccion_socket, sizeof&#40;struct sockaddr_in6&#41;, host, strlen&#40;host&#41;, servicio, longitud_s, NI_NUMERICHOST&#41;;<br />direccion_internet= direccion_socket.sin6_addr;<br />if&#40;r == 0&#41;&#123;<br />&nbsp; &nbsp;inet_ntop&#40;AF_INET6, &amp;direccion_internet, direccion, longitud_d&#41;;<br />&#125;<br />return r;<br />&#125;</code></dd></dl>
<br />
<br />La funcion DNS_IPv6 seguramente es la que mas errores puede tener, pero la DNS_IPv4 tiene algo mal pero no entiendo el que y esta funcion (DNS_IPv4) la escribi con la informacion que encontre en <a href="http://www.arrakis.es/~dmrq/beej/" class="postlink">http://www.arrakis.es/~dmrq/beej/</a> pero hace tiempo que no la actualiza el autor.</div>

			<div id="sig2310" class="signature">Esta cuenta ahora a pasado a la cuenta jhg</div>

		</div>

		
			<dl class="postprofile" id="profile2310">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=1912.html"><img src="download/1912-avatar=1912.png" width="75" height="75" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=1912.html">lacabra25</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 222</dd><dd><strong>Registrado:</strong> Mié Abr 02, 2008 9:45 pm</dd><dd><strong>Ubicación:</strong> Tenerife (España)</dd>
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://www.snl.ya.st" title="WWW: http://www.snl.ya.st"><span>Sitio web</span></a></li>
				</ul>
			</dd>
		

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2313" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p2313"></a></h3>
			<p class="author"><a href="viewtopic.php-p=2313.html#p2313"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=1912.html">lacabra25</a></strong> &raquo; Jue Mar 19, 2009 4:23 pm </p>

			

			<div class="content">¡Primera prueba del codigo con buenos resultados!
<br />Hoy al fin consegui enviar una cabecera HTTP correcta y recibir respuesta. Al enviar la cabecera para pedir la pagina de google recivi esto:
<br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>HTTP/1.1 200 OK<br />Cache-Control: private, max-age=0<br />Date: Thu, 19 Mar 2009 16:02:18 GMT<br />Expires: -1<br />Content-Type: text/html; charset=ISO-8859-1<br />Server: gws<br />Transfer-Encoding: chunked<br /><br />197a<br />&lt;html&gt;&lt;head&gt;&lt;meta&gt;&lt;title&gt;Google&lt;/title&gt;&lt;script&gt;window.google=&#123;kEI:&quot;imzCSYChHoW7jAfniuWhCw&quot;,kEXPI:&quot;17259&quot;,kHL:&quot;en&quot;&#125;;<br />window.google.sn=&quot;webhp&quot;;window.google.timers=&#123;load:&#123;t:&#123;start:&#40;new Date&#41;.getTime&#40;&#41;&#125;&#125;&#125;;try&#123;window.google.pt=window.gtbExternal&amp;&amp;window.gtbExternal.pageT&#40;&#41;||window.external&amp;&amp;window.external.pageT&#125;catch&#40;b&#41;&#123;&#125;<br />window.google.jsrt_kill=1;<br />var _gjwl=location;function _gjuc&#40;&#41;&#123;var a=_gjwl.hash;if&#40;a.indexOf&#40;&quot;&amp;q=&quot;&#41;&gt;0||a.indexOf&#40;&quot;#q=&quot;&#41;&gt;=0&#41;&#123;a=a.substring&#40;1&#41;;if&#40;a.indexOf&#40;&quot;#&quot;&#41;==-1&#41;&#123;for&#40;var c=0;c&lt;a.length;&#41;&#123;var d=c;if&#40;a.charAt&#40;d&#41;==&quot;&amp;&quot;&#41;++d;var b=a.indexOf&#40;&quot;&amp;&quot;,d&#41;;if&#40;b==-1&#41;b=a.length;var e=a.substring&#40;d,b&#41;;if&#40;e.indexOf&#40;&quot;fp=&quot;&#41;==0&#41;&#123;a=a.substring&#40;0,c&#41;+a.substring&#40;b,a.length&#41;;b=c&#125;else if&#40;e==&quot;cad=h&quot;&#41;return 0;c=b&#125;_gjwl.href=&quot;search?&quot;+a+&quot;&amp;cad=h&quot;;return 1&#125;&#125;return 0&#125;function _gjp&#40;&#41;&#123;!&#40;window._gjwl.hash&amp;&amp;window._gjuc&#40;&#41;&#41;&amp;&amp;setTimeout&#40;_gjp,500&#41;&#125;;<br />window._gjp &amp;&amp; _gjp&#40;&#41;;&lt;/script&gt;&lt;style&gt;body,td,a,p,.h&#123;font-family:arial,sans-serif&#125;.h&#123;color:#36c;font-size:20px&#125;.q&#123;color:#00c&#125;.ts td&#123;padding:0&#125;.ts&#123;border-collapse:collapse&#125;#gbar&#123;height:22px;padding-left:2px&#125;.gbh,.gbd&#123;border-top:1px solid #c9d7f1;font-size:1px&#125;.gbh&#123;height:0;position:absolute;top:24px;width:100%&#125;#gbi,#<br /></code></dd></dl>
<br />Y los que conozcais el XHTML (o el HTML) ya os habreis dado cuenta de que es la pagina de google, por lo que he conseguido conectarme al servidor de google, lo unico que no termino de entender es por que cada vez que ejecuto el programa para probar el codigo me dice que la IP de google es una diferente. Probe a hacer ping a google.es varias veces y en cada vez que ejecuto ping me da tambien una IP distinta por lo que supongo que la funcion que se encarga de transformar el host en una IP debe de estar bien. En cuanto a la funcion de DNS para IPv6 por el momento solo puedo suponer que el servidor de google no esta trabajando con IPv6 por el momento ya que al compilar no recivo errores y la he echo siguiendo distintas referencias que he ido encontrando por la web pero al intentar ver la IPv6 del google el programa me muestra diferentes cosas (al iguar que me aparece cada vez con diferente IPv4) como /&#65409;&#65533;&#65533; y como no se de ningun servidor HTTP que ya este trabajando con IPv6 pues no puedo poner a prueba las funciones para IPv6.
<br />
<br />Os informare segun avance el codigo de la libreria que estoi escribiendo. Ahora que ya se que por lo menos las funciones para IPv4 funcionan puedo continuar programando mas funciones, y ya encontrare la forma de probar las funciones de IPv6, ¿alguien sabe de algun servidor web que trabaje con IPv6?, estoi pensando de hacer una funcion para DNS independiente de si es IPv6 o IPv4 que primero intente obtener la IPv6 y si no lo consigue (por que el servidor trabaje solo con IPv4 y no admita trabajar con IPv6) lo intente con la funcion de IPv4.
<br />
<br />Si sabeis de algun tutorial sobre sockets en C con IPv6 aun estoi interesado para poder comprobar si el codigo que tengo por ahora para IPv6 en principio estaria bien, o si esta mal. Si teneis suugerencias para la libreria son bien recividas, por el momento estoi pensando en lo que ya he comentado de hacer una funcion DNS tanto para IPv6 como para IPv4 y si consiguiese unir las funciones de conectar, desconectar, enviar datos y recivirlos pues tambien estaria bien, añadir funciones para los sockets UDP (por ahora solo tengo las funciones para los sockets TCP) y añadir funciones para poder funcionar como servidor y algo de hilos para atender a varios clientes a la vez y alguna forma de evitar los bloqueos de las funciones que tienen esta caracteristica.
<br />
<br /><span style="font-weight: bold">EDITO:</span>
<br />Hola, ya tengo todas las funciones necesarias para usar sockets TCP/IPv4, TCP/IPv6, UDP/IPv4, UDP/IPv6, DNS IPv4, DNS IPv6 y conjuntos de sockets para no quedarse bloqueado en las funciones de recepcion de datos, ahora estoi intentando añadir sockets raw pero por lo que he estado mirando por diversos resultados de google no me queda del todo claro el trabajo con este tipo de sockets ¿sabeis algo de estos sockets o de algun manual o tutorial?</div>

			<div id="sig2313" class="signature">Esta cuenta ahora a pasado a la cuenta jhg</div>

		</div>

		
			<dl class="postprofile" id="profile2313">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=1912.html"><img src="download/1912-avatar=1912.png" width="75" height="75" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=1912.html">lacabra25</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 222</dd><dd><strong>Registrado:</strong> Mié Abr 02, 2008 9:45 pm</dd><dd><strong>Ubicación:</strong> Tenerife (España)</dd>
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://www.snl.ya.st" title="WWW: http://www.snl.ya.st"><span>Sitio web</span></a></li>
				</ul>
			</dd>
		

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<form id="viewtopic" method="post" action="viewtopic.php-f=8&amp;t=512&amp;start=0.html">

	<fieldset class="display-options" style="margin-top: 0; ">
		
		<label>Mostrar mensajes previos: <select name="st" id="st"><option value="0" selected="selected">Todos los mensajes</option><option value="1">1 día</option><option value="7">7 días</option><option value="14">2 semanas</option><option value="30">1 mes</option><option value="90">3 meses</option><option value="180">6 meses</option><option value="365">1 año</option></select></label>
		<label>Ordenar por <select name="sk" id="sk"><option value="a">Autor</option><option value="t" selected="selected">Fecha publicación</option><option value="s">Asunto</option></select></label> <label><select name="sd" id="sd"><option value="a" selected="selected">Ascendente</option><option value="d">Descendente</option></select> <input type="submit" name="sort" value="Ir" class="button2" /></label>
		
	</fieldset>

	</form>
	<hr />


<div class="topic-actions">
	<div class="buttons">
	
		<div class="reply-icon"><a href="posting.php-mode=reply&amp;f=8&amp;t=512.html" title="Publicar una respuesta"><span></span>Publicar una respuesta</a></div>
	
	</div>

	
		<div class="pagination">
			7 mensajes
			 &bull; Página <strong>1</strong> de <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="viewforum.php-f=8.html" class="left-box left" accesskey="r">Volver a Sobre lenguajes de programación</a></p>

	<form method="post" id="jumpbox" action="viewforum.php.html" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Saltar a:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Seleccione un Foro</option>
			<option value="-1">------------------</option>
				<option value="15">Proyecto Losersjuegos</option>
			
				<option value="1">&nbsp; &nbsp;Planificación y eventos</option>
			
				<option value="14">&nbsp; &nbsp;Asadetris</option>
			
				<option value="22">Pilas Engine</option>
			
				<option value="23">&nbsp; &nbsp;Anuncios de los desarrolladores</option>
			
				<option value="24">&nbsp; &nbsp;Consultas, problemas o bugs.</option>
			
				<option value="25">&nbsp; &nbsp;Proyectos usando pilas</option>
			
				<option value="26">&nbsp; &nbsp;Sugerencias e ideas</option>
			
				<option value="28">&nbsp; &nbsp;General</option>
			
				<option value="16">Sugerencias, proyectos e ideas</option>
			
				<option value="2">&nbsp; &nbsp;Artículos, traducciones y documentación</option>
			
				<option value="3">&nbsp; &nbsp;Ejemplos</option>
			
				<option value="4">&nbsp; &nbsp;Videojuegos</option>
			
				<option value="12">&nbsp; &nbsp;Propuestas de desarrollo y concursos</option>
			
				<option value="13">&nbsp; &nbsp;Inspiración y otras ideas interesantes</option>
			
				<option value="5">&nbsp; &nbsp;Otros</option>
			
				<option value="17">Consultas</option>
			
				<option value="6">&nbsp; &nbsp;Sobre las bibliotecas multimedia</option>
			
				<option value="7">&nbsp; &nbsp;Instalación de bibliotecas y herramientas</option>
			
				<option value="8" selected="selected">&nbsp; &nbsp;Sobre lenguajes de programación</option>
			
				<option value="9">&nbsp; &nbsp;General</option>
			
				<option value="20">&nbsp; &nbsp;3D</option>
			
				<option value="29">&nbsp; &nbsp;HTML5 y Javascript</option>
			
				<option value="30">&nbsp; &nbsp;Qt y pyqt</option>
			
				<option value="18">Otros</option>
			
				<option value="10">&nbsp; &nbsp;Fuera de tópico</option>
			
				<option value="11">&nbsp; &nbsp;Links interesantes</option>
			
			</select>
			<input type="submit" value="Ir" class="button2" />
		</fieldset>
	</form>


	<h3>¿Quién está conectado?</h3>
	<p>Usuarios navegando por este Foro: No hay usuarios registrados visitando el Foro y 0 invitados</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="index.php.html" accesskey="h">Índice general</a></li>
				
			<li class="rightside"><a href="memberlist.php-mode=leaders.html">El Equipo</a> &bull; <a href="ucp.php-mode=delete_cookies.html">Borrar todas las cookies del Sitio</a> &bull; Todos los horarios son UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>



<div id="pie">

    <ul>
            <li class="contactenos"><a href="../comunidad/contactenos.html">Contáctenos</a></li>
                
                <li class="cc"><a href="http://creativecommons.org/licenses/by-sa/2.5/deed.es">Licencia de uso para el sitio</a></li>

                    <li class="foro"><a href="index.html">Foro de mensajes</a></li>

                        <li class="comunidad"><a href="../comunidad.html">Sobre el grupo ...</a></li>
                    </ul>
                </div>


</div> <!-- borde -->
</div>


<div class="copyright">
Este foro de mensajes funciona gracias al sistema <a href="http://www.phpbb.com/">phpBB</a>
<br/>
Tema visual personalizando por Hugo Ruscitti.
<br/>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	<img src="cron.php-cron_type=tidy_sessions.gif" width="1" height="1" alt="cron" />
</div>

</body>
</html>