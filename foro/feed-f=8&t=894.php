<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="es">
<link rel="self" type="application/atom+xml" href="http://losersjuegos.com.ar/foro/feed.php?f=8&amp;t=894" />

<title>LosersJuegos</title>
<subtitle>Desarrollando videojuegos libres</subtitle>
<link href="http://losersjuegos.com.ar/foro/index.php" />
<updated>2010-10-01T15:56:53+00:00</updated>

<author><name><![CDATA[LosersJuegos]]></name></author>
<id>http://losersjuegos.com.ar/foro/feed.php?f=8&amp;t=894</id>
<entry>
<author><name><![CDATA[algarafa]]></name></author>
<updated>2010-10-01T15:56:53+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=894&amp;p=4212#p4212</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=894&amp;p=4212#p4212"/>
<title type="html"><![CDATA[Re: Desactivar key_repeat selectivamente (pygame)]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=894&amp;p=4212#p4212"><![CDATA[
¡Muchas gracias a los dos por vuestras respuestas! Al final he cogido la solución de Hugo, ¡y funciona muy bien! Ahora me toca pensar en que voy a poner, si enemigos o algo así. <br /><br />Respecto a lo de los Supermisiles, lo que se podría hacer es poner laser a la nave y que tuviera una frecuencia de disparo muy alta pero bajara muy poca vida, y que los misiles se pudieran disparar pocos pero muy destructivos. Luego todavía podría haber un bonificador que te diera 3 supermisiles o algo... no sé, ya se verá. ¡De momento un obstáculo menos!<br /><br />¡Gracias a los dos de nuevo!  <img src="http://losersjuegos.com.ar/foro/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=2006">algarafa</a> — Vie Oct 01, 2010 3:56 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[hugoruscitti]]></name></author>
<updated>2010-09-29T19:57:32+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=894&amp;p=4206#p4206</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=894&amp;p=4206#p4206"/>
<title type="html"><![CDATA[Re: Desactivar key_repeat selectivamente (pygame)]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=894&amp;p=4206#p4206"><![CDATA[
<blockquote><div><cite>algarafa escribió:</cite><br />Estoy haciendo un minijuego con una navecita. No se muy bien como enfocaré el juego, pero lo que si es seguro es que constará de dos elementos, navecita y misiles. Así que, mientras que me pienso que habrá que hacer para ganar y eso he programado ya las dos clases correspondientes. El caso es que al hacer el misil me encuentro un problema. Tengo activada la repetición de teclas para que sea más sencillo mover la nave, pero al pulsar la tecla espacio (asignada para lanzar misil) me lanza una ráfaga de ellos que no veas.<br /></div></blockquote><br />Buenas, ¡que bien se ve el juego!.<br /><br />Está muy bien que comiences por un prototipo, a mi<br />entender es una de las mejores forma de madurar<br />las ideas de desarrollo.<br /><br />Con respecto a la lógica de los disparos, te sugiero<br />una mejora y una forma para implementar lo<br />de la repeticion de los disparos.<br /><br />En donde capturas la pulsación de teclas es<br />mas sencillo enviarle un mensaje a la nave:<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code>elif event.key == K_SPACE:<br />    nave.shoot()<br /></code></dd></dl><br /><br />Esto te permite encapsular es funcionalidad dentro de<br />la nave y hacer que el 'disparo' se vea mas sencillo<br />desde afuera.<br /><br />Luego, para lograr que los disparos no se generen con<br />tanta frecuencia necesitarías un contador dentro de la<br />clase Nave.<br /><br />Escribo acá solamente las lineas nuevas para agregar, el<br />resto de lo que tienes de código se tendría que dejar intacto:<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code><br />class Nave(pygame.sprite.Sprite):<br /><br />    def __init__(self, sprites):<br />        self.sprites = sprites     # necesita la lista de sprites para agregar disparos<br />        self.counter = 0<br /><br />    def update(self):<br />        &quot;Actualiza el contador para simular el tiempo que le lleva recargar municiones.&quot;<br />        if self.counter &gt; 0:<br />            self.counter -= 1<br /><br />    def shoot(self):<br />        if self.can_shoot():<br />            misil = Misil(self.rect.midtop)<br />            self.sprites.add(misil)<br />            self.counter = 10          # actualiza el contacto de municiones.<br /><br />    def can_shoot(self):<br />        &quot;Indica si la nave puede disparar o no&quot;<br />        return self.counter &lt; 1<br /><br /></code></dd></dl><br /><br />Entonces con este cambio tu nave tiene un<br />método que sabe disparar, solamente que no lo hace<br />con tanta frecuencia, sino por lo que indica la variable 'counter':<br />cuanto mayor sea el valor que le asignas al contador cuando<br />dispara (en mi caso 10) mas lenta será la frecuencia de disparo.<br /><br />El día de mañana, si la nave captura un item de<br />super potencia, o algo así, el valor de la variable<br />counter se puede ajustar, o incluso puede<br />disparar mas de un misíl a la vez, o supermisiles !!... etc<br /><br />En fin, sería bueno que juegues con el valor de counter para<br />ver si se adapta bien a la frecuencia de disparos que<br />quieres tener, al menos para mí un buen enfoque<br />es colocar esa lógica en la nave, solo por conveniencia<br />digamos.<br /><br />Saludos.<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=3">hugoruscitti</a> — Mié Sep 29, 2010 7:57 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Juanxo]]></name></author>
<updated>2010-09-29T18:54:40+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=894&amp;p=4205#p4205</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=894&amp;p=4205#p4205"/>
<title type="html"><![CDATA[Re: Desactivar key_repeat selectivamente (pygame)]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=894&amp;p=4205#p4205"><![CDATA[
<dl class="codebox"><dt>Code: </dt><dd><code>#clase Nave<br />def update(self):<br />      key = pygame.key.get_pressed()<br />      vel_x = 0<br />      vel_y = 0<br />      if (key&#91;K_UP&#93;)<br />   vel_y = -VELOCIDAD_NAVE<br />      elif (key&#91;K_DOWN&#93;)<br />   vel_y = VELOCIDAD_NAVE<br />      if (key&#91;K_LEFT&#93;)<br />   vel_x = -VELOCIDAD_NAVE<br />      if (key&#91;K_RIGHT&#93;)<br />   vel_x = VELOCIDAD_NAVE<br />         <br />      self.rect.move_ip(vel_x, vel_y)<br /></code></dd></dl><br /><br />Otra opcion:<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code>#inicializacion<br />nave.speed= &#91;0,0&#93;<br /><br />#dentro del bucle principal<br />if event.type == pygame.KEYDOWN:<br />    if event.key == K_UP:<br />       nave.speed&#91;1&#93;  = -0.3<br />    elif event.key == K_DOWN:<br />       nave.speed&#91;1&#93;  = 0.3<br />    elif event.key == K_LEFT:<br />       nave.speed&#91;0&#93; =  -0.3<br />    elif event.key == K_RIGHT:<br />       nave.speed&#91;0&#93; = 0.3<br />    elif event.key == K_SPACE:<br />       misil = Misil(nave.rect.midtop)<br />       <br />       sprites.add(misil)<br />       <br />    elif event.key == K_ESCAPE:<br />       print 'Cerrando juego...'<br />       sys.exit()<br />if event.type == pygame.KEYUP:<br />    if event.key == K_UP or event.key == K_DOWN: <br />       nave.speed&#91;1&#93; = 0.0<br />    if event.key == K_LEFT or event.key == K_RIGHT:<br />       nave.speed&#91;0&#93; = 0.0<br /></code></dd></dl><br /><br />El tema es que de esta manera no tienes que manejar nada de repeticiones de teclas ni nada parecido, asi que no tendrás problemas con los misiles<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=2057">Juanxo</a> — Mié Sep 29, 2010 6:54 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[algarafa]]></name></author>
<updated>2010-09-29T17:49:53+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=894&amp;p=4204#p4204</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=894&amp;p=4204#p4204"/>
<title type="html"><![CDATA[Desactivar key_repeat selectivamente (pygame)]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=894&amp;p=4204#p4204"><![CDATA[
Hola a todos los losersdevelopers  <img src="http://losersjuegos.com.ar/foro/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> :<br /><br />Estoy haciendo un minijuego con una navecita. No se muy bien como enfocaré el juego, pero lo que si es seguro es que constará de dos elementos, navecita y misiles. Así que, mientras que me pienso que habrá que hacer para ganar y eso he programado ya las dos clases correspondientes. El caso es que al hacer el misil me encuentro un problema. Tengo activada la repetición de teclas para que sea más sencillo mover la nave, pero al pulsar la tecla espacio (asignada para lanzar misil) me lanza una ráfaga de ellos que no veas. Adjuntos dos capturas y el código.<br /><br />Así está ahora:<br /><img src="http://img299.imageshack.us/img299/8167/provisional3.png" alt="Imagen" /><br /><br />Y así quiero que esté:<br /><img src="http://img691.imageshack.us/img691/2231/provisional2.png" alt="Imagen" /><br /><br /><dl class="codebox"><dt>Code: </dt><dd><code>#!/usr/bin/env python<br /># -*- coding: utf-8 -*-<br /># ------------------------------<br /># Autor: Rafael Álvarez García<br /># e-mail: algarafa@gmail.com<br /># ------------------------------<br /><br /># ------------------------------<br /># Importación de módulos<br /># ------------------------------<br /><br />import pygame<br />from pygame.locals import *<br />import sys<br />import os<br /><br /># ------------------------------<br /># Constantes<br /># ------------------------------<br /><br />SCREEN_WIDTH = 400<br />SCREEN_HEIGHT = 600<br />IMG_DIR = 'images'<br /><br /># ------------------------------<br /># Funciones y clases<br /># ------------------------------<br /><br /># Creamos la función para cargar imágenes.<br />def load_image(name, dir, alpha = False):<br />   # Unimos la ruta de la imágen.<br />   ruta = os.path.join(dir, name)<br />   # Probamos a cargarla y si no devolvemos error.<br />   try:<br />      image = pygame.image.load(ruta)<br />      print 'Cargando imagen', ruta, '...¡éxito!'<br />      <br />   except:<br />      print 'No se pudo cargar la imagen', ruta<br />      sys.exit(1)<br />      <br />   # Comprobamos si hay alpha.<br />   if alpha:<br />      image = image.convert_alpha()<br />   else:<br />      image = image.convert()<br />      <br />   return image<br /><br /># Clase para la nave.<br />class Nave(pygame.sprite.Sprite):<br />   <br />   def __init__(self):<br />      pygame.sprite.Sprite.__init__(self)<br />      self.image = load_image('nave.png', IMG_DIR, alpha = True)<br />      self.rect = self.image.get_rect()<br />      self.rect.centerx = SCREEN_WIDTH / 2<br />      self.rect.centery = SCREEN_HEIGHT - 60<br />      self.speed = &#91;0, 0&#93;<br />      <br />   def update(self):<br />      # Hacemos que no salga de la pantalla.<br />      if self.rect.top &lt; 0:<br />         self.rect.top = 0<br />         self.speed&#91;1&#93; = 0<br />      elif self.rect.bottom &gt; SCREEN_HEIGHT + 1:<br />         self.rect.bottom = SCREEN_HEIGHT<br />         self.speed&#91;1&#93; = 0<br />      elif self.rect.left &lt; -1:<br />         self.rect.left = 0<br />         self.speed&#91;0&#93; = 0<br />      elif self.rect.right &gt; SCREEN_WIDTH + 1:<br />         self.rect.right = SCREEN_WIDTH<br />         self.speed&#91;0&#93; = 0<br />         <br />      self.rect.move_ip(self.speed)<br />      <br /># Clase para el misil.<br />class Misil(pygame.sprite.Sprite):<br />   <br />   def __init__(self, initial_pos):<br />      pygame.sprite.Sprite.__init__(self)<br />      self.image = load_image('misil.png', IMG_DIR, alpha = True)<br />      self.rect = self.image.get_rect()<br />      self.rect.midbottom = initial_pos<br />      self.speed = &#91;0, -4&#93;<br />      <br />   # Si se sale de pantalla lo matamos, si no lo movemos.<br />   def update(self):<br />      if self.rect.bottom &lt; 0:<br />         self.kill<br />      else:<br />         self.rect.move_ip(self.speed)<br /><br /># ------------------------------<br /># Función principal<br /># ------------------------------<br /><br />def main():<br />   pygame.init()<br />   print 'Iniciando juego...'<br />   <br />   # Creamos la ventana e indicamos nombre e icono.<br />   screen = pygame.display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))<br />   pygame.display.set_caption('Provisional')<br />   icon = pygame.image.load('images/nave.png').convert_alpha()<br />   pygame.display.set_icon(icon)<br />   print 'Creando ventana... ¡éxito!'<br />   <br />   # Cargamos e imprimimos el fondo.<br />   fondo = load_image('background.jpg', IMG_DIR)<br />   screen.blit(fondo, (0, 0))<br />   <br />   # Cremoas el frupo de sprites.<br />   sprites = pygame.sprite.Group()<br />   <br />   # Creamos la nave y la añadimos al grupo sprites.<br />   nave = Nave()<br />   sprites.add(nave)<br />   <br />   # Creamos el reloj.<br />   clock = pygame.time.Clock()<br />   # Activamos la repetición de teclas.<br />   pygame.key.set_repeat(1, 25)<br />   # Hacemos el ratón invisible.<br />   pygame.mouse.set_visible(False)<br />   <br />   # Bucle principal.<br />   while True:<br />      clock.tick(60)<br />      <br />      # Comprobamos los eventos.<br />      for event in pygame.event.get():<br />         if event.type == pygame.QUIT:<br />            print 'Cerrando juego...'<br />            sys.exit()<br />            <br />         if event.type == pygame.KEYDOWN:<br />            if event.key == K_UP:<br />               nave.speed&#91;1&#93; -= 0.3<br />            elif event.key == K_DOWN:<br />               nave.speed&#91;1&#93; += 0.3<br />            elif event.key == K_LEFT:<br />               nave.speed&#91;0&#93; -= 0.3<br />            elif event.key == K_RIGHT:<br />               nave.speed&#91;0&#93; += 0.3<br />            elif event.key == K_SPACE:<br />               misil = Misil(nave.rect.midtop)<br />               <br />               sprites.add(misil)<br />               <br />            elif event.key == K_ESCAPE:<br />               print 'Cerrando juego...'<br />               sys.exit()<br />      <br />      # Actualizamos los sprites.<br />      sprites.update()<br />            <br />      # Actualizamos la pantalla.<br />      sprites.clear(screen, fondo)<br />      sprites.draw(screen)<br />      pygame.display.flip()<br />   <br />if __name__ == &quot;__main__&quot;:<br />   main()<br /></code></dd></dl><br /><br />¡Muchas gracias!  <img src="http://losersjuegos.com.ar/foro/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /><p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=2006">algarafa</a> — Mié Sep 29, 2010 5:49 pm</p><hr />
]]></content>
</entry>
</feed>