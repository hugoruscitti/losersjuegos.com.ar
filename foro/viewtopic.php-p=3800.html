<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="es" xml:lang="es">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="es" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="copyright" content="2000, 2002, 2005, 2007 phpBB Group" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

<title>LosersJuegos &bull; Ver Tema - Mapa de tiles en SDL</title>

<link rel="alternate" type="application/atom+xml" title="Feed - LosersJuegos" href="feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Nuevos Temas" href="feed-mode=topics.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Foro - Sobre las bibliotecas multimedia" href="feed-f=6.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Tema - Mapa de tiles en SDL" href="feed-f=6&amp;t=831.php" />

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:

	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Introduzca el número de página al que desea saltar:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/; domain=.losersjuegos.com.ar';
	var onload_functions = new Array();
	var onunload_functions = new Array();

	

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<script type="text/javascript" src="styles/prosilver/template/styleswitcher.js"></script>
<script type="text/javascript" src="styles/prosilver/template/forum_fn.js"></script>

<link href="styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="style.php-id=3&amp;lang=en&amp;sid=4ec7bd6b5b400f7171476bb35f8261c6.css" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />




<link href="styles/prosilver/theme/header.css" rel="stylesheet" type="text/css"/>
<link href="styles/prosilver/theme/barrausuario.css" rel="stylesheet" type="text/css"/>
<link href="styles/prosilver/theme/design.css" rel="stylesheet" type="text/css"/>

<link href="styles/prosilver/theme/src/prettify.css" type="text/css" rel="stylesheet" />
<script src="styles/prosilver/theme/src/prettify.js" type="text/javascript"></script>


</head>


<body onload="prettyPrint()" id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
<div id='borde'>

    <div id="cabecera">

        <a href='index.html'><img id='logo1' alt='' src="styles/prosilver/theme/ima_cabecera/logo_1.png" width="286" height="50" name="logo1" /></a>

        <div id="navi">
            <ul>
                <li><a href="../index.html">Web</a></li>
                <li id='actual'><a href="index.html">Foro</a></li>
            </ul>
        </div>

    </div>


<div class='barra_usuario'>
        <ul>
                <li class='regresar'><a href='../index.html'>Regresar a la web</a></li>
                <li class='buscar'><a href="search.php.html">Buscar</a></li>

                
                <li class='registrar'><a href="ucp.php-mode=register.html">Registrarse</a></li>

                <li class='registrar'><a href="ucp.php-mode=login.html">Identificarse</a>
                </li>
                

        </ul>
</div>




	<a name="start_here"></a>
	<div id="page-body">
		<ul style='font-size: 14px' class="linklist">
                    <li class="icon-home"><a href="index.php.html" accesskey="h">Índice general</a></li>
                    </ul>
<h2><a href="viewtopic.php-f=6&amp;t=831&amp;start=0.html">Mapa de tiles en SDL</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">Tratamos sobre el manejo de APIs frecuentemente utilizadas en el desarrollo de videojuegos, como SDL, pygame o SFML.<br /></div>

<div class="topic-actions">

	<div class="buttons">
	
		<div class="reply-icon"><a href="posting.php-mode=reply&amp;f=6&amp;t=831.html" title="Publicar una respuesta"><span></span>Publicar una respuesta</a></div>
	
	</div>

	
		<div class="search-box">
			<form method="post" id="topic-search" action="search.php-t=831.html">
			<fieldset>
				<input class="inputbox search tiny"  type="text" name="keywords" id="search_keywords" size="20" value="Buscar este tema…" onclick="if(this.value=='Buscar este tema…')this.value='';" onblur="if(this.value=='')this.value='Buscar este tema…';" />
				<input class="button2" type="submit" value="Buscar" />
				<input type="hidden" value="831" name="t" />
				<input type="hidden" value="msgonly" name="sf" />
			</fieldset>
			</form>
		</div>
	
		<div class="pagination">
			11 mensajes
			 &bull; Página <strong>1</strong> de <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p3766" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="#p3766">Mapa de tiles en SDL</a></h3>
			<p class="author"><a href="viewtopic.php-p=3766.html#p3766"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2204.html">RafaG</a></strong> &raquo; Mié Ago 18, 2010 2:10 pm </p>

			

			<div class="content">Estoy intentando hacer un juego con un mapa hecho con tiles con SDL en C++. Pero no consigo hacerlo. He hecho que se imprima en la pantalla los tiles, pero creo que el sistema que he utilizado no es muy bueno:<br /><br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>void Imprimir()<br />{<br />&nbsp; &nbsp; while (1) //Hasta que no se hayan impreso todos los tiles no sale del bucle.<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; if (x!=9)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTiles.x+=50;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (y!=9)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x=0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTiles.x=0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTiles.y+=50;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break; //Sale del bucle.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; if (MAP1&#91;y&#93;&#91;x&#93;==0) //Dedice que imagen hay que imprimir<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.x=0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.w=50;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; if (MAP1&#91;y&#93;&#91;x&#93;==1)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.x=50;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.w=100;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; SDL_BlitSurface(tiles,&amp;PosTilesR,pantalla,&amp;PosTiles);<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; SDL_BlitSurface(personaje1,&amp;PosPersonaje1R,pantalla,&amp;PosPersonaje1);<br />&nbsp; &nbsp; SDL_Flip(pantalla);<br />}<br /></code></dd></dl><br /><br />No es bueno el código, al mover el personaje no se ve fluido. Tampoco se me ocurre un modo de detectar colisiones.<br /><br />Miré el ejemplo de Colisión de plataformas pero me cuesta entender tanto código que no he escrito yo.<br /><br />A ver si alguien me da la teoría, o un ejemplo sencillo, para:<br />-Imprimir tiles (de un buen modo).<br />-Detectar colisiones con los tiles.<br /><br />Luego intentaré ponerlo en práctica. El juego no será de plataformas, la vista será desde arriba (<a href="http://i37.tinypic.com/10e3db8.jpg" class="postlink">http://i37.tinypic.com/10e3db8.jpg</a>), así que no necesita nada de gravedad.<br /><br />Saludos y gracias.</div>

			

		</div>

		
			<dl class="postprofile" id="profile3766">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2204.html">RafaG</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 20</dd><dd><strong>Registrado:</strong> Lun Abr 05, 2010 10:57 am</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p3772" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p3772">Re: Mapa de tiles en SDL</a></h3>
			<p class="author"><a href="viewtopic.php-p=3772.html#p3772"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=3.html" style="color: #AA0000;" class="username-coloured">hugoruscitti</a></strong> &raquo; Mié Ago 18, 2010 4:16 pm </p>

			

			<div class="content">Hola, como estas?<br /><br />En la web hay un ejemplo llamado &quot;scroll suave&quot; y tiene una rutina que te puede<br />servir.<br /><br />La rutina se encarga de imprimir todo el escenario de tiles sobre la pantalla<br />usando una matriz:<br /><br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>void imprimir_escenario (SDL_Surface * screen, SDL_Surface * ima, int x, int y)<br />{<br />&nbsp; &nbsp;static char mapa &#91;FILAS_MAPA&#93; &#91;COLUMNAS_MAPA + 1&#93; = {<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;00000002115000000211&quot;,<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;00000002115000000211&quot;,<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;00000002115000000211&quot;,<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;00000002115000000211&quot;,<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;33333334116333333411&quot;,<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;11111111111111111111&quot;,<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;11111111111111111111&quot;,<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;11111111111111111111&quot;,<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;11111111111111111111&quot;,<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;11111111111111111111&quot;};<br />&nbsp; &nbsp;int i;<br />&nbsp; &nbsp;int j;<br />&nbsp; &nbsp;int fila = y / ALTO_TILE;<br />&nbsp; &nbsp;int columna = x / ANCHO_TILE;<br />&nbsp; &nbsp;int desplazamiento_x = x % ANCHO_TILE;<br />&nbsp; &nbsp;int desplazamiento_y = y % ALTO_TILE;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;for (i = 0; i &lt; 6; i ++)<br />&nbsp; &nbsp;{<br />&nbsp; &nbsp;&nbsp; &nbsp;for (j = 0; j &lt; 8; j ++)<br />&nbsp; &nbsp;&nbsp; &nbsp;{<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;imprimir_grilla (screen, ima, <br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;mapa &#91;fila + i&#93; &#91;columna + j&#93; - '0',<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;COLUMNAS_TILES,<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;j * ANCHO_TILE - desplazamiento_x,<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;i * ALTO_TILE - desplazamiento_y);<br />&nbsp; &nbsp;&nbsp; &nbsp;}<br />&nbsp; &nbsp;}<br />&nbsp; &nbsp;<br />}<br /><br />void imprimir_grilla (SDL_Surface * screen, SDL_Surface * src, int cuadro, <br />&nbsp; &nbsp;&nbsp; &nbsp;int cols, int x, int y)<br />{<br />&nbsp; &nbsp;int w = src-&gt;w / cols;<br />&nbsp; &nbsp;SDL_Rect fuente = {cuadro * w, 0, w, src-&gt;h};<br />&nbsp; &nbsp;SDL_Rect rect = {x, y, 0, 0};<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;if (cuadro &lt; 0 || cuadro &gt; cols)<br />&nbsp; &nbsp;{<br />&nbsp; &nbsp;&nbsp; &nbsp;printf (&quot;No se puede imprimir el cuadro %d\n&quot;, cuadro);<br />&nbsp; &nbsp;&nbsp; &nbsp;return;<br />&nbsp; &nbsp;}<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;SDL_BlitSurface (src, &amp; fuente,&nbsp; &nbsp;screen, &amp;rect);<br />}<br /></code></dd></dl><br /><br /><img src="http://www.losersjuegos.com.ar/_media/referencia/ejemplos/scroll/captura.png" alt="Imagen" /><br /><br />Con la diferencia que en tu código no creo que uses las variables &quot;desplazamiento_x&quot; y &quot;desplazamiento_y&quot;. A menos<br />que quieras mover un cámara o algo así...<br /><br />La página donde puedes encontrar el ejemplo es:<br /><br /><!-- m --><a class="postlink" href="http://www.losersjuegos.com.ar/referencia/ejemplos">http://www.losersjuegos.com.ar/referencia/ejemplos</a><!-- m --><br /><br />y en particular el ejemplo es:<br /><br /><!-- m --><a class="postlink" href="http://www.losersjuegos.com.ar/_media/referencia/ejemplos/scroll/scroll.tar.gz">http://www.losersjuegos.com.ar/_media/r ... oll.tar.gz</a><!-- m --><br /><br />hay otros ejemplos que también usan una técnica muy parecida, pero están en python y no<br />en C. Si algún voluntario se anima a traducirlos bienvenido...</div>

			<div id="sig3772" class="signature">Hugo Ruscitti
<br /><!-- w --><a class="postlink" href="http://www.losersjuegos.com.ar">www.losersjuegos.com.ar</a><!-- w --></div>

		</div>

		
			<dl class="postprofile" id="profile3772">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=3.html"><img src="download/3-avatar=3_1295438267.jpg" width="80" height="80" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=3.html" style="color: #AA0000;" class="username-coloured">hugoruscitti</a>
			</dt>

			<dd>Site Admin</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 1242</dd><dd><strong>Registrado:</strong> Dom Jul 30, 2006 3:57 am</dd><dd><strong>Ubicación:</strong> Buenos Aires, Argentina</dd>
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://www.losersjuegos.com.ar" title="WWW: http://www.losersjuegos.com.ar"><span>Sitio web</span></a></li>
				</ul>
			</dd>
		

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p3773" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p3773">Re: Mapa de tiles en SDL</a></h3>
			<p class="author"><a href="viewtopic.php-p=3773.html#p3773"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2296.html">adrigm77</a></strong> &raquo; Mié Ago 18, 2010 4:59 pm </p>

			

			<div class="content">Si quieres que tenga Scroll, detención de colisiones, capas y demás no es algo trivial. pero quizás esto te sirva:<br /><br /><!-- m --><a class="postlink" href="http://www.wired-weasel.com/users/serhid/tutos/tut4.html">http://www.wired-weasel.com/users/serhi ... /tut4.html</a><!-- m --></div>

			<div id="sig3773" class="signature"><a href="http://razonartificial.com/" class="postlink">Razón Artificial</a> - La ciencia y el arte de crear videojuegos.</div>

		</div>

		
			<dl class="postprofile" id="profile3773">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2296.html"><img src="download/2296-avatar=2296_1283103232.png" width="80" height="80" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=2296.html">adrigm77</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 43</dd><dd><strong>Registrado:</strong> Dom Jul 25, 2010 8:03 pm</dd><dd><strong>Ubicación:</strong> Las Palmas de Gran Canaria, España</dd>
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://razonartificial.com/" title="WWW: http://razonartificial.com/"><span>Sitio web</span></a></li>
				</ul>
			</dd>
		

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p3775" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p3775">Re: Mapa de tiles en SDL</a></h3>
			<p class="author"><a href="viewtopic.php-p=3775.html#p3775"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2204.html">RafaG</a></strong> &raquo; Jue Ago 19, 2010 9:08 am </p>

			

			<div class="content">Gracias al tutorial de adrigm77 ahora entiendo mejor el ejemplo de Hugo, pero sigo sin saber nada de las colisiones. Alomojor logro averiguarlo solo, pero no estoy seguro.<br /><br />Por cierto Hugo, no logro comprender el tercer parámetro que le pasas a imprimir_grilla(). Se que es para elegir el cuadro que será impreso, pero no entiendo: mapa [fila + i] [columna + j] - '0'<br /><br />¿No se supone que hay que pasarle un int? mapa[x][y] es char.</div>

			

		</div>

		
			<dl class="postprofile" id="profile3775">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2204.html">RafaG</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 20</dd><dd><strong>Registrado:</strong> Lun Abr 05, 2010 10:57 am</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p3780" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p3780">Re: Mapa de tiles en SDL</a></h3>
			<p class="author"><a href="viewtopic.php-p=3780.html#p3780"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=3.html" style="color: #AA0000;" class="username-coloured">hugoruscitti</a></strong> &raquo; Jue Ago 19, 2010 3:02 pm </p>

			

			<div class="content"><blockquote><div><cite>RafaG escribió:</cite>Por cierto Hugo, no logro comprender el tercer parámetro que le pasas a imprimir_grilla(). Se que es para elegir el cuadro que será impreso, pero no entiendo: mapa [fila + i] [columna + j] - '0'<br /><br />¿No se supone que hay que pasarle un int? mapa[x][y] es char.</div></blockquote><br /><br />Buenas, en principio si. La función tiene que recibir un número, que podría ser<br />un int. Solo que C trata a los char también como números, y a veces son mas convenientes<br />que los enteros. Te comento por qué:<br /><br />La grilla la estoy tratando como una cadena, así me resulta mas sencillo indicar como es<br />toda una fila del mapa &quot;01000234&quot;, el problema es que para C estos valores son como<br />un vector de números, donde cada elemento es el valor ascii de cada caracter: [48, 19, 48 ...etc]<br /><br />Entonces, en esa función que imprime, no me gustaría usar el valor 48 sino 0, pero como<br />'0' es un char (y vale 48) lo tengo que llevar a 0, eso se puede hacer con la<br />sentencia &quot;variable - '0'&quot;. Luego si tienes &quot; '4' - '0' &quot; el resultado sería 4 (pero como entero<br />y no como caracter.<br /><br />No se si lo he explicado bien, es medio complicado, pero ante dudas preguntame nuevamente y<br />lo explico desde otro enfoque.<br /><br />Saludos.</div>

			<div id="sig3780" class="signature">Hugo Ruscitti
<br /><!-- w --><a class="postlink" href="http://www.losersjuegos.com.ar">www.losersjuegos.com.ar</a><!-- w --></div>

		</div>

		
			<dl class="postprofile" id="profile3780">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=3.html"><img src="download/3-avatar=3_1295438267.jpg" width="80" height="80" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=3.html" style="color: #AA0000;" class="username-coloured">hugoruscitti</a>
			</dt>

			<dd>Site Admin</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 1242</dd><dd><strong>Registrado:</strong> Dom Jul 30, 2006 3:57 am</dd><dd><strong>Ubicación:</strong> Buenos Aires, Argentina</dd>
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://www.losersjuegos.com.ar" title="WWW: http://www.losersjuegos.com.ar"><span>Sitio web</span></a></li>
				</ul>
			</dd>
		

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p3800" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p3800">Re: Mapa de tiles en SDL</a></h3>
			<p class="author"><a href="#p3800"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2204.html">RafaG</a></strong> &raquo; Sab Ago 21, 2010 1:00 pm </p>

			

			<div class="content">Ya he conseguido imprimir los tiles, por fin. <br /><br /><span style="font-weight: bold">Edito: </span>Ya solo me queda detectar colisiones, ¿alguna idea?<br /><br />Este es el código:<br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>#include &lt;iostream.h&gt;<br />#include &lt;SDL.h&gt;<br /><br />#define ANCHO_MAPA 20<br />#define ALTO_MAPA 20<br />#define ANCHO_TILE 30<br />#define LAT_DERECHO ANCHO_TILE*ANCHO_MAPA<br />#define LAT_INFERIOR ANCHO_TILE*ALTO_MAPA<br />#define VELOCIDAD 8<br /><br />#define C 1<br /><br />void Cargar();<br /><br />void Imprimir();<br />void Mover();<br /><br />class Camara<br />{<br />&nbsp; &nbsp; public:<br />&nbsp; &nbsp; &nbsp; &nbsp; int X;<br />&nbsp; &nbsp; &nbsp; &nbsp; int Y;<br />};<br />class Personaje<br />{<br />&nbsp; &nbsp; public:<br />&nbsp; &nbsp; &nbsp; &nbsp; int x,y;<br />&nbsp; &nbsp; &nbsp; &nbsp; SDL_Surface*img;<br />};<br /><br />SDL_Surface*pantalla,*tiles;<br />SDL_Rect PosTiles, PosTilesR,PosBola;<br />Camara Camara;<br />Personaje Personaje;<br />Uint8 *tecla;<br />int ELSE=1;<br />int x=0,y=0;<br /><br /><br />int map&#91;ALTO_MAPA&#93;&#91;ANCHO_MAPA&#93;=<br />{<br />&nbsp; &nbsp; {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,C,0,0,0,0,0,0,0,0,0,0,0,C,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,0,0,0,C,C,C,C,0,0,0,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,C,0,0,0,0,C,0,0,0,0,C,0,0,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,0,C,0,C,0,0,C,0,C,0,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,0,C,0,0,0,0,0,0,C,0,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,0,C,0,C,0,0,C,0,C,0,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,0,C,0,0,C,C,0,0,C,0,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,C,0,0,0,0,C,0,0,0,0,C,0,0,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,0,0,0,C,C,C,C,0,0,0,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,C,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,C,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,C,0,0,0,0,0,0,0,0,C,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />};<br /><br />int main ( int argc, char** argv )<br />{<br />&nbsp; &nbsp; Cargar();<br /><br />&nbsp; &nbsp; while (1)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; Mover();<br />&nbsp; &nbsp; &nbsp; &nbsp; Imprimir();<br />&nbsp; &nbsp; &nbsp; &nbsp; SDL_Delay(10);<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; return 0;<br />}<br /><br />void Imprimir()<br />{<br />&nbsp; &nbsp; SDL_FillRect(pantalla,NULL,0);<br />&nbsp; &nbsp; for (y=0; y&lt;ALTO_MAPA; y++)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; for (x=0; x&lt;ANCHO_MAPA; x++)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (map&#91;y&#93;&#91;x&#93;==0)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.x=0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.y=0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.w=ANCHO_TILE;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.h=ANCHO_TILE;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (map&#91;y&#93;&#91;x&#93;==C)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.x=ANCHO_TILE;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.y=0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.w=ANCHO_TILE*2;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.h=ANCHO_TILE;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTiles.x=x*ANCHO_TILE-Camara.X;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTiles.y=y*ANCHO_TILE-Camara.Y;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (PosTiles.x&gt;=-(ANCHO_TILE)&amp;&amp; PosTiles.x&lt;=200+ANCHO_TILE&amp;&amp;PosTiles.y&gt;=-(ANCHO_TILE)&amp;&amp; PosTiles.y&lt;=200)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SDL_BlitSurface(tiles,&amp;PosTilesR,pantalla,&amp;PosTiles);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; SDL_BlitSurface(Personaje.img,NULL,pantalla,&amp;PosBola);<br />&nbsp; &nbsp; SDL_Flip(pantalla);<br />}<br />void Mover()<br />{<br />&nbsp; &nbsp; PosBola.x=Personaje.x;<br />&nbsp; &nbsp; PosBola.y=Personaje.y;<br /><br />&nbsp; &nbsp; SDL_PumpEvents();<br />&nbsp; &nbsp; tecla=SDL_GetKeyState(NULL);<br /><br />&nbsp; &nbsp; if (tecla&#91;SDLK_ESCAPE&#93;)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; exit(1);<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; ///******************************************///<br />&nbsp; &nbsp; if (tecla&#91;SDLK_UP&#93;)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; //Personaje.y+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; if (Camara.Y&gt;0)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Camara.Y-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; if (Personaje.y&gt;(200/2)-(Personaje.img-&gt;w/2))<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.y-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; if (Camara.Y==0 &amp;&amp; Personaje.y&gt;0)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.y-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; if (tecla&#91;SDLK_DOWN&#93;)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; //Personaje.y-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; ///Camara.Y+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; if (Camara.Y&lt;LAT_INFERIOR-200)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Camara.Y+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; if (Personaje.y&lt;(200/2)-(Personaje.img-&gt;w/2))<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.y+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; if (Camara.Y==LAT_INFERIOR-200 &amp;&amp; Personaje.y&lt;200-(Personaje.img-&gt;h))<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.y+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; if (tecla&#91;SDLK_LEFT&#93;)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; //Personaje.x+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; //Camara.X-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; if (Camara.X&gt;0)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Camara.X-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; if (Personaje.x&gt;(200/2)-(Personaje.img-&gt;w/2))<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.x-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; if (Camara.X==0 &amp;&amp; Personaje.x&gt;0)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.x-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; if (tecla&#91;SDLK_RIGHT&#93;)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; //Personaje.x-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; if (Camara.X&lt;LAT_INFERIOR-200)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Camara.X+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; if (Personaje.x&lt;(200/2)-(Personaje.img-&gt;w/2))<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.x+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; if (Camara.X==LAT_INFERIOR-200 &amp;&amp; Personaje.x&lt;200-(Personaje.img-&gt;h))<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.x+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; ///*****************************************///<br /><br /><br />}<br /><br />void Cargar()<br />{<br />&nbsp; &nbsp; if (SDL_Init(SDL_INIT_VIDEO)&lt;0)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; SDL_GetError() &lt;&lt; endl;<br />&nbsp; &nbsp; &nbsp; &nbsp; exit(1);<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; pantalla=SDL_SetVideoMode(200,200,24,SDL_HWSURFACE|SDL_DOUBLEBUF);<br />&nbsp; &nbsp; if (pantalla==NULL)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; SDL_GetError() &lt;&lt; endl;<br />&nbsp; &nbsp; &nbsp; &nbsp; exit(1);<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; tiles=SDL_LoadBMP(&quot;tiles.bmp&quot;);<br />&nbsp; &nbsp; if (tiles==NULL)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; SDL_GetError() &lt;&lt; endl;<br />&nbsp; &nbsp; &nbsp; &nbsp; exit(1);<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; Personaje.img=SDL_LoadBMP(&quot;pers.bmp&quot;);<br />&nbsp; &nbsp; if (Personaje.img==NULL)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; SDL_GetError() &lt;&lt; endl;<br />&nbsp; &nbsp; &nbsp; &nbsp; exit(1);<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; Personaje.x=(200/2)-(Personaje.img-&gt;w/2);<br />&nbsp; &nbsp; Personaje.y=(200/2)-(Personaje.img-&gt;h/2);<br /><br />&nbsp; &nbsp; PosBola.x=(200/2)-(Personaje.img-&gt;w/2);<br />&nbsp; &nbsp; PosBola.y=(200/2)-(Personaje.img-&gt;h/2);<br /><br />&nbsp; &nbsp; Camara.X=LAT_DERECHO-200;<br />&nbsp; &nbsp; Camara.Y=LAT_INFERIOR-200;<br />&nbsp; &nbsp; /*Camara.X=PosBola.x+50;<br />&nbsp; &nbsp; Camara.Y=PosBola.y+50;*/<br /><br />}<br /><br /><br /></code></dd></dl><br /><br />Saludos.</div>

			

		</div>

		
			<dl class="postprofile" id="profile3800">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2204.html">RafaG</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 20</dd><dd><strong>Registrado:</strong> Lun Abr 05, 2010 10:57 am</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p3873" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p3873">Re: Mapa de tiles en SDL</a></h3>
			<p class="author"><a href="viewtopic.php-p=3873.html#p3873"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2204.html">RafaG</a></strong> &raquo; Mié Ago 25, 2010 8:23 am </p>

			

			<div class="content">Quizá haciendo una función que me devuelva en que tipo de tile (0,C) estoy... Pero no sé cómo.</div>

			

		</div>

		
			<dl class="postprofile" id="profile3873">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2204.html">RafaG</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 20</dd><dd><strong>Registrado:</strong> Lun Abr 05, 2010 10:57 am</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p3875" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p3875">Re: Mapa de tiles en SDL</a></h3>
			<p class="author"><a href="viewtopic.php-p=3875.html#p3875"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2296.html">adrigm77</a></strong> &raquo; Mié Ago 25, 2010 9:31 am </p>

			

			<div class="content">Depende de si quieres colisiones por pixel o por tiles.<br /><br />Por tiles es muy fácil, solo debes saber por donde se puede pasar y por donde no y crear una matriz del mismo tamaño del mapa con los valores 1 y 0<br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>0 0 1 0 1 0<br />1 1 1 1 1 0<br />1 1 1 1 1 1<br />0 1 1 0 1 0<br /></code></dd></dl><br /><br />Los 1 son transitables y los 0  no. Pues ahora antes de moverte a un tile solo tienes que comprobar si la casilla es transitable.<br /><br />En realidad si quieres algo serio es mas complejo que esto poque puede haber bloqueos parciales (tiles que puedes moverte en unas direcciones y en otras no). Quiero escribir un artículo acerca de esto en mi blog, si lo hago te aviso.</div>

			<div id="sig3875" class="signature"><a href="http://razonartificial.com/" class="postlink">Razón Artificial</a> - La ciencia y el arte de crear videojuegos.</div>

		</div>

		
			<dl class="postprofile" id="profile3875">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2296.html"><img src="download/2296-avatar=2296_1283103232.png" width="80" height="80" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=2296.html">adrigm77</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 43</dd><dd><strong>Registrado:</strong> Dom Jul 25, 2010 8:03 pm</dd><dd><strong>Ubicación:</strong> Las Palmas de Gran Canaria, España</dd>
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://razonartificial.com/" title="WWW: http://razonartificial.com/"><span>Sitio web</span></a></li>
				</ul>
			</dd>
		

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p3881" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p3881">Re: Mapa de tiles en SDL</a></h3>
			<p class="author"><a href="viewtopic.php-p=3881.html#p3881"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2204.html">RafaG</a></strong> &raquo; Mié Ago 25, 2010 4:25 pm </p>

			

			<div class="content">Si haces el artículo lo leeré.<br /><br />He hecho un avance (ya era hora), pero como siempre surge otro problema. Con un cálculo sencillo he conseguido averiguar en qué casilla se encuentra el personaje (me costó...):<br /><br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>&nbsp; &nbsp; &nbsp; &nbsp; if (tecla&#91;SDLK_UP&#93;)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Camara.Y&gt;0 &amp;&amp; Personaje.y==(200/2)-(Personaje.img-&gt;w/2))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Camara.Y-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (map&#91;(Camara.Y+Personaje.y)/30&#93;&#91;((Camara.X+Personaje.x))/30&#93;==C)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Camara.Y+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Personaje.y&gt;(200/2)-(Personaje.img-&gt;w/2) || (Camara.Y==0 &amp;&amp; Personaje.y&gt;0))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.y-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (map&#91;(Camara.Y+Personaje.y)/30&#93;&#91;(Camara.X+Personaje.x)/30&#93;==C)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.y+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br /><br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Personaje.y&lt;(200/2)-(Personaje.img-&gt;h/2)&amp;&amp;Camara.Y!=0)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.y=(200/2)-(Personaje.img-&gt;h/2);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; }<br /></code></dd></dl><br /><br />El problema es que cuando Personaje.x sale de un tile Personaje.x+Personage.img-&gt;w sigue estando en el tile anterior (no se si me he explicado bien), entonces las colisiones funcionan mal, si compilais el código de arriba y lo probáis veréis el error, a ver si alguien sabe solucionarlo.<br /><br />Saludos.</div>

			

		</div>

		
			<dl class="postprofile" id="profile3881">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2204.html">RafaG</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 20</dd><dd><strong>Registrado:</strong> Lun Abr 05, 2010 10:57 am</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p3885" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p3885">Re: Mapa de tiles en SDL</a></h3>
			<p class="author"><a href="viewtopic.php-p=3885.html#p3885"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2057.html">Juanxo</a></strong> &raquo; Mié Ago 25, 2010 8:51 pm </p>

			

			<div class="content">Una opción es comprobar que ninguna de las cuatro esquinas choque con nada, así te evitarás este tipo de problemas. En 3d esto se conoce como BoundingBox</div>

			

		</div>

		
			<dl class="postprofile" id="profile3885">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2057.html"><img src="download/2057-avatar=2057_1281526741.png" width="80" height="75" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=2057.html">Juanxo</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 437</dd><dd><strong>Registrado:</strong> Sab Ene 31, 2009 2:34 am</dd><dd><strong>Ubicación:</strong> Madrid(España)</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p3939" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p3939">Re: Mapa de tiles en SDL</a></h3>
			<p class="author"><a href="viewtopic.php-p=3939.html#p3939"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=2204.html">RafaG</a></strong> &raquo; Sab Ago 28, 2010 10:07 am </p>

			

			<div class="content">Después de diez días, y gracias a vuestra ayuda, lo he conseguido.  <img src="images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> <br /><br />Para resolver el último problema con las colisiones creé una función que detectaba las colisiones con las cuatro esquinas (como dijo Juanxo).<br /><br />Aquí dejo el código completo, seguro que a alguien le será útil:<br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>#include &lt;iostream.h&gt;<br />#include &lt;SDL.h&gt;<br /><br />#define ANCHO_MAPA 20<br />#define ALTO_MAPA 20<br />#define ANCHO_TILE 30<br />#define LAT_DERECHO ANCHO_TILE*ANCHO_MAPA<br />#define LAT_INFERIOR ANCHO_TILE*ALTO_MAPA<br />#define VELOCIDAD 5<br /><br />#define C 1<br /><br />void Cargar();<br /><br />int CeldaPersonaje();<br />void Imprimir();<br />void Mover();<br /><br />class Camara<br />{<br />&nbsp; &nbsp; public:<br />&nbsp; &nbsp; &nbsp; &nbsp; int X;<br />&nbsp; &nbsp; &nbsp; &nbsp; int Y;<br />};<br />class Personaje<br />{<br />&nbsp; &nbsp; public:<br />&nbsp; &nbsp; &nbsp; &nbsp; int x,y;<br />&nbsp; &nbsp; &nbsp; &nbsp; SDL_Surface*img;<br />};<br /><br />SDL_Surface*pantalla,*tiles;<br />SDL_Rect PosTiles, PosTilesR,PosBola;<br />Camara Camara;<br />Personaje Personaje;<br />Uint8 *tecla;<br />int ELSE=1;<br />int x=0,y=0;<br /><br />int map&#91;ALTO_MAPA&#93;&#91;ANCHO_MAPA&#93;=<br />{<br />&nbsp; &nbsp; {C,C,C,0,0,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C},<br />&nbsp; &nbsp; {C,0,C,C,0,C,0,0,0,0,0,0,0,C,0,0,0,0,0,C},<br />&nbsp; &nbsp; {C,0,C,0,0,0,0,0,0,0,0,0,0,C,C,C,C,C,0,C},<br />&nbsp; &nbsp; {C,0,C,C,C,C,0,0,0,0,0,0,0,0,0,0,0,C,0,C},<br />&nbsp; &nbsp; {C,0,C,0,0,C,0,0,0,0,0,0,C,C,C,C,C,C,0,C},<br />&nbsp; &nbsp; {C,0,C,C,C,C,0,0,C,C,C,C,C,0,0,0,0,0,0,C},<br />&nbsp; &nbsp; {C,0,C,C,0,0,0,C,0,0,0,0,C,C,C,0,C,C,0,C},<br />&nbsp; &nbsp; {C,0,0,C,0,C,C,C,C,C,C,C,0,C,C,0,C,C,0,C},<br />&nbsp; &nbsp; {0,C,0,C,0,C,0,C,0,0,C,0,0,C,C,0,C,C,0,C},<br />&nbsp; &nbsp; {0,C,0,C,0,0,0,C,C,0,C,0,0,C,C,C,C,C,0,C},<br />&nbsp; &nbsp; {C,C,0,C,C,C,0,0,C,0,C,0,0,C,0,0,0,0,0,C},<br />&nbsp; &nbsp; {0,C,0,0,0,C,0,C,C,0,C,0,C,C,C,C,C,C,0,C},<br />&nbsp; &nbsp; {0,C,0,C,C,C,0,C,C,0,C,C,C,0,0,0,0,0,0,C},<br />&nbsp; &nbsp; {0,C,0,C,0,0,0,C,0,0,0,0,0,0,C,C,C,C,C,C},<br />&nbsp; &nbsp; {0,C,0,C,0,C,C,C,C,C,C,C,C,0,C,0,0,0,0,0},<br />&nbsp; &nbsp; {0,C,0,C,0,C,0,0,0,0,0,0,0,0,C,C,0,0,0,0},<br />&nbsp; &nbsp; {0,C,0,C,0,C,C,C,0,C,C,C,C,C,C,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},<br />&nbsp; &nbsp; {C,C,C,C,C,C,C,C,0,C,C,C,C,C,C,0,0,0,0,0},<br />&nbsp; &nbsp; {0,0,0,0,0,0,0,C,0,C,0,0,0,0,0,0,0,0,0,0},<br />};<br /><br />int main ( int argc, char** argv )<br />{<br />&nbsp; &nbsp; Cargar();<br /><br />&nbsp; &nbsp; while (1)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; Mover();<br />&nbsp; &nbsp; &nbsp; &nbsp; Imprimir();<br />&nbsp; &nbsp; &nbsp; &nbsp; SDL_Delay(10);<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; return 0;<br />}<br /><br />void Imprimir()<br />{<br />&nbsp; &nbsp; SDL_FillRect(pantalla,NULL,0);<br />&nbsp; &nbsp; for (y=0; y&lt;ALTO_MAPA; y++)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; for (x=0; x&lt;ANCHO_MAPA; x++)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (map&#91;y&#93;&#91;x&#93;==0)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.x=0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.y=0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.w=ANCHO_TILE;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.h=ANCHO_TILE;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (map&#91;y&#93;&#91;x&#93;==C)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.x=ANCHO_TILE;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.y=0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.w=ANCHO_TILE*2;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTilesR.h=ANCHO_TILE;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTiles.x=x*ANCHO_TILE-Camara.X;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PosTiles.y=y*ANCHO_TILE-Camara.Y;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (PosTiles.x&gt;=-(ANCHO_TILE)&amp;&amp; PosTiles.x&lt;=200+ANCHO_TILE&amp;&amp;PosTiles.y&gt;=-(ANCHO_TILE)&amp;&amp; PosTiles.y&lt;=200)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SDL_BlitSurface(tiles,&amp;PosTilesR,pantalla,&amp;PosTiles);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; SDL_BlitSurface(Personaje.img,NULL,pantalla,&amp;PosBola);<br />&nbsp; &nbsp; SDL_Flip(pantalla);<br />}<br />void Mover()<br />{<br />&nbsp; &nbsp; PosBola.x=Personaje.x;<br />&nbsp; &nbsp; PosBola.y=Personaje.y;<br /><br />&nbsp; &nbsp; SDL_PumpEvents();<br />&nbsp; &nbsp; tecla=SDL_GetKeyState(NULL);<br /><br />&nbsp; &nbsp; if (tecla&#91;SDLK_ESCAPE&#93;)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; exit(1);<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; ///******************************************///<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; if (tecla&#91;SDLK_UP&#93;)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Camara.Y&gt;0 &amp;&amp; Personaje.y==(200/2)-(Personaje.img-&gt;w/2))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Camara.Y-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (CeldaPersonaje()==C)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Camara.Y+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Personaje.y&gt;(200/2)-(Personaje.img-&gt;w/2) || (Camara.Y==0 &amp;&amp; Personaje.y&gt;0))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.y-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (CeldaPersonaje()==C)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.y+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br /><br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Personaje.y&lt;(200/2)-(Personaje.img-&gt;h/2)&amp;&amp;Camara.Y!=0)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.y=(200/2)-(Personaje.img-&gt;h/2);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; if (tecla&#91;SDLK_DOWN&#93;)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Camara.Y&lt;LAT_INFERIOR-200 &amp;&amp; Personaje.y==(200/2)-(Personaje.img-&gt;w/2))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Camara.Y+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (CeldaPersonaje()==C)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Camara.Y-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Personaje.y&lt;(200/2)-(Personaje.img-&gt;w/2)||(Camara.Y==LAT_INFERIOR-200 &amp;&amp; Personaje.y&lt;200-(Personaje.img-&gt;h)))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.y+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (CeldaPersonaje()==C)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.y-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Personaje.y&gt;(200/2)-(Personaje.img-&gt;h/2)&amp;&amp;Camara.Y==0)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.y=(200/2)-(Personaje.img-&gt;h/2);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; if (tecla&#91;SDLK_LEFT&#93;)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Camara.X&gt;0 &amp;&amp; Personaje.x==(200/2)-(Personaje.img-&gt;w/2))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Camara.X-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (CeldaPersonaje()==C)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Camara.X+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Personaje.x&gt;(200/2)-(Personaje.img-&gt;w/2)||(Camara.X==0 &amp;&amp; Personaje.x&gt;0))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.x-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (CeldaPersonaje()==C)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.x+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Personaje.x&lt;(200/2)-(Personaje.img-&gt;w/2)&amp;&amp;Camara.X!=0)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.x=(200/2)-(Personaje.img-&gt;w/2);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; if (tecla&#91;SDLK_RIGHT&#93;)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Camara.X&lt;LAT_INFERIOR-200 &amp;&amp; Personaje.x==(200/2)-(Personaje.img-&gt;w/2))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Camara.X+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (CeldaPersonaje()==C)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Camara.X-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Personaje.x&lt;(200/2)-(Personaje.img-&gt;w/2)||(Camara.X==LAT_INFERIOR-200 &amp;&amp; Personaje.x&lt;200-(Personaje.img-&gt;h)))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.x+=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (CeldaPersonaje()==C)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.x-=VELOCIDAD;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Personaje.x&gt;(200/2)-(Personaje.img-&gt;w/2)&amp;&amp;Camara.X==0)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Personaje.x=(200/2)-(Personaje.img-&gt;w/2);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; if (Personaje.x+Personaje.img-&gt;w&gt;200)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; Personaje.x=200-Personaje.img-&gt;w;<br />&nbsp; &nbsp; &nbsp; &nbsp; PosBola.x=Personaje.x;<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; if (Personaje.y+Personaje.img-&gt;h&gt;200)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; Personaje.y=200-Personaje.img-&gt;h;<br />&nbsp; &nbsp; &nbsp; &nbsp; PosBola.y=Personaje.y;<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; if (Personaje.x&lt;0)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; Personaje.x=0;<br />&nbsp; &nbsp; &nbsp; &nbsp; PosBola.x=Personaje.x;<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; if (Personaje.y&lt;0)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; Personaje.y=0;<br />&nbsp; &nbsp; &nbsp; &nbsp; PosBola.y=Personaje.y;<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; ///*****************************************///<br /><br /><br />}<br /><br />int CeldaPersonaje()<br />{<br />&nbsp; &nbsp; ///U<br />&nbsp; &nbsp; if (map&#91;(Camara.Y+Personaje.y)/ANCHO_TILE&#93;&#91;(Camara.X+Personaje.x)/ANCHO_TILE&#93;==C)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; return C;<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; if (map&#91;(Camara.Y+Personaje.y)/ANCHO_TILE&#93;&#91;(Camara.X+Personaje.x+(ANCHO_TILE-1))/ANCHO_TILE&#93;==C)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; return C;<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; ///D<br />&nbsp; &nbsp; if (map&#91;(Camara.Y+Personaje.y+(ANCHO_TILE-1))/ANCHO_TILE&#93;&#91;(Camara.X+Personaje.x)/ANCHO_TILE&#93;==C)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; return C;<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; if (map&#91;(Camara.Y+Personaje.y+(ANCHO_TILE-1))/ANCHO_TILE&#93;&#91;(Camara.X+Personaje.x+(ANCHO_TILE-1))/ANCHO_TILE&#93;==C)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; return C;<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; return 0;<br />}<br /><br />void Cargar()<br />{<br />&nbsp; &nbsp; if (SDL_Init(SDL_INIT_VIDEO)&lt;0)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; SDL_GetError() &lt;&lt; endl;<br />&nbsp; &nbsp; &nbsp; &nbsp; exit(1);<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; pantalla=SDL_SetVideoMode(200,200,24,SDL_HWSURFACE|SDL_DOUBLEBUF);<br />&nbsp; &nbsp; if (pantalla==NULL)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; SDL_GetError() &lt;&lt; endl;<br />&nbsp; &nbsp; &nbsp; &nbsp; exit(1);<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; tiles=SDL_LoadBMP(&quot;tiles.bmp&quot;);<br />&nbsp; &nbsp; if (tiles==NULL)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; SDL_GetError() &lt;&lt; endl;<br />&nbsp; &nbsp; &nbsp; &nbsp; exit(1);<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; Personaje.img=SDL_LoadBMP(&quot;pers.bmp&quot;);<br />&nbsp; &nbsp; if (Personaje.img==NULL)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; cerr &lt;&lt; &quot;Error: &quot; &lt;&lt; SDL_GetError() &lt;&lt; endl;<br />&nbsp; &nbsp; &nbsp; &nbsp; exit(1);<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; SDL_SetColorKey(Personaje.img, SDL_SRCCOLORKEY|SDL_RLEACCEL,SDL_MapRGB(Personaje.img-&gt;format, 255, 0, 255));<br />&nbsp; &nbsp; Personaje.x=(200/2)-(Personaje.img-&gt;w/2);<br />&nbsp; &nbsp; Personaje.y=(200/2)-(Personaje.img-&gt;h/2);<br /><br />&nbsp; &nbsp; PosBola.x=(200/2)-(Personaje.img-&gt;w/2);<br />&nbsp; &nbsp; PosBola.y=(200/2)-(Personaje.img-&gt;h/2);<br /><br />&nbsp; &nbsp; Camara.X=LAT_DERECHO-200;<br />&nbsp; &nbsp; Camara.Y=LAT_INFERIOR-200;<br /><br />}<br /></code></dd></dl><br /><br />Gracias a todos.</div>

			

		</div>

		
			<dl class="postprofile" id="profile3939">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=2204.html">RafaG</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 20</dd><dd><strong>Registrado:</strong> Lun Abr 05, 2010 10:57 am</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<form id="viewtopic" method="post" action="viewtopic.php-f=6&amp;t=831&amp;start=0.html">

	<fieldset class="display-options" style="margin-top: 0; ">
		
		<label>Mostrar mensajes previos: <select name="st" id="st"><option value="0" selected="selected">Todos los mensajes</option><option value="1">1 día</option><option value="7">7 días</option><option value="14">2 semanas</option><option value="30">1 mes</option><option value="90">3 meses</option><option value="180">6 meses</option><option value="365">1 año</option></select></label>
		<label>Ordenar por <select name="sk" id="sk"><option value="a">Autor</option><option value="t" selected="selected">Fecha publicación</option><option value="s">Asunto</option></select></label> <label><select name="sd" id="sd"><option value="a" selected="selected">Ascendente</option><option value="d">Descendente</option></select> <input type="submit" name="sort" value="Ir" class="button2" /></label>
		
	</fieldset>

	</form>
	<hr />


<div class="topic-actions">
	<div class="buttons">
	
		<div class="reply-icon"><a href="posting.php-mode=reply&amp;f=6&amp;t=831.html" title="Publicar una respuesta"><span></span>Publicar una respuesta</a></div>
	
	</div>

	
		<div class="pagination">
			11 mensajes
			 &bull; Página <strong>1</strong> de <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="viewforum.php-f=6.html" class="left-box left" accesskey="r">Volver a Sobre las bibliotecas multimedia</a></p>

	<form method="post" id="jumpbox" action="viewforum.php.html" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Saltar a:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Seleccione un Foro</option>
			<option value="-1">------------------</option>
				<option value="15">Proyecto Losersjuegos</option>
			
				<option value="1">&nbsp; &nbsp;Planificación y eventos</option>
			
				<option value="14">&nbsp; &nbsp;Asadetris</option>
			
				<option value="22">Pilas Engine</option>
			
				<option value="23">&nbsp; &nbsp;Anuncios de los desarrolladores</option>
			
				<option value="24">&nbsp; &nbsp;Consultas, problemas o bugs.</option>
			
				<option value="25">&nbsp; &nbsp;Proyectos usando pilas</option>
			
				<option value="26">&nbsp; &nbsp;Sugerencias e ideas</option>
			
				<option value="28">&nbsp; &nbsp;General</option>
			
				<option value="16">Sugerencias, proyectos e ideas</option>
			
				<option value="2">&nbsp; &nbsp;Artículos, traducciones y documentación</option>
			
				<option value="3">&nbsp; &nbsp;Ejemplos</option>
			
				<option value="4">&nbsp; &nbsp;Videojuegos</option>
			
				<option value="12">&nbsp; &nbsp;Propuestas de desarrollo y concursos</option>
			
				<option value="13">&nbsp; &nbsp;Inspiración y otras ideas interesantes</option>
			
				<option value="5">&nbsp; &nbsp;Otros</option>
			
				<option value="17">Consultas</option>
			
				<option value="6" selected="selected">&nbsp; &nbsp;Sobre las bibliotecas multimedia</option>
			
				<option value="7">&nbsp; &nbsp;Instalación de bibliotecas y herramientas</option>
			
				<option value="8">&nbsp; &nbsp;Sobre lenguajes de programación</option>
			
				<option value="9">&nbsp; &nbsp;General</option>
			
				<option value="20">&nbsp; &nbsp;3D</option>
			
				<option value="29">&nbsp; &nbsp;HTML5 y Javascript</option>
			
				<option value="30">&nbsp; &nbsp;Qt y pyqt</option>
			
				<option value="18">Otros</option>
			
				<option value="10">&nbsp; &nbsp;Fuera de tópico</option>
			
				<option value="11">&nbsp; &nbsp;Links interesantes</option>
			
			</select>
			<input type="submit" value="Ir" class="button2" />
		</fieldset>
	</form>


	<h3>¿Quién está conectado?</h3>
	<p>Usuarios navegando por este Foro: No hay usuarios registrados visitando el Foro y 0 invitados</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="index.php.html" accesskey="h">Índice general</a></li>
				
			<li class="rightside"><a href="memberlist.php-mode=leaders.html">El Equipo</a> &bull; <a href="ucp.php-mode=delete_cookies.html">Borrar todas las cookies del Sitio</a> &bull; Todos los horarios son UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>



<div id="pie">

    <ul>
            <li class="contactenos"><a href="../comunidad/contactenos.html">Contáctenos</a></li>
                
                <li class="cc"><a href="http://creativecommons.org/licenses/by-sa/2.5/deed.es">Licencia de uso para el sitio</a></li>

                    <li class="foro"><a href="index.html">Foro de mensajes</a></li>

                        <li class="comunidad"><a href="../comunidad.html">Sobre el grupo ...</a></li>
                    </ul>
                </div>


</div> <!-- borde -->
</div>


<div class="copyright">
Este foro de mensajes funciona gracias al sistema <a href="http://www.phpbb.com/">phpBB</a>
<br/>
Tema visual personalizando por Hugo Ruscitti.
<br/>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	<img src="cron.php-cron_type=tidy_sessions.gif" width="1" height="1" alt="cron" />
</div>

</body>
</html>