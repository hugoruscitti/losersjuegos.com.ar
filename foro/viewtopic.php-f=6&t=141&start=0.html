<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="es" xml:lang="es">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="es" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="copyright" content="2000, 2002, 2005, 2007 phpBB Group" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

<title>LosersJuegos &bull; Ver Tema - SDL - Trabajar con transparencias por índice de paleta</title>

<link rel="alternate" type="application/atom+xml" title="Feed - LosersJuegos" href="feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Nuevos Temas" href="feed-mode=topics.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Foro - Sobre las bibliotecas multimedia" href="feed-f=6.php" /><link rel="alternate" type="application/atom+xml" title="Feed - Tema - SDL - Trabajar con transparencias por índice de paleta" href="feed-f=6&amp;t=141.php" />

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:

	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Introduzca el número de página al que desea saltar:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/; domain=.losersjuegos.com.ar';
	var onload_functions = new Array();
	var onunload_functions = new Array();

	

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<script type="text/javascript" src="styles/prosilver/template/styleswitcher.js"></script>
<script type="text/javascript" src="styles/prosilver/template/forum_fn.js"></script>

<link href="styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="style.php-id=3&amp;lang=en&amp;sid=4ec7bd6b5b400f7171476bb35f8261c6.css" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />




<link href="styles/prosilver/theme/header.css" rel="stylesheet" type="text/css"/>
<link href="styles/prosilver/theme/barrausuario.css" rel="stylesheet" type="text/css"/>
<link href="styles/prosilver/theme/design.css" rel="stylesheet" type="text/css"/>

<link href="styles/prosilver/theme/src/prettify.css" type="text/css" rel="stylesheet" />
<script src="styles/prosilver/theme/src/prettify.js" type="text/javascript"></script>


</head>


<body onload="prettyPrint()" id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
<div id='borde'>

    <div id="cabecera">

        <a href='index.html'><img id='logo1' alt='' src="styles/prosilver/theme/ima_cabecera/logo_1.png" width="286" height="50" name="logo1" /></a>

        <div id="navi">
            <ul>
                <li><a href="../index.html">Web</a></li>
                <li id='actual'><a href="index.html">Foro</a></li>
            </ul>
        </div>

    </div>


<div class='barra_usuario'>
        <ul>
                <li class='regresar'><a href='../index.html'>Regresar a la web</a></li>
                <li class='buscar'><a href="search.php.html">Buscar</a></li>

                
                <li class='registrar'><a href="ucp.php-mode=register.html">Registrarse</a></li>

                <li class='registrar'><a href="ucp.php-mode=login.html">Identificarse</a>
                </li>
                

        </ul>
</div>




	<a name="start_here"></a>
	<div id="page-body">
		<ul style='font-size: 14px' class="linklist">
                    <li class="icon-home"><a href="index.php.html" accesskey="h">Índice general</a></li>
                    </ul>
<h2><a href="viewtopic.php-f=6&amp;t=141&amp;start=0.html">SDL - Trabajar con transparencias por índice de paleta</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">Tratamos sobre el manejo de APIs frecuentemente utilizadas en el desarrollo de videojuegos, como SDL, pygame o SFML.<br /></div>

<div class="topic-actions">

	<div class="buttons">
	
		<div class="reply-icon"><a href="posting.php-mode=reply&amp;f=6&amp;t=141.html" title="Publicar una respuesta"><span></span>Publicar una respuesta</a></div>
	
	</div>

	
		<div class="search-box">
			<form method="post" id="topic-search" action="search.php-t=141.html">
			<fieldset>
				<input class="inputbox search tiny"  type="text" name="keywords" id="search_keywords" size="20" value="Buscar este tema…" onclick="if(this.value=='Buscar este tema…')this.value='';" onblur="if(this.value=='')this.value='Buscar este tema…';" />
				<input class="button2" type="submit" value="Buscar" />
				<input type="hidden" value="141" name="t" />
				<input type="hidden" value="msgonly" name="sf" />
			</fieldset>
			</form>
		</div>
	
		<div class="pagination">
			5 mensajes
			 &bull; Página <strong>1</strong> de <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p467" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="#p467">SDL - Trabajar con transparencias por índice de paleta</a></h3>
			<p class="author"><a href="viewtopic.php-p=467.html#p467"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=1794.html">delaPipol</a></strong> &raquo; Mar Ago 07, 2007 1:03 pm </p>

			

			<div class="content">Hola, que tal! Me llamo Fran y estaba aprendiendo un poco de SDL para un proyecto libre recientemente comenzado. El proyecto se basa en simular el funcionamiento de otro y por ello requiere algunos aspectos un tanto extravagantes como el siguiente, que no sé si alguien se lo habrá encontrado en alguna ocasión:
<br />
<br />A la hora de trabajar con sprites en este proyecto se necesita tratar con imágenes de 8 bit, por tanto utiliza un bloque de paleta y luego un bloque de mapa de bits haciendo referencia a esos valores del índice de paleta (a diferencia de las de color verdadero, que no tienen esa paleta sino que en el propio mapa de bits se define el valor de color por cada &quot;píxel&quot;).
<br />
<br />Así pues, en este caso el formato de píxel es de 8 bit y se puede tratar con la paleta. El problema viene con la transparencia. SDL trata la transparencia por un valor de color (ColorKey) y los archivos de sprite que necesitan leerse tienen definida la transparencia por el índice de paleta.
<br />
<br />En principio con leer el valor de color de ese índice 0 sería suficiente, con algo así como surface-&gt;format-&gt;palette-&gt;colors[0] si no me equivoco.
<br />
<br />El problema viene cuando en esa misma paleta encuentras que por ejemplo el color número 0 de la paleta que será el transparente vale 255,0,255 y el número 43 y el 129 (por decir algunos) también tienen como valor 255,0,255. Eso supone que esos colores también se vean transparentes, por las características del propio SDL.
<br />
<br />La solución al problema de colores duplicados sería aplicar por ejemplo sumarle +1 al componente azul, que es el que menos diferencia percibirán nuestros ojos surface-&gt;format-&gt;palette-&gt;colors[43].b + 1 y si ya vale 255 como en este ejemplo entonces - 1 (quedando 255,0,254). Todo ello se podría meter en un for para que recorriera la paleta entera comparando si el valor RGB del índice 0 coincide con el resto de los 256 colores.
<br />
<br />¿Alguien se ha encontrado con este caso? He mirado en listas de correo y demás y no he encontrado ninguna situación similar.
<br />
<br />Un saludo y suerte!</div>

			<div id="sig467" class="signature">Francisco de la Peña
<br />Jabber ID: <!-- e --><a href="mailto:fdelapena@jabberes.org">fdelapena@jabberes.org</a><!-- e -->
<br /><a href="http://easyrpg.sourceforge.net/" class="postlink">Proyecto EasyRPG: Clon libre de RPG Maker</a></div>

		</div>

		
			<dl class="postprofile" id="profile467">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=1794.html"><img src="download/1794-avatar=1794.png" width="80" height="80" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=1794.html">delaPipol</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 3</dd><dd><strong>Registrado:</strong> Mié Jul 18, 2007 7:59 am</dd><dd><strong>Ubicación:</strong> Barcelona</dd>
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://delapipol.wordpress.com/" title="WWW: http://delapipol.wordpress.com/"><span>Sitio web</span></a></li>
				</ul>
			</dd>
		

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p469" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p469"></a></h3>
			<p class="author"><a href="viewtopic.php-p=469.html#p469"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=8.html">rcaf</a></strong> &raquo; Mar Ago 07, 2007 8:18 pm </p>

			

			<div class="content">Hola:
<br />
<br />Hace varios años atrás trabaje con modos de video a 8 Bits por Pixel, en Allegro y SDL. 
<br />
<br />Creo que la solución  para estos típicos problemas es que todas las imágenes que van a formar una escena, compartan la misma paleta de colores. 
<br />
<br />Solía copiar el fondo y todas los imágenes que usaría en una escena en una imagen nueva con formato RGB (con un tamaño adecuado para que cupieran todas). Luego cuando ya tenía todas las imágenes listas le cambiaba el formato a la imagen a modo indexado (8 bits). 
<br />
<br />En aquellos años ocupé Paint Shop Pro para hacer esta tarea, y también para obtener la paleta de colores en un archivo separado.
<br />
<br />Espero que este método te ayude a solucionar tus problemas. Creo que es mejor que estar haciendo códigos extraños para arreglar los colores.
<br />
<br />Saludos!</div>

			<div id="sig469" class="signature">Roberto Albornoz Figueroa
<br /><a href="http://www.rcafsoft.com/blogrcaf/" class="postlink">Mi Blog</a>
<br /><a href="http://www.rcafsoft.com/blogrcaf/wiki/" class="postlink">Wiki</a></div>

		</div>

		
			<dl class="postprofile" id="profile469">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=8.html"><img src="download/8-avatar=8.jpg" width="64" height="64" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=8.html">rcaf</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 71</dd><dd><strong>Registrado:</strong> Jue Ago 10, 2006 4:35 am</dd><dd><strong>Ubicación:</strong> Concepción, Octava Región. Chile</dd>
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://www.rcafsoft.com/blogrcaf/" title="WWW: http://www.rcafsoft.com/blogrcaf/"><span>Sitio web</span></a></li><li class="icq-icon"><a href="http://www.icq.com/people/webmsg.php?to=163128463" onclick="popup(this.href, 550, 320); return false;" title="ICQ"><span>ICQ</span></a></li>
				</ul>
			</dd>
		

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p473" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p473">¿posible solución?</a></h3>
			<p class="author"><a href="viewtopic.php-p=473.html#p473"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=3.html" style="color: #AA0000;" class="username-coloured">hugoruscitti</a></strong> &raquo; Mié Ago 08, 2007 5:43 pm </p>

			

			<div class="content">Hola Fran, la verdad es que nunca me encontré ante un problema similar y
<br />por ello intenté &quot;reconstruir&quot; el problema que tienes e intenté buscarle una
<br />solución (y creo que la encontré).
<br />
<br />En el siguiente archivo están las pruebas que realicé:
<br />    
<br />    <a href="http://www.losersjuegos.com.ar/incoming/descargas/20070808/transparencias_8bits.tar.gz" class="postlink">http://www.losersjuegos.com.ar/incoming/descargas/20070808/transparencias_8bits.tar.gz</a>
<br />
<br />Cuando extraigas el contenido del archivo encontrarás dos directorios, uno se
<br />llama &quot;problema&quot;, en donde se almacena una imagen que tiene el problema que nos
<br />indicas, a saber:
<br />
<br />La imagen original se encuentra en 8 bits, por lo tanto cada &quot;pixel&quot; de la
<br />imagen es, en realidad, un número que identifica la tonalidad de color de ese
<br />pixel. Esta imagen almacena una paleta de colores también.
<br />
<br />El problema de este ejemplo llega al querer indicarle a SDL que nuestro color de
<br />transparencia será el color de índice 0 en la paleta. SDL nos permite definir el
<br />color de transparencia mediante la función SDL_SetColorKey, aunque esta función
<br />admite como parámetros las componentes del color que buscamos &quot;hacer
<br />transparente&quot;, en lugar de su posición el la paleta de colores.
<br />
<br />Lamentablemente, esta imagen que he utilizado como prueba, tiene repetidos
<br />algunos colores:
<br />
<br />    <img src="http://www.losersjuegos.com.ar/incoming/descargas/20070808/diagrama_problema.png" alt="Imagen" />
<br />
<br />el color de índice 0 en la paleta es idéntico al color ubicado en la posición
<br />63, 64. Todos estos colores tienen las componentes (r=255, g=255, b=255), por lo
<br />tanto si construyes una rutina como la siguiente, buscando definir como
<br />&quot;transparente&quot; el color de índice 0:
<br />    
<br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>indice_0 = tmp-&gt;format-&gt;palette-&gt;colors&#91;0&#93;;<br />colorkey = SDL_MapRGB&#40;ima-&gt;format, indice_0.r, indice_0.g, indice_0.b&#41;;</code></dd></dl>
<br />
<br />SDL hará transparentes todos los píxeles cuyas componentes sean idénticas al
<br />color de índice 0 de tu paleta. Para este ejemplo, obtendrías algo como lo
<br />siguiente:
<br />
<br /><img src="http://www.losersjuegos.com.ar/incoming/descargas/20070808/problema.png" alt="Imagen" />
<br />
<br />
<br />he buscado en la documentación de SDL y no encontré una función similar a
<br />SDL_SetColorKey para imágenes de 8 bits, tal vez exista, pero no la he
<br />encontrado. En su lugar escribí una rutina que podría servirte para adaptar
<br />estas imágenes al juego y poder asignarles un color de transparencia, siguiendo
<br />los procedimientos que nos indicas en tu primer mensajes, es decir, alterar
<br />aquellos colores que tiene la mismas componentes de color que el color 0 de la
<br />paleta. 
<br />
<br />Encontrarás esta rutina de código en el directorio &quot;posible_solucion&quot; del 
<br />archivo que cité anteriormente.
<br />
<br />Y en pantalla quedaría de la siguiente manera:
<br />    
<br />    <img src="http://www.losersjuegos.com.ar/incoming/descargas/20070808/posible_solucion.png" alt="Imagen" />
<br />
<br />Saludos y buena suerte con el juego.
<br />
<br />edito: utilicé incorrectamente la etiqueta &quot;code&quot; en la primer 
<br />publicación...</div>

			<div id="sig473" class="signature">Hugo Ruscitti
<br /><!-- w --><a class="postlink" href="http://www.losersjuegos.com.ar">www.losersjuegos.com.ar</a><!-- w --></div>

		</div>

		
			<dl class="postprofile" id="profile473">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=3.html"><img src="download/3-avatar=3_1295438267.jpg" width="80" height="80" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=3.html" style="color: #AA0000;" class="username-coloured">hugoruscitti</a>
			</dt>

			<dd>Site Admin</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 1242</dd><dd><strong>Registrado:</strong> Dom Jul 30, 2006 3:57 am</dd><dd><strong>Ubicación:</strong> Buenos Aires, Argentina</dd>
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://www.losersjuegos.com.ar" title="WWW: http://www.losersjuegos.com.ar"><span>Sitio web</span></a></li>
				</ul>
			</dd>
		

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p475" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p475"></a></h3>
			<p class="author"><a href="viewtopic.php-p=475.html#p475"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=6.html">Geo</a></strong> &raquo; Mié Ago 08, 2007 10:18 pm </p>

			

			<div class="content">No he revisado la propuesta de Hugo (que me parece da muy buen resultado), lo otro que se me ocurre es, reescribir la función SDL_Blit para el caso de superficies de 8 bits, de manera que tome la transparencia del primer índice en la paleta y no de la estructura SDL_BlitInfo.
<br />
<br />No estoy seguro, pero me parece que el código se encuentra en el archivo <span style="font-weight: bold">SDL_blit_0.c</span>, en la función <span style="font-weight: bold">BlitBto1Key</span>
<br />
<br />En lugar de esto:
<br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>static void BlitBto1Key&#40;SDL_BlitInfo *info&#41; &#123;<br />// ...<br />&nbsp; Uint32 ckey = info-&gt;src-&gt;colorkey;<br />// ...<br />&nbsp; Uint8 *palmap = info-&gt;table;<br />// ...<br />&#125;<br /></code></dd></dl><br />algo como esto:<br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>static void BlitBto1Key&#40;SDL_BlitInfo *info&#41; &#123;<br />// ...<br />&nbsp; Uint8 *palmap = info-&gt;table;<br />&nbsp; Uint32 ckey = palmap&#91; 0 &#93;;<br />&nbsp; // o por si alguien se queja de pasar un Uint8 a un Uint32 :P<br />&nbsp; // Uint32 ckey = 0x000f &amp; palmap&#91; 0 &#93;;<br />// ...<br />&#125;<br /></code></dd></dl><br />---------------------<br />Edit:<br />nop, no sería así, sería modificar esta parte de la misma función:<br /><dl class="codebox"><dt>Código: <a href="#" onclick="selectCode(this); return false;">Seleccionar todo</a></dt><dd><code>if &#40; palmap &#41; &#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;while &#40; height-- &#41; &#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; Uint8&nbsp; byte = 0, bit;<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;for &#40; c=0; c&lt;width; ++c &#41; &#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if &#40; &#40;c&amp;7&#41; == 0 &#41; &#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;byte = *src++;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&#125;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;bit = &#40;byte&amp;0x80&#41;&gt;&gt;7;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if &#40; bit != ckey &#41; &#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; *dst = palmap&#91;bit&#93;;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&#125;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;dst++;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;byte &lt;&lt;= 1;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&#125;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;src += srcskip;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;dst += dstskip;<br />&nbsp; &nbsp;&nbsp; &nbsp;&#125;<br /></code></dd></dl>
<br />
<br />Por cierto delaPipol, ¡ánimo con ese proyecto <img src="images/smilies/icon_smile.gif" alt=":)" title="Smile" />! Ojalá pueda participar de alguna forma, lamentablemente estoy ahorcado de tiempo para escribir código <img src="images/smilies/icon_razz.gif" alt=":P" title="Razz" />.</div>

			<div id="sig475" class="signature">La imaginación es el límite.<br />Visita <a href="http://hsblog.mexchip.com" class="postlink">mi blog</a> en inglés o <a href="http://hsblog.mexchip.com/es/" class="postlink">en español</a>.</div>

		</div>

		
			<dl class="postprofile" id="profile475">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=6.html">Geo</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 244</dd><dd><strong>Registrado:</strong> Jue Ago 10, 2006 3:51 am</dd><dd><strong>Ubicación:</strong> México</dd>
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://hsblog.mexchip.com" title="WWW: http://hsblog.mexchip.com"><span>Sitio web</span></a></li>
				</ul>
			</dd>
		

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p481" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="#p481"></a></h3>
			<p class="author"><a href="viewtopic.php-p=481.html#p481"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Nota" title="Nota" /></a>por <strong><a href="memberlist.php-mode=viewprofile&amp;u=1794.html">delaPipol</a></strong> &raquo; Mar Ago 14, 2007 8:13 am </p>

			

			<div class="content">Impresionante, era exactamente lo que decía Hugo <img src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />. He probado el código y funciona a la perfección. Sobre el color que se comenta en los comentarios de sumar y restar 1 en vez de 8 al color azul a 32 bits funciona, tal y como se sospechaba. Parece que a 16 bits hace la distinción de colores cada 4 tonos (edito: según cierta documentación sigue el esquema RGB565) y por tanto el incremento o decremento de 8 lo hace seguro <img src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />. En el código creaba una surface de 8 bits de profundidad donde trabajar luego con la surface de la imagen y tampoco hubo ningún problema. Quien quiera ojear el resultado que acceda por Subversion a <!-- m --><a class="postlink" href="http://easyrpg.svn.sourceforge.net/viewvc/easyrpg/trunk/player/">http://easyrpg.svn.sourceforge.net/view ... nk/player/</a><!-- m --> (este es el enlace a la interfaz web viewc)
<br />
<br /><blockquote><div><cite>rcaf escribió:</cite>Creo que la solución para estos típicos problemas es que todas las imágenes que van a formar una escena, compartan la misma paleta de colores.</div></blockquote>Así es, con tener la paleta en condiciones con un colorkey común se solucionaría sin tanta complicación, pero como dije el problema es que se intenta simular otro sistema existente donde las imágenes ya vienen creadas. De hecho esta parte del proyecto intenta ser una especie de &quot;emulador&quot; como ScummVM pero en este caso de juegos creados con RPG Maker 2000 y por ello la necesidad explícita de adaptarse a sus peculiaridades.<br /><br /><blockquote><div><cite>Geo escribió:</cite>No he revisado la propuesta de Hugo (que me parece da muy buen resultado), lo otro que se me ocurre es, reescribir la función SDL_Blit para el caso de superficies de 8 bits, de manera que tome la transparencia del primer índice en la paleta y no de la estructura SDL_BlitInfo.</div></blockquote>Más adelante se podría reabrir el <a href="http://www.easy-rpg.com/bugs/index.php?do=details&amp;task_id=1" class="postlink">bug</a> para hacer más eficiente la asignación de la transparencia, de todas formas se podría mandar un parche (es que yo ya me traumé de darle tantas vueltas al mismo bug <img src="images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> y me gustaría centrarme en avanzar la lectura de los mapeados para darle vitalidad al proyecto).<br /><img src="http://img183.imageshack.us/img183/4360/downloadyu1.png" alt="Imagen" /><br /><blockquote><div><cite>Geo escribió:</cite>Por cierto delaPipol, ¡ánimo con ese proyecto <img src="images/smilies/icon_smile.gif" alt=":)" title="Smile" />! Ojalá pueda participar de alguna forma, lamentablemente estoy ahorcado de tiempo para escribir código <img src="images/smilies/icon_razz.gif" alt=":P" title="Razz" />.</div></blockquote>Muchísimas gracias <img src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />, ya sabes que cuando quieras tener escritura en svn en el proyecto hazlo saber <img src="images/smilies/icon_wink.gif" alt=";)" title="Wink" />. Muchas personas que se interesaron por RPG Maker en el pasado ahora lo han hecho con la programación, y la estrategia de este proyecto es poder atraer más &quot;cantera&quot; de talentos al mundo del software libre, donde podrían portar sus proyectos a más sistemas y plataformas <img src="images/smilies/icon_wink.gif" alt=":wink:" title="Wink" />.
<br />
<br />
<br />Pues muchísimas gracias Hugo por una explicación tan clara y didáctica, ojalá resulte útil a muchas más personas esta solución. Ya conseguí anteriormente por mi cuenta hacer la primera parte, pero luego ni me imaginaría que a 16 bit daría problemas sumándole tan solo 1 luego. Agradezco enormemente el apoyo, espero estar al nivel de poder responder cuestiones por esta comunidad. ¡Saludos! <img src="images/smilies/icon_wink.gif" alt=";)" title="Wink" /></div>

			<div id="sig481" class="signature">Francisco de la Peña
<br />Jabber ID: <!-- e --><a href="mailto:fdelapena@jabberes.org">fdelapena@jabberes.org</a><!-- e -->
<br /><a href="http://easyrpg.sourceforge.net/" class="postlink">Proyecto EasyRPG: Clon libre de RPG Maker</a></div>

		</div>

		
			<dl class="postprofile" id="profile481">
			<dt>
				<a href="memberlist.php-mode=viewprofile&amp;u=1794.html"><img src="download/1794-avatar=1794.png" width="80" height="80" alt="Avatar de Usuario" /></a><br />
				<a href="memberlist.php-mode=viewprofile&amp;u=1794.html">delaPipol</a>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Mensajes:</strong> 3</dd><dd><strong>Registrado:</strong> Mié Jul 18, 2007 7:59 am</dd><dd><strong>Ubicación:</strong> Barcelona</dd>
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://delapipol.wordpress.com/" title="WWW: http://delapipol.wordpress.com/"><span>Sitio web</span></a></li>
				</ul>
			</dd>
		

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Arriba">Arriba</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<form id="viewtopic" method="post" action="viewtopic.php-f=6&amp;t=141&amp;start=0.html">

	<fieldset class="display-options" style="margin-top: 0; ">
		
		<label>Mostrar mensajes previos: <select name="st" id="st"><option value="0" selected="selected">Todos los mensajes</option><option value="1">1 día</option><option value="7">7 días</option><option value="14">2 semanas</option><option value="30">1 mes</option><option value="90">3 meses</option><option value="180">6 meses</option><option value="365">1 año</option></select></label>
		<label>Ordenar por <select name="sk" id="sk"><option value="a">Autor</option><option value="t" selected="selected">Fecha publicación</option><option value="s">Asunto</option></select></label> <label><select name="sd" id="sd"><option value="a" selected="selected">Ascendente</option><option value="d">Descendente</option></select> <input type="submit" name="sort" value="Ir" class="button2" /></label>
		
	</fieldset>

	</form>
	<hr />


<div class="topic-actions">
	<div class="buttons">
	
		<div class="reply-icon"><a href="posting.php-mode=reply&amp;f=6&amp;t=141.html" title="Publicar una respuesta"><span></span>Publicar una respuesta</a></div>
	
	</div>

	
		<div class="pagination">
			5 mensajes
			 &bull; Página <strong>1</strong> de <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="viewforum.php-f=6.html" class="left-box left" accesskey="r">Volver a Sobre las bibliotecas multimedia</a></p>

	<form method="post" id="jumpbox" action="viewforum.php.html" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Saltar a:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Seleccione un Foro</option>
			<option value="-1">------------------</option>
				<option value="15">Proyecto Losersjuegos</option>
			
				<option value="1">&nbsp; &nbsp;Planificación y eventos</option>
			
				<option value="14">&nbsp; &nbsp;Asadetris</option>
			
				<option value="22">Pilas Engine</option>
			
				<option value="23">&nbsp; &nbsp;Anuncios de los desarrolladores</option>
			
				<option value="24">&nbsp; &nbsp;Consultas, problemas o bugs.</option>
			
				<option value="25">&nbsp; &nbsp;Proyectos usando pilas</option>
			
				<option value="26">&nbsp; &nbsp;Sugerencias e ideas</option>
			
				<option value="28">&nbsp; &nbsp;General</option>
			
				<option value="16">Sugerencias, proyectos e ideas</option>
			
				<option value="2">&nbsp; &nbsp;Artículos, traducciones y documentación</option>
			
				<option value="3">&nbsp; &nbsp;Ejemplos</option>
			
				<option value="4">&nbsp; &nbsp;Videojuegos</option>
			
				<option value="12">&nbsp; &nbsp;Propuestas de desarrollo y concursos</option>
			
				<option value="13">&nbsp; &nbsp;Inspiración y otras ideas interesantes</option>
			
				<option value="5">&nbsp; &nbsp;Otros</option>
			
				<option value="17">Consultas</option>
			
				<option value="6" selected="selected">&nbsp; &nbsp;Sobre las bibliotecas multimedia</option>
			
				<option value="7">&nbsp; &nbsp;Instalación de bibliotecas y herramientas</option>
			
				<option value="8">&nbsp; &nbsp;Sobre lenguajes de programación</option>
			
				<option value="9">&nbsp; &nbsp;General</option>
			
				<option value="20">&nbsp; &nbsp;3D</option>
			
				<option value="29">&nbsp; &nbsp;HTML5 y Javascript</option>
			
				<option value="30">&nbsp; &nbsp;Qt y pyqt</option>
			
				<option value="18">Otros</option>
			
				<option value="10">&nbsp; &nbsp;Fuera de tópico</option>
			
				<option value="11">&nbsp; &nbsp;Links interesantes</option>
			
			</select>
			<input type="submit" value="Ir" class="button2" />
		</fieldset>
	</form>


	<h3>¿Quién está conectado?</h3>
	<p>Usuarios navegando por este Foro: No hay usuarios registrados visitando el Foro y 1 invitado</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="index.php.html" accesskey="h">Índice general</a></li>
				
			<li class="rightside"><a href="memberlist.php-mode=leaders.html">El Equipo</a> &bull; <a href="ucp.php-mode=delete_cookies.html">Borrar todas las cookies del Sitio</a> &bull; Todos los horarios son UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>



<div id="pie">

    <ul>
            <li class="contactenos"><a href="../comunidad/contactenos.html">Contáctenos</a></li>
                
                <li class="cc"><a href="http://creativecommons.org/licenses/by-sa/2.5/deed.es">Licencia de uso para el sitio</a></li>

                    <li class="foro"><a href="index.html">Foro de mensajes</a></li>

                        <li class="comunidad"><a href="../comunidad.html">Sobre el grupo ...</a></li>
                    </ul>
                </div>


</div> <!-- borde -->
</div>


<div class="copyright">
Este foro de mensajes funciona gracias al sistema <a href="http://www.phpbb.com/">phpBB</a>
<br/>
Tema visual personalizando por Hugo Ruscitti.
<br/>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	<img src="cron.php-cron_type=tidy_sessions.gif" width="1" height="1" alt="cron" />
</div>

</body>
</html>