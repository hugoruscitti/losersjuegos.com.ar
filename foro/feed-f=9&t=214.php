<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="es">
<link rel="self" type="application/atom+xml" href="http://losersjuegos.com.ar/foro/feed.php?f=9&amp;t=214" />

<title>LosersJuegos</title>
<subtitle>Desarrollando videojuegos libres</subtitle>
<link href="http://losersjuegos.com.ar/foro/index.php" />
<updated>2007-12-20T15:05:29+00:00</updated>

<author><name><![CDATA[LosersJuegos]]></name></author>
<id>http://losersjuegos.com.ar/foro/feed.php?f=9&amp;t=214</id>
<entry>
<author><name><![CDATA[maije]]></name></author>
<updated>2007-12-20T15:05:29+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=214&amp;p=778#p778</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=214&amp;p=778#p778"/>
<title type="html"><![CDATA[comportamiento extraño del SDL_GetKeyState]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=214&amp;p=778#p778"><![CDATA[
muchas gracias<br /><br />efectivamente. encontre el error esta mañana comparando mi codigo con otro programa de ejemplo de esta veb, precisamente hecho por ti: Car.exe, y ya lo cambie. ahora estoy preparando el juego orientadolo a objetos un poco mas bonito y con la deteccion de colisiones ya implementada y el intercambio del grafico del avion por uno de explosion, un numero n de aviones enemigos al tiempo en pantalla, etc... todavia me falta la parte de animaciones internas  de los graficos, que de momento son estaticos, el movimiento de los aviones y la generacion de mapas aleatorios por los que transcurra el juego. cuando termine de implementarlo bien, pegare en la web el codigo para que entre todos podamos refinarlo un poco y si quereis colgarlo como ejemplo, estara a vuestra disposicion. <br /><br />gracias de nuevo y un saludo<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=1862">maije</a> — Jue Dic 20, 2007 3:05 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rcaf]]></name></author>
<updated>2007-12-20T02:26:20+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=214&amp;p=775#p775</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=214&amp;p=775#p775"/>
<title type="html"><![CDATA[comportamiento extraño del SDL_GetKeyState]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=214&amp;p=775#p775"><![CDATA[
Hola:<br /><br />Primero una aclaración, sí estas usando la SDL_image, ya que llamas a la función IMG_Load. Por lo tanto si hay que enlazar la biblioteca SDL_image. <br /><br />El problema se debe a que estás cambiando la posición del avión dentro del loop de eventos.<br /><br />Te dejo el código revisado, modificado y funcionando. Elimine algunas lineas de código y reoderné otras.<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code>#include &lt;stdio.h&gt;<br />#include &lt;stdlib.h&gt;<br />#include &lt;SDL.h&gt;<br /><br />#define SCREEN_HEIGHT 600<br />#define SCREEN_WIDTH 800<br />#define COLOR_DEPTH 24<br />#define VELOCIDAD 4<br /><br />int main&#40;int argc, char *argv&#91;&#93;&#41; <br />&#123;<br />   SDL_Surface *image, *screen;<br />   SDL_Rect dest;<br />   SDL_Event evento;<br />   int done = 0;<br />   Uint8 *keys;<br /><br />   atexit&#40;SDL_Quit&#41;;<br /><br />   // Iniciar SDL<br />   if &#40;SDL_Init&#40;SDL_INIT_VIDEO&#41; &lt; 0&#41; <br />   &#123;<br />      printf&#40;&quot;No se pudo iniciar SDL: %s\n&quot;,SDL_GetError&#40;&#41;&#41;;<br />      exit&#40;1&#41;;<br />   &#125;<br /><br />   // Activamos modo de video<br />   screen = SDL_SetVideoMode&#40;SCREEN_WIDTH, SCREEN_HEIGHT, COLOR_DEPTH, SDL_HWSURFACE&#41;;<br />   if &#40;screen == NULL&#41; <br />   &#123;<br />      printf&#40;&quot;No se puede inicializar el modo gráfico: \n&quot;,SDL_GetError&#40;&#41;&#41;;<br />      exit&#40;1&#41;;<br />   &#125;<br /><br />   // Cargamos gráfico<br />   image = SDL_LoadBMP&#40;&quot;images\\avion.bmp&quot;&#41;;<br />   if &#40; image == NULL &#41; <br />   &#123;<br />      printf&#40;&quot;No pude cargar gráfico: %s\n&quot;, SDL_GetError&#40;&#41;&#41;;<br />      exit&#40;1&#41;;<br />   &#125;<br /><br />   //Quitamos el color de trasparencia<br />   SDL_SetColorKey&#40;image, SDL_SRCCOLORKEY|SDL_RLEACCEL, SDL_MapRGB&#40;image-&gt;format,255,0,0&#41;&#41;;<br /><br />   // Definimos donde dibujaremos el gráfico y lo copiamos a la pantalla.<br />   dest.x = &#40;SCREEN_WIDTH / 2&#41; - &#40;image-&gt;w / 2&#41;;<br />   dest.y = &#40;SCREEN_HEIGHT / 2&#41; - &#40;image-&gt;h / 2&#41;;<br />   dest.w = image-&gt;w;<br />   dest.h = image-&gt;h;<br /><br />   //bucle de espera activo<br />   while&#40;done == 0&#41; <br />   &#123;      <br />      //Bucle de espera inactivo<br />      while &#40; SDL_PollEvent&#40;&amp;evento&#41; &#41; <br />      &#123;<br />           if&#40;evento.type == SDL_QUIT&#41; done=1;<br />      &#125;<br />      <br />      keys=SDL_GetKeyState&#40;NULL&#41;;<br /><br />      if &#40;keys&#91;SDLK_ESCAPE&#93;&#41; done=1;<br />     <br />      if &#40;keys&#91;SDLK_UP&#93;&#41; dest.y -= VELOCIDAD; <br />      if &#40;keys&#91;SDLK_DOWN&#93;&#41; dest.y += VELOCIDAD;<br />      if &#40;keys&#91;SDLK_LEFT&#93;&#41; dest.x -= VELOCIDAD; <br />      if &#40;keys&#91;SDLK_RIGHT&#93;&#41; dest.x += VELOCIDAD;<br /><br />      // Limpiamos la pantalla<br />      SDL_FillRect&#40;screen, 0, 0&#41;;<br />      <br />      //Copiamos la imagen a la pantalla oculta en el doble buffer<br />      SDL_BlitSurface&#40;image, NULL, screen, &amp;dest&#41;;<br /><br />      //Intercambiamos las pantallas, la dibujada y la obsoleta<br />      SDL_Flip&#40;screen&#41;;<br />   &#125;<br />   <br />   // liberar superficie<br />   SDL_FreeSurface&#40;image&#41;;<br />   <br />   return 1;<br />&#125;<br /><br /></code></dd></dl><br /><br />Saludos!<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=8">rcaf</a> — Jue Dic 20, 2007 2:26 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[maije]]></name></author>
<updated>2007-12-19T17:48:47+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=214&amp;p=773#p773</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=214&amp;p=773#p773"/>
<title type="html"><![CDATA[comportamiento extraño del SDL_GetKeyState]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=214&amp;p=773#p773"><![CDATA[
hola a todos<br />tengo el siguiente problema: estoy haciendo un juego tipico de avioncitos y resulta que quiero que los avioncitos se muevan en diagonal y que el programa reconozca varias teclas pulsadas al tiempo. pues bien, la unica forma que he encontrado para hacerlo es &quot;sacando una foto al teclado&quot; con su estado actual y que me diga si una tecla esta apretada o no lo esta, en cada caso, incremento o decremento una variable y asi se mueve todo bonito.<br />el problema es que cuando pulso una tecla, despues otra direccion y suelto la ultima direccion, se me queda parado en vez de seguir moviendose en la direccion del principio, me explico con un ejemplo:<br /><br />si pulso [derecha, arriba] se mueve en diagonal superior derecha<br />si pulso [izquierda, abajo] se mueve en diagonal inferior izquierda<br />si pulso [izquierda, abajo, suelto abajo] deberia moverse en diagonal inferior izquierda y luego seguir moviendose a la izquierda no??? pues no, se queda parado.<br />si pulso [izquierda, abajo, suelto izquierda] se mueve en diagonal inferior izquierda y luego sigue hacia abajo con normalidad, atendiendo a la orden que he dado. <br /><br />no se si se ha entendido bien, el caso general es que si presiono una tecla y luego otra, se mueve en diagonal, pero al soltar la segunda que aprete para seguir con mi movimiento, se detiene. esto no pasa si presiono una tecla, luego otra y luego suelto la primera que presione...que se mueve correctamente en la direccion de la segunda.<br /><br />aqui os pego mi codigo a ver si encontrais el fallo: <br /><br /><dl class="codebox"><dt>Code: </dt><dd><code>#include &lt;stdio.h&gt;<br />#include &lt;stdlib.h&gt;<br />#include &lt;SDL.h&gt;<br />#include &lt;SDL_image.h&gt;<br /><br />#define SCREEN_HEIGHT 600<br />#define SCREEN_WIDTH 800<br />#define COLOR_DEPTH 24<br />#define VELOCIDAD 4<br /><br />int main&#40;int argc, char *argv&#91;&#93;&#41; &#123;<br />   SDL_Surface *image, *screen;<br />   SDL_Rect dest, anterior;<br />   SDL_Event evento;<br />   int done = 0;<br />   Uint8 *keys;<br /><br />   atexit&#40;SDL_Quit&#41;;<br /><br />   // Iniciar SDL<br />   if &#40;SDL_Init&#40;SDL_INIT_VIDEO&#41; &lt; 0&#41; &#123;<br />      printf&#40;&quot;No se pudo iniciar SDL: %s\n&quot;,SDL_GetError&#40;&#41;&#41;;<br />      exit&#40;1&#41;;<br />   &#125;<br /><br />   // Activamos modo de video<br />   screen = SDL_SetVideoMode&#40;SCREEN_WIDTH, SCREEN_HEIGHT, COLOR_DEPTH, SDL_HWSURFACE&#41;;<br />   if &#40;screen == NULL&#41; &#123;<br />      printf&#40;&quot;No se puede inicializar el modo gráfico: \n&quot;,SDL_GetError&#40;&#41;&#41;;<br />      exit&#40;1&#41;;<br />   &#125;<br /><br />   // Cargamos gráfico<br />   image = IMG_Load&#40;&quot;images\\avion.bmp&quot;&#41;;<br />   if &#40; image == NULL &#41; &#123;<br />      printf&#40;&quot;No pude cargar gráfico: %s\n&quot;, SDL_GetError&#40;&#41;&#41;;<br />      exit&#40;1&#41;;<br />   &#125;<br /><br />   //Permitimos el uso de teclas presionadas<br />   SDL_EnableKeyRepeat&#40;10, 10&#41;;<br /><br />   //Quitamos el color de trasparencia<br />   SDL_SetColorKey&#40;image, SDL_SRCCOLORKEY|SDL_RLEACCEL, SDL_MapRGB&#40;image-&gt;format,255,0,0&#41;&#41;;<br /><br />   // Definimos donde dibujaremos el gráfico y lo copiamos a la pantalla.<br />   dest.x = &#40;SCREEN_WIDTH / 2&#41; - &#40;image-&gt;w / 2&#41;;<br />   dest.y = &#40;SCREEN_HEIGHT / 2&#41; - &#40;image-&gt;h / 2&#41;;<br />   dest.w = image-&gt;w;<br />   dest.h = image-&gt;h;<br /><br />   //Copiamos la imagen a la pantalla oculta en el doble buffer<br />   SDL_BlitSurface&#40;image, NULL, screen, &amp;dest&#41;;<br />   <br />   // Mostramos la pantalla<br />   SDL_Flip&#40;screen&#41;;<br /><br />   //bucle de espera activo<br />   while&#40;done == 0&#41; &#123;<br />      <br />      //Bucle de espera inactivo<br />      while &#40; SDL_PollEvent&#40;&amp;evento&#41; &#41; &#123;<br />         if &#40; evento.type == SDL_KEYDOWN &#41; &#123;//|| evento.type == SDL_KEYUP&#41; &#123;<br />            SDL_FillRect&#40;screen,&amp;dest,SDL_MapRGB&#40;screen-&gt;format,0,0,0&#41;&#41;;<br />            keys=SDL_GetKeyState&#40;NULL&#41;;<br />            //aqui esta el conflicto. la impresion de 1 y 0 lo hace bien<br />printf&#40;&quot;arriba:%i\nabajo:%i\nderecha:%i\nizquierda:%i\n&quot;,keys&#91;SDLK_UP&#93;,keys&#91;SDLK_DOWN&#93;,keys&#91;SDLK_RIGHT&#93;,keys&#91;SDLK_LEFT&#93;&#41;;<br />            if &#40;keys&#91;SDLK_UP&#93; == 1&#41; &#123;dest.y -= VELOCIDAD;&#125;<br />            if &#40;keys&#91;SDLK_DOWN&#93; == 1&#41; &#123;dest.y += VELOCIDAD;&#125;<br />            if &#40;keys&#91;SDLK_LEFT&#93; == 1&#41; &#123;dest.x -= VELOCIDAD;&#125;<br />            if &#40;keys&#91;SDLK_RIGHT&#93; == 1&#41; &#123;dest.x += VELOCIDAD;&#125;<br />            <br />            switch &#40;evento.key.keysym.sym&#41; &#123;<br />               case SDLK_ESCAPE:<br />                  done = 1;<br />                  break;<br />            &#125;<br /><br />         &#125;   <br />      &#125;<br /><br />      //Copiamos la imagen a la pantalla oculta en el doble buffer<br />      SDL_BlitSurface&#40;image, NULL, screen, &amp;dest&#41;;<br />      //Intercambiamos las pantallas, la dibujada y la obsoleta<br />      SDL_Flip&#40;screen&#41;;<br />   &#125;<br />   <br />   // liberar superficie<br />   SDL_FreeSurface&#40;image&#41;;<br />   <br />   return 1;<br />&#125;</code></dd></dl><br /><br />**NOTA: de momento solo estoy usando C a pelo<br /><br />para que este codigo funcione teneis que agregar las librerias, la dll y al carpeta include de SDL (no hace falta incluir la SDL_image porque todavia no cargo mas que un bmp aunque aparezca incluida en mi codigo). tambien debeis tener una carpeta en el directorio de vuestro proyecto llamada image que contenga avion.bmp<br /><br />muchas gracias de antemano<br />atentamente<br />maije<p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=1862">maije</a> — Mié Dic 19, 2007 5:48 pm</p><hr />
]]></content>
</entry>
</feed>