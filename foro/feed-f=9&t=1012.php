<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="es">
<link rel="self" type="application/atom+xml" href="http://losersjuegos.com.ar/foro/feed.php?f=9&amp;t=1012" />

<title>LosersJuegos</title>
<subtitle>Desarrollando videojuegos libres</subtitle>
<link href="http://losersjuegos.com.ar/foro/index.php" />
<updated>2011-01-18T06:41:24+00:00</updated>

<author><name><![CDATA[LosersJuegos]]></name></author>
<id>http://losersjuegos.com.ar/foro/feed.php?f=9&amp;t=1012</id>
<entry>
<author><name><![CDATA[shackra]]></name></author>
<updated>2011-01-18T06:41:24+00:00</updated>
<id>http://losersjuegos.com.ar/foro/viewtopic.php?t=1012&amp;p=4778#p4778</id>
<link href="http://losersjuegos.com.ar/foro/viewtopic.php?t=1012&amp;p=4778#p4778"/>
<title type="html"><![CDATA[una ayudadita con la animacion?]]></title>

<content type="html" xml:base="http://losersjuegos.com.ar/foro/viewtopic.php?t=1012&amp;p=4778#p4778"><![CDATA[
hola! <img src="http://losersjuegos.com.ar/foro/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><br /><br />sucede que estoy trabajando en el ejemplo6 sobre el uso de PySFML, actualmente hice una clase  a partir de la clase sf.Sprite para trabajar con la animacion y no hacerme bolas... pero, veo que la animacion no es muy... suave que digamos, y bueno, tampoco conozco tecnicas de animacion competentes :-/ (en realidad, este es mi primer proyecto donde hago sprites y los animo mientras se mueven...). aqui les dejo el codigo:<br /><br />no olviden bajar la imagen si quieren correr el juego...<br /><img src="http://www.spriters-resource.com/genesis/doraemonyd7nng/doraemon.png" alt="Imagen" /><br /><br /><dl class="codebox"><dt>Code: </dt><dd><code>from PySFML import sf<br />import random, os<br /><br />class MySprite(sf.Sprite):<br />    &quot;&quot;&quot; extendemos la clase sf.Sprite para dotarla de nuevos atributos y<br />    funciones que necesitamos para trabajar mas comodamente con los personajes<br />    de nuestro juego.<br />    &quot;&quot;&quot;<br />    # para este ejemplo solo moveremos la imagen cuando las teclas derecha e <br />    # izquierda son pulsadas<br />    # en este ejemplo animaremos el personaje mientras lo movemos, lo haremos <br />    # de manera sencilla...<br />    <br />    def __init__(self):<br />        # intentemos usar la clase sf.self.... cargamos una imagen<br />        self.imagen  = sf.Image()<br />        self.imagen.LoadFromFile(&quot;doraemon.png&quot;)<br />        # asignamos una imagen al Sprite<br />        sf.Sprite.__init__(self, self.imagen)<br />        # ponemos el Sprite a la mitad de la pantalla<br />        self.SetX(400)<br />        self.SetY(150)<br />        # creamos unos atributos que nos ayudaran en la animacion<br />        self.cambia     = 0<br />        self.alternar   = 0<br />        self.cambia_max = 6<br />        self.vel        = 8<br /><br />    def mover(self, direccion):<br />        &quot;&quot;&quot; metodo que nos permite mover al self hacia la izquierda o hacia la derecha.<br />        &quot;&quot;&quot;<br />        # FIXME: al voltear a Doraemon debemos hacer que mueva un pie.<br />        # FIXME: al mover a Doraemon un &quot;pasito&quot; **deberia** mover un pie<br />        #        y no quedarse estatico.<br />        # volteamos la imagen del Sprite<br />        self.FlipX(direccion)<br />        <br />        if self.cambia &lt;= self.cambia_max:<br />            # si self.cambia es menor o igual a su maximo<br />            # sumamos uno al atributo.<br />            self.cambia = self.cambia + 1<br />        else:<br />            if self.alternar == 3:<br />                # si self.alternar llega al maximo de los frames disponibles<br />                # volvemos al primer frame, el &quot;frame 0&quot;.<br />                self.alternar = 0<br />                <br />            # cambiamos el frame...<br />            if self.alternar   == 0:<br />                # el frame que buscamos se ubica en ese rectangulo<br />                self.SetSubRect(sf.IntRect(204, 0, 244, 40))<br />                #print &quot;derecha&quot;<br />            elif self.alternar == 1:<br />                self.SetSubRect(sf.IntRect(0, 0, 43, 40))<br />                #print &quot;de pie&quot;<br />            elif self.alternar == 2:<br />                self.SetSubRect(sf.IntRect(164, 0, 204, 40))<br />                #print &quot;izquierda&quot;<br />            # alistamos el primer frame :D<br />            self.alternar = self.alternar + 1<br />            #print &quot;self.alternar: {0}&quot;.format(self.alternar)<br />        if direccion:<br />            self.Move(-self.vel,0)<br />        else:<br />            self.Move(self.vel, 0)<br /><br />    def detener(self):<br />        &quot;&quot;&quot; metodo para &quot;detener&quot; a Doraemon.<br />        <br />        este metodo no tiene nada que ver con el movimiento del Sprite.<br />        solo cambia el frame cuando mueve los pies al frame donde esta de<br />        pie.&quot;&quot;&quot;<br />        # cambiamos algunos atributos del Sprite<br />        self.cambia   = 0<br />        self.alternar = 1<br />        # cambiamos el frame<br />        self.SetSubRect(sf.IntRect(0, 0, 43, 40))<br />        print &quot;esta quieto y sonrie como un idiota, glol&quot;<br /><br />    def velocidad(self, cambiar_que, cantidad):<br />        &quot;&quot;&quot; este metodo nos permite cambiar la velocidad del movimiento del Sprite<br />            o la velocidad con la que cambian los frames.<br />        &quot;&quot;&quot;<br />        if cambiar_que:<br />            # cambiamos el retardo que existe entre un frame y otro<br />            if self.cambia_max  == 0:<br />                # no podemos usar numeros negativos o 0!!<br />                self.cambia_max = 1<br />            else:<br />                # cambiamos la velocidad de la animacion.<br />                self.cambia_max = self.cambia_max + cantidad<br />        else:<br />            # cambiamos la velocidad con la que se mueve el Sprite<br />            if self.vel  == 0:<br />                self.vel = 1<br />            else:<br />                self.vel = self.vel + cantidad<br /><br />    def textoInformativo(self):<br />        &quot;&quot;&quot; dibuja un texto con finalidades informativas en la pantalla del juego.<br />        &quot;&quot;&quot;<br />        texto   = &quot;Velocidad de movimiento: {0} (Teclas: S - X).\n&quot;.format(self.vel)<br />        texto   = texto + &quot;Retardo entre Frames: {0} (Teclas: A - Z).\n&quot;.format(self.cambia_max)<br />        texto   = texto + &quot;Mover con las flechas direccionales Izquierda y Derecha.&quot;<br />        texto_d = sf.String(texto)<br />        return texto_d<br /><br /># Como que me da mucha pereza y usare los objetos de color de sf.Color,<br /># Vamos a usar variables para esos objetos de color.<br />Black   = sf.Color.Black<br />MyGreen = sf.Color(186, 254, 202)<br /><br /># creamos la ventana del juego<br />ventana = sf.RenderWindow(sf.VideoMode(800,300), &quot;Prueba 6 con PySFML por Shackra&quot;)<br /><br /># obtenemos el input de los eventos de la ventana creada, mira sf.Input para mas informacion<br /># parece ser que no es necesario declarar este objeto dentro del loop para actualizar su estado...<br />entrada = ventana.GetInput()<br /><br /># ahora usamos esa imagen cargada y creamos un self<br />doraemon = MySprite()<br /># sf.IntRect(left, top, right, bottom) &lt;--- por si te lo preguntabas...<br />doraemon.SetSubRect(sf.IntRect(0, 0, 43, 40))<br /><br /># iniciamos el loop del juego<br />salir = False<br />while not salir:<br />    eventos = sf.Event()<br />    while ventana.GetEvent(eventos):<br />        if eventos.Type == sf.Event.Closed:<br />            salir = True<br /><br />        if eventos.Type == sf.Event.KeyPressed:<br />            if eventos.Key.Code == sf.Key.Escape:<br />                # el usuario pide salir del juego<br />                salir = True<br />            if eventos.Key.Code  == sf.Key.Right:<br />                doraemon.mover(False)<br />            if eventos.Key.Code ==  sf.Key.Left:<br />                doraemon.mover(True)<br />                <br />            # cambiamos el retardo entre los frames<br />            if eventos.Key.Code == sf.Key.A:<br />                doraemon.velocidad(True, 1)<br />            if eventos.Key.Code == sf.Key.Z:<br />                doraemon.velocidad(True, -1)<br />            # cambiamos la velocidad del movimiento del Sprite<br />            if eventos.Key.Code == sf.Key.S:<br />                doraemon.velocidad(False, 1)<br />            if eventos.Key.Code == sf.Key.X:<br />                doraemon.velocidad(False, -1)<br /><br />        if eventos.Type == sf.Event.KeyReleased:<br />            doraemon.detener()<br /><br />        #limpiamos la ventana y dibujamos los objetos en la pantalla<br />        ventana.Clear(MyGreen)<br />        ventana.Draw(doraemon)<br />        ventana.Draw(doraemon.textoInformativo())<br />        ventana.Display()<br /><br />ventana.Close()</code></dd></dl><p>Estadísticas: Publicado por <a href="http://losersjuegos.com.ar/foro/memberlist.php?mode=viewprofile&amp;u=2114">shackra</a> — Mar Ene 18, 2011 6:41 am</p><hr />
]]></content>
</entry>
</feed>